<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JetPackJoyRide: camera3_stream Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JetPackJoyRide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structcamera3__stream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">camera3_stream Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="camera3_8h_source.html">camera3.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abf8c3a5f0c37b0d488636f513fbe703e" id="r_abf8c3a5f0c37b0d488636f513fbe703e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#abf8c3a5f0c37b0d488636f513fbe703e">stream_type</a></td></tr>
<tr class="separator:abf8c3a5f0c37b0d488636f513fbe703e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff75fcdede432e2fa3125bef93a83a9" id="r_adff75fcdede432e2fa3125bef93a83a9"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#adff75fcdede432e2fa3125bef93a83a9">width</a></td></tr>
<tr class="separator:adff75fcdede432e2fa3125bef93a83a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f65b74ccc0a3e4238ccbfd02981a92" id="r_aa0f65b74ccc0a3e4238ccbfd02981a92"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#aa0f65b74ccc0a3e4238ccbfd02981a92">height</a></td></tr>
<tr class="separator:aa0f65b74ccc0a3e4238ccbfd02981a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851e5b018afe574ea0e8e81a1ab4a4fc" id="r_a851e5b018afe574ea0e8e81a1ab4a4fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a851e5b018afe574ea0e8e81a1ab4a4fc">format</a></td></tr>
<tr class="separator:a851e5b018afe574ea0e8e81a1ab4a4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0b10588ca4d9f18006a3f263758062" id="r_abf0b10588ca4d9f18006a3f263758062"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#abf0b10588ca4d9f18006a3f263758062">usage</a></td></tr>
<tr class="separator:abf0b10588ca4d9f18006a3f263758062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58667022a7c486694a356d4e0166dc1d" id="r_a58667022a7c486694a356d4e0166dc1d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a58667022a7c486694a356d4e0166dc1d">max_buffers</a></td></tr>
<tr class="separator:a58667022a7c486694a356d4e0166dc1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0a3d68951c4ee85e158f6acea75d0b" id="r_a5f0a3d68951c4ee85e158f6acea75d0b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a5f0a3d68951c4ee85e158f6acea75d0b">priv</a></td></tr>
<tr class="separator:a5f0a3d68951c4ee85e158f6acea75d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97689df6fc94271641228436ab652b9" id="r_ac97689df6fc94271641228436ab652b9"><td class="memItemLeft" align="right" valign="top">android_dataspace_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#ac97689df6fc94271641228436ab652b9">data_space</a></td></tr>
<tr class="separator:ac97689df6fc94271641228436ab652b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6df96cc0f88d4027fc8224beae6ab398" id="r_a6df96cc0f88d4027fc8224beae6ab398"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a6df96cc0f88d4027fc8224beae6ab398">rotation</a></td></tr>
<tr class="separator:a6df96cc0f88d4027fc8224beae6ab398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2001374fab416d1ac2eea55cb2a7e41" id="r_ae2001374fab416d1ac2eea55cb2a7e41"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#ae2001374fab416d1ac2eea55cb2a7e41">physical_camera_id</a></td></tr>
<tr class="separator:ae2001374fab416d1ac2eea55cb2a7e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7fd918d8c4d8e0c7bb6c8d04e94fb5" id="r_a3e7fd918d8c4d8e0c7bb6c8d04e94fb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a3e7fd918d8c4d8e0c7bb6c8d04e94fb5">crop_rotate_scale_degrees</a></td></tr>
<tr class="separator:a3e7fd918d8c4d8e0c7bb6c8d04e94fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f368c0e3eaffd75385c5eb73403bd5" id="r_a07f368c0e3eaffd75385c5eb73403bd5"><td class="memItemLeft" align="right" valign="top"><a id="a07f368c0e3eaffd75385c5eb73403bd5" name="a07f368c0e3eaffd75385c5eb73403bd5"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>reserved</b> [5]</td></tr>
<tr class="separator:a07f368c0e3eaffd75385c5eb73403bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>camera3_stream_t:</p>
<p>A handle to a single camera input or output stream. A stream is defined by the framework by its buffer resolution and format, and additionally by the HAL with the gralloc usage flags and the maximum in-flight buffer count.</p>
<p>The stream structures are owned by the framework, but pointers to a <a class="el" href="structcamera3__stream.html">camera3_stream</a> passed into the HAL by configure_streams() are valid until the end of the first subsequent configure_streams() call that <em>does not</em> include that <a class="el" href="structcamera3__stream.html">camera3_stream</a> as an argument, or until the end of the close() call.</p>
<p>All <a class="el" href="structcamera3__stream.html">camera3_stream</a> framework-controlled members are immutable once the <a class="el" href="structcamera3__stream.html">camera3_stream</a> is passed into configure_streams(). The HAL may only change the HAL-controlled parameters during a configure_streams() call, except for the contents of the private pointer.</p>
<p>If a configure_streams() call returns a non-fatal error, all active streams remain valid as if configure_streams() had not been called.</p>
<p>The endpoint of the stream is not visible to the camera HAL device. In DEVICE_API_VERSION_3_1, this was changed to share consumer usage flags on streams where the camera is a producer (OUTPUT and BIDIRECTIONAL stream types) see the usage field below. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a3e7fd918d8c4d8e0c7bb6c8d04e94fb5" name="a3e7fd918d8c4d8e0c7bb6c8d04e94fb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7fd918d8c4d8e0c7bb6c8d04e94fb5">&#9670;&#160;</a></span>crop_rotate_scale_degrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int camera3_stream::crop_rotate_scale_degrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This should be one of the camera3_stream_rotation_t values except for CAMERA3_STREAM_ROTATION_180. When setting to CAMERA3_STREAM_ROTATION_90 or CAMERA3_STREAM_ROTATION_270, HAL would crop, rotate the frame by the specified degrees clockwise and scale it up to original size. In Chrome OS, it's possible to have a portrait activity run in a landscape screen with landscape-mounted camera. The activity would show stretched or rotated preview because it does not expect to receive landscape preview frames. To solve this problem, we ask HAL to crop, rotate and scale the frames and modify CameraCharacteristics.SENSOR_ORIENTATION accordingly to imitate a portrait camera. Setting it to CAMERA3_STREAM_ROTATION_0 means no crop-rotate-scale would be performed. |cros_rotate_scale_degrees| in all camera3_stream_t of a configure_streams() call must be identical. The HAL should return -EINVAL if the degrees are not the same for all the streams. </p>

</div>
</div>
<a id="ac97689df6fc94271641228436ab652b9" name="ac97689df6fc94271641228436ab652b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97689df6fc94271641228436ab652b9">&#9670;&#160;</a></span>data_space</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">android_dataspace_t camera3_stream::data_space</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A field that describes the contents of the buffer. The format and buffer dimensions define the memory layout and structure of the stream buffers, while dataSpace defines the meaning of the data within the buffer.</p>
<p>For most formats, dataSpace defines the color space of the image data. In addition, for some formats, dataSpace indicates whether image- or depth-based data is requested. See <a class="el" href="graphics_8h_source.html">system/core/include/system/graphics.h</a> for details of formats and valid dataSpace values for each format.</p>
<p>Version information:</p>
<p>&lt; CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Not defined and should not be accessed. dataSpace should be assumed to be HAL_DATASPACE_UNKNOWN, and the appropriate color space, etc, should be determined from the usage flags and the format.</p>
<p>= CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Always set by the camera service. HAL must use this dataSpace to configure the stream to the correct colorspace, or to select between color and depth outputs if supported. The dataspace values are the legacy definitions in <a class="el" href="graphics_8h_source.html">graphics.h</a></p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_4:</p>
<p>Always set by the camera service. HAL must use this dataSpace to configure the stream to the correct colorspace, or to select between color and depth outputs if supported. The dataspace values are set using the V0 dataspace definitions in <a class="el" href="graphics_8h_source.html">graphics.h</a> </p>

</div>
</div>
<a id="a851e5b018afe574ea0e8e81a1ab4a4fc" name="a851e5b018afe574ea0e8e81a1ab4a4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a851e5b018afe574ea0e8e81a1ab4a4fc">&#9670;&#160;</a></span>format</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int camera3_stream::format</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The pixel format for the buffers in this stream. <a class="el" href="classFormat.html">Format</a> is a value from the HAL_PIXEL_FORMAT_* list in <a class="el" href="graphics_8h_source.html">system/core/include/system/graphics.h</a>, or from device-specific headers.</p>
<p>If HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED is used, then the platform gralloc module will select a format based on the usage flags provided by the camera device and the other endpoint of the stream.</p>
<p>&lt;= CAMERA_DEVICE_API_VERSION_3_1:</p>
<p>The camera HAL device must inspect the buffers handed to it in the subsequent register_stream_buffers() call to obtain the implementation-specific format details, if necessary.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>register_stream_buffers() won't be called by the framework, so the HAL should configure the ISP and sensor pipeline based purely on the sizes, usage flags, and formats for the configured streams. </p>

</div>
</div>
<a id="aa0f65b74ccc0a3e4238ccbfd02981a92" name="aa0f65b74ccc0a3e4238ccbfd02981a92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f65b74ccc0a3e4238ccbfd02981a92">&#9670;&#160;</a></span>height</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_stream::height</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The height in pixels of the buffers in this stream </p>

</div>
</div>
<a id="a58667022a7c486694a356d4e0166dc1d" name="a58667022a7c486694a356d4e0166dc1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58667022a7c486694a356d4e0166dc1d">&#9670;&#160;</a></span>max_buffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_stream::max_buffers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The maximum number of buffers the HAL device may need to have dequeued at the same time. The HAL device may not have more buffers in-flight from this stream than this value. </p>

</div>
</div>
<a id="ae2001374fab416d1ac2eea55cb2a7e41" name="ae2001374fab416d1ac2eea55cb2a7e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2001374fab416d1ac2eea55cb2a7e41">&#9670;&#160;</a></span>physical_camera_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* camera3_stream::physical_camera_id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The physical camera id this stream belongs to.</p>
<p>&lt;= CAMERA_DEVICE_API_VERISON_3_4:</p>
<p>Not defined and must not be accessed.</p>
<p>&gt;= CAMERA_DEVICE_API_VERISON_3_5:</p>
<p>Always set by camera service. If the camera device is not a logical multi camera, or if the camera is a logical multi camera but the stream is not a physical output stream, this field will point to a 0-length string.</p>
<p>A logical multi camera is a camera device backed by multiple physical cameras that are also exposed to the application. And for a logical multi camera, a physical output stream is an output stream specifically requested on an underlying physical camera.</p>
<p>For an input stream, this field is guaranteed to be a 0-length string. </p>

</div>
</div>
<a id="a5f0a3d68951c4ee85e158f6acea75d0b" name="a5f0a3d68951c4ee85e158f6acea75d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f0a3d68951c4ee85e158f6acea75d0b">&#9670;&#160;</a></span>priv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* camera3_stream::priv</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle to HAL-private information for the stream. Will not be inspected by the framework code. </p>

</div>
</div>
<a id="a6df96cc0f88d4027fc8224beae6ab398" name="a6df96cc0f88d4027fc8224beae6ab398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6df96cc0f88d4027fc8224beae6ab398">&#9670;&#160;</a></span>rotation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int camera3_stream::rotation</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The required output rotation of the stream, one of the camera3_stream_rotation_t values. This must be inspected by HAL along with stream width and height. For example, if the rotation is 90 degree and the stream width and height is 720 and 1280 respectively, camera service will supply buffers of size 720x1280, and HAL should capture a 1280x720 image and rotate the image by 90 degree counterclockwise. The rotation field is no-op when the stream type is input. Camera HAL must ignore the rotation field for an input stream.</p>
<p>&lt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>Not defined and must not be accessed. HAL must not apply any rotation on output images.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Always set by camera service. HAL must inspect this field during stream configuration and returns -EINVAL if HAL cannot perform such rotation. HAL must always support CAMERA3_STREAM_ROTATION_0, so a configure_streams() call must not fail for unsupported rotation if rotation field of all streams is CAMERA3_STREAM_ROTATION_0. </p>

</div>
</div>
<a id="abf8c3a5f0c37b0d488636f513fbe703e" name="abf8c3a5f0c37b0d488636f513fbe703e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf8c3a5f0c37b0d488636f513fbe703e">&#9670;&#160;</a></span>stream_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int camera3_stream::stream_type</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of the stream, one of the camera3_stream_type_t values. </p>

</div>
</div>
<a id="abf0b10588ca4d9f18006a3f263758062" name="abf0b10588ca4d9f18006a3f263758062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf0b10588ca4d9f18006a3f263758062">&#9670;&#160;</a></span>usage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_stream::usage</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The gralloc usage flags for this stream, as needed by the HAL. The usage flags are defined in <a class="el" href="gralloc_8h_source.html">gralloc.h</a> (GRALLOC_USAGE_*), or in device-specific headers.</p>
<p>For output streams, these are the HAL's producer usage flags. For input streams, these are the HAL's consumer usage flags. The usage flags from the producer and the consumer will be combined together and then passed to the platform gralloc HAL module for allocating the gralloc buffers for each stream.</p>
<p>Version information:</p>
<p>== CAMERA_DEVICE_API_VERSION_3_0:</p>
<p>No initial value guaranteed when passed via configure_streams(). HAL may not use this field as input, and must write over this field with its usage flags.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_1:</p>
<p>For stream_type OUTPUT and BIDIRECTIONAL, when passed via configure_streams(), the initial value of this is the consumer's usage flags. The HAL may use these consumer flags to decide stream configuration. For stream_type INPUT, when passed via configure_streams(), the initial value of this is 0. For all streams passed via configure_streams(), the HAL must write over this field with its usage flags.</p>
<p>From Android O, the usage flag for an output stream may be bitwise combination of usage flags for multiple consumers, for the purpose of sharing one camera stream between those consumers. The HAL must fail configure_streams call with -EINVAL if the combined flags cannot be supported due to imcompatible buffer format, dataSpace, or other hardware limitations. </p>

</div>
</div>
<a id="adff75fcdede432e2fa3125bef93a83a9" name="adff75fcdede432e2fa3125bef93a83a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adff75fcdede432e2fa3125bef93a83a9">&#9670;&#160;</a></span>width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_stream::width</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The width in pixels of the buffers in this stream </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/peripherals/camera/libcamera/include/android/hardware/libhardware/include/hardware/<a class="el" href="camera3_8h_source.html">camera3.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
