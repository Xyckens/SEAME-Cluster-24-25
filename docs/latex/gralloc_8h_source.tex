\doxysection{gralloc.\+h}
\hypertarget{gralloc_8h_source}{}\label{gralloc_8h_source}\index{src/peripherals/camera/libcamera/include/android/hardware/libhardware/include/hardware/gralloc.h@{src/peripherals/camera/libcamera/include/android/hardware/libhardware/include/hardware/gralloc.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ SPDX-\/License-\/Identifier:\ Apache-\/2.0\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2008\ The\ Android\ Open\ Source\ Project}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#ifndef\ ANDROID\_GRALLOC\_INTERFACE\_H}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ ANDROID\_GRALLOC\_INTERFACE\_H}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <hardware/hardware.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <system/graphics.h>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <sys/cdefs.h>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <sys/types.h>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <cutils/native\_handle.h>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <hardware/fb.h>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <hardware/hardware.h>}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \_\_BEGIN\_DECLS}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#define\ GRALLOC\_MODULE\_API\_VERSION\_0\_1\ \ HARDWARE\_MODULE\_API\_VERSION(0,\ 1)}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#define\ GRALLOC\_MODULE\_API\_VERSION\_0\_2\ \ HARDWARE\_MODULE\_API\_VERSION(0,\ 2)}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#define\ GRALLOC\_MODULE\_API\_VERSION\_0\_3\ \ HARDWARE\_MODULE\_API\_VERSION(0,\ 3)}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ GRALLOC\_DEVICE\_API\_VERSION\_0\_1\ \ HARDWARE\_DEVICE\_API\_VERSION(0,\ 1)}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#define\ GRALLOC\_HARDWARE\_MODULE\_ID\ "{}gralloc"{}}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#define\ GRALLOC\_HARDWARE\_GPU0\ "{}gpu0"{}}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ never\ read\ in\ software\ */}}
\DoxyCodeLine{00071\ \ \ \ \ GRALLOC\_USAGE\_SW\_READ\_NEVER\ \ \ \ \ \ \ \ \ =\ 0x00000000U,}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ rarely\ read\ in\ software\ */}}
\DoxyCodeLine{00073\ \ \ \ \ GRALLOC\_USAGE\_SW\_READ\_RARELY\ \ \ \ \ \ \ \ =\ 0x00000002U,}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ often\ read\ in\ software\ */}}
\DoxyCodeLine{00075\ \ \ \ \ GRALLOC\_USAGE\_SW\_READ\_OFTEN\ \ \ \ \ \ \ \ \ =\ 0x00000003U,}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{/*\ mask\ for\ the\ software\ read\ values\ */}}
\DoxyCodeLine{00077\ \ \ \ \ GRALLOC\_USAGE\_SW\_READ\_MASK\ \ \ \ \ \ \ \ \ \ =\ 0x0000000FU,}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ never\ written\ in\ software\ */}}
\DoxyCodeLine{00080\ \ \ \ \ GRALLOC\_USAGE\_SW\_WRITE\_NEVER\ \ \ \ \ \ \ \ =\ 0x00000000U,}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ rarely\ written\ in\ software\ */}}
\DoxyCodeLine{00082\ \ \ \ \ GRALLOC\_USAGE\_SW\_WRITE\_RARELY\ \ \ \ \ \ \ =\ 0x00000020U,}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{/*\ buffer\ is\ often\ written\ in\ software\ */}}
\DoxyCodeLine{00084\ \ \ \ \ GRALLOC\_USAGE\_SW\_WRITE\_OFTEN\ \ \ \ \ \ \ \ =\ 0x00000030U,}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{/*\ mask\ for\ the\ software\ write\ values\ */}}
\DoxyCodeLine{00086\ \ \ \ \ GRALLOC\_USAGE\_SW\_WRITE\_MASK\ \ \ \ \ \ \ \ \ =\ 0x000000F0U,}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ as\ an\ OpenGL\ ES\ texture\ */}}
\DoxyCodeLine{00089\ \ \ \ \ GRALLOC\_USAGE\_HW\_TEXTURE\ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00000100U,}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ as\ an\ OpenGL\ ES\ render\ target\ */}}
\DoxyCodeLine{00091\ \ \ \ \ GRALLOC\_USAGE\_HW\_RENDER\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00000200U,}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ by\ the\ 2D\ hardware\ blitter\ */}}
\DoxyCodeLine{00093\ \ \ \ \ GRALLOC\_USAGE\_HW\_2D\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00000400U,}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ by\ the\ HWComposer\ HAL\ module\ */}}
\DoxyCodeLine{00095\ \ \ \ \ GRALLOC\_USAGE\_HW\_COMPOSER\ \ \ \ \ \ \ \ \ \ \ =\ 0x00000800U,}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ with\ the\ framebuffer\ device\ */}}
\DoxyCodeLine{00097\ \ \ \ \ GRALLOC\_USAGE\_HW\_FB\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00001000U,}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{/*\ buffer\ should\ be\ displayed\ full-\/screen\ on\ an\ external\ display\ when}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ *\ possible\ */}}
\DoxyCodeLine{00101\ \ \ \ \ GRALLOC\_USAGE\_EXTERNAL\_DISP\ \ \ \ \ \ \ \ \ =\ 0x00002000U,}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{/*\ Must\ have\ a\ hardware-\/protected\ path\ to\ external\ display\ sink\ for}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ \ *\ this\ buffer.\ \ If\ a\ hardware-\/protected\ path\ is\ not\ available,\ then}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ \ *\ either\ don't\ composite\ only\ this\ buffer\ (preferred)\ to\ the}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ \ *\ external\ sink,\ or\ (less\ desirable)\ do\ not\ route\ the\ entire}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ *\ composition\ to\ the\ external\ sink.\ \ */}}
\DoxyCodeLine{00108\ \ \ \ \ GRALLOC\_USAGE\_PROTECTED\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00004000U,}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{/*\ buffer\ may\ be\ used\ as\ a\ cursor\ */}}
\DoxyCodeLine{00111\ \ \ \ \ GRALLOC\_USAGE\_CURSOR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00008000U,}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ with\ the\ HW\ video\ encoder\ */}}
\DoxyCodeLine{00114\ \ \ \ \ GRALLOC\_USAGE\_HW\_VIDEO\_ENCODER\ \ \ \ \ \ =\ 0x00010000U,}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ written\ by\ the\ HW\ camera\ pipeline\ */}}
\DoxyCodeLine{00116\ \ \ \ \ GRALLOC\_USAGE\_HW\_CAMERA\_WRITE\ \ \ \ \ \ \ =\ 0x00020000U,}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ read\ by\ the\ HW\ camera\ pipeline\ */}}
\DoxyCodeLine{00118\ \ \ \ \ GRALLOC\_USAGE\_HW\_CAMERA\_READ\ \ \ \ \ \ \ \ =\ 0x00040000U,}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ as\ part\ of\ zero-\/shutter-\/lag\ queue\ */}}
\DoxyCodeLine{00120\ \ \ \ \ GRALLOC\_USAGE\_HW\_CAMERA\_ZSL\ \ \ \ \ \ \ \ \ =\ 0x00060000U,}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{/*\ mask\ for\ the\ camera\ access\ values\ */}}
\DoxyCodeLine{00122\ \ \ \ \ GRALLOC\_USAGE\_HW\_CAMERA\_MASK\ \ \ \ \ \ \ \ =\ 0x00060000U,}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{/*\ mask\ for\ the\ software\ usage\ bit-\/mask\ */}}
\DoxyCodeLine{00124\ \ \ \ \ GRALLOC\_USAGE\_HW\_MASK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00071F00U,}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{/*\ buffer\ will\ be\ used\ as\ a\ RenderScript\ Allocation\ */}}
\DoxyCodeLine{00127\ \ \ \ \ GRALLOC\_USAGE\_RENDERSCRIPT\ \ \ \ \ \ \ \ \ \ =\ 0x00100000U,}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{/*\ Set\ by\ the\ consumer\ to\ indicate\ to\ the\ producer\ that\ they\ may\ attach\ a}}
\DoxyCodeLine{00130\ \textcolor{comment}{\ \ \ \ \ *\ buffer\ that\ they\ did\ not\ detach\ from\ the\ BufferQueue.\ Will\ be\ filtered}}
\DoxyCodeLine{00131\ \textcolor{comment}{\ \ \ \ \ *\ out\ by\ GRALLOC\_USAGE\_ALLOC\_MASK,\ so\ gralloc\ modules\ will\ not\ need\ to}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ \ *\ handle\ this\ flag.\ */}}
\DoxyCodeLine{00133\ \ \ \ \ GRALLOC\_USAGE\_FOREIGN\_BUFFERS\ \ \ \ \ \ \ =\ 0x00200000U,}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{/*\ Mask\ of\ all\ flags\ which\ could\ be\ passed\ to\ a\ gralloc\ module\ for\ buffer}}
\DoxyCodeLine{00136\ \textcolor{comment}{\ \ \ \ \ *\ allocation.\ Any\ flags\ not\ in\ this\ mask\ do\ not\ need\ to\ be\ handled\ by}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ \ *\ gralloc\ modules.\ */}}
\DoxyCodeLine{00138\ \ \ \ \ GRALLOC\_USAGE\_ALLOC\_MASK\ \ \ \ \ \ \ \ \ \ \ \ =\ \string~(GRALLOC\_USAGE\_FOREIGN\_BUFFERS),}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{/*\ implementation-\/specific\ private\ usage\ flags\ */}}
\DoxyCodeLine{00141\ \ \ \ \ GRALLOC\_USAGE\_PRIVATE\_0\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x10000000U,}
\DoxyCodeLine{00142\ \ \ \ \ GRALLOC\_USAGE\_PRIVATE\_1\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x20000000U,}
\DoxyCodeLine{00143\ \ \ \ \ GRALLOC\_USAGE\_PRIVATE\_2\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x40000000U,}
\DoxyCodeLine{00144\ \ \ \ \ GRALLOC\_USAGE\_PRIVATE\_3\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x80000000U,}
\DoxyCodeLine{00145\ \ \ \ \ GRALLOC\_USAGE\_PRIVATE\_MASK\ \ \ \ \ \ \ \ \ \ =\ 0xF0000000U,}
\DoxyCodeLine{00146\ \};}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \textcolor{comment}{/*****************************************************************************/}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00155\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhw__module__t}{hw\_module\_t}}\ common;}
\DoxyCodeLine{00157\ \ \ \ \ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ \ *\ (*registerBuffer)()\ must\ be\ called\ before\ a\ buffer\_handle\_t\ that\ has\ not}}
\DoxyCodeLine{00160\ \textcolor{comment}{\ \ \ \ \ *\ been\ created\ with\ (*alloc\_device\_t::alloc)()\ can\ be\ used.}}
\DoxyCodeLine{00161\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00162\ \textcolor{comment}{\ \ \ \ \ *\ This\ is\ intended\ to\ be\ used\ with\ buffer\_handle\_t's\ that\ have\ been}}
\DoxyCodeLine{00163\ \textcolor{comment}{\ \ \ \ \ *\ received\ in\ this\ process\ through\ IPC.}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ \ *\ This\ function\ checks\ that\ the\ handle\ is\ indeed\ a\ valid\ one\ and\ prepares}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ \ *\ it\ for\ use\ with\ (*lock)()\ and\ (*unlock)().}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ \ *\ It\ is\ not\ necessary\ to\ call\ (*registerBuffer)()\ on\ a\ handle\ created\ }}
\DoxyCodeLine{00169\ \textcolor{comment}{\ \ \ \ \ *\ with\ (*alloc\_device\_t::alloc)().}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00171\ \textcolor{comment}{\ \ \ \ \ *\ returns\ an\ error\ if\ this\ buffer\_handle\_t\ is\ not\ valid.}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00173\ \ \ \ \ int\ (*registerBuffer)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00177\ \textcolor{comment}{\ \ \ \ \ *\ (*unregisterBuffer)()\ is\ called\ once\ this\ handle\ is\ no\ longer\ needed\ in}}
\DoxyCodeLine{00178\ \textcolor{comment}{\ \ \ \ \ *\ this\ process.\ After\ this\ call,\ it\ is\ an\ error\ to\ call\ (*lock)(),}}
\DoxyCodeLine{00179\ \textcolor{comment}{\ \ \ \ \ *\ (*unlock)(),\ or\ (*registerBuffer)().}}
\DoxyCodeLine{00180\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00181\ \textcolor{comment}{\ \ \ \ \ *\ This\ function\ doesn't\ close\ or\ free\ the\ handle\ itself;\ this\ is\ done}}
\DoxyCodeLine{00182\ \textcolor{comment}{\ \ \ \ \ *\ by\ other\ means,\ usually\ through\ libcutils's\ native\_handle\_close()\ and}}
\DoxyCodeLine{00183\ \textcolor{comment}{\ \ \ \ \ *\ native\_handle\_free().\ }}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00185\ \textcolor{comment}{\ \ \ \ \ *\ It\ is\ an\ error\ to\ call\ (*unregisterBuffer)()\ on\ a\ buffer\ that\ wasn't}}
\DoxyCodeLine{00186\ \textcolor{comment}{\ \ \ \ \ *\ explicitly\ registered\ first.}}
\DoxyCodeLine{00187\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00188\ \ \ \ \ int\ (*unregisterBuffer)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle);}
\DoxyCodeLine{00190\ \ \ \ \ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00192\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*lock)()\ method\ is\ called\ before\ a\ buffer\ is\ accessed\ for\ the\ }}
\DoxyCodeLine{00193\ \textcolor{comment}{\ \ \ \ \ *\ specified\ usage.\ This\ call\ may\ block,\ for\ instance\ if\ the\ h/w\ needs}}
\DoxyCodeLine{00194\ \textcolor{comment}{\ \ \ \ \ *\ to\ finish\ rendering\ or\ if\ CPU\ caches\ need\ to\ be\ synchronized.}}
\DoxyCodeLine{00195\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00196\ \textcolor{comment}{\ \ \ \ \ *\ The\ caller\ promises\ to\ modify\ only\ pixels\ in\ the\ area\ specified\ }}
\DoxyCodeLine{00197\ \textcolor{comment}{\ \ \ \ \ *\ by\ (l,t,w,h).}}
\DoxyCodeLine{00198\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00199\ \textcolor{comment}{\ \ \ \ \ *\ The\ content\ of\ the\ buffer\ outside\ of\ the\ specified\ area\ is\ NOT\ modified}}
\DoxyCodeLine{00200\ \textcolor{comment}{\ \ \ \ \ *\ by\ this\ call.}}
\DoxyCodeLine{00201\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00202\ \textcolor{comment}{\ \ \ \ \ *\ If\ usage\ specifies\ GRALLOC\_USAGE\_SW\_*,\ vaddr\ is\ filled\ with\ the\ address}}
\DoxyCodeLine{00203\ \textcolor{comment}{\ \ \ \ \ *\ of\ the\ buffer\ in\ virtual\ memory.}}
\DoxyCodeLine{00204\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00205\ \textcolor{comment}{\ \ \ \ \ *\ Note\ calling\ (*lock)()\ on\ HAL\_PIXEL\_FORMAT\_YCbCr\_*\_888\ buffers\ will\ fail}}
\DoxyCodeLine{00206\ \textcolor{comment}{\ \ \ \ \ *\ and\ return\ -\/EINVAL.\ \ These\ buffers\ must\ be\ locked\ with\ (*lock\_ycbcr)()}}
\DoxyCodeLine{00207\ \textcolor{comment}{\ \ \ \ \ *\ instead.}}
\DoxyCodeLine{00208\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00209\ \textcolor{comment}{\ \ \ \ \ *\ THREADING\ CONSIDERATIONS:}}
\DoxyCodeLine{00210\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00211\ \textcolor{comment}{\ \ \ \ \ *\ It\ is\ legal\ for\ several\ different\ threads\ to\ lock\ a\ buffer\ from\ }}
\DoxyCodeLine{00212\ \textcolor{comment}{\ \ \ \ \ *\ read\ access,\ none\ of\ the\ threads\ are\ blocked.}}
\DoxyCodeLine{00213\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00214\ \textcolor{comment}{\ \ \ \ \ *\ However,\ locking\ a\ buffer\ simultaneously\ for\ write\ or\ read/write\ is}}
\DoxyCodeLine{00215\ \textcolor{comment}{\ \ \ \ \ *\ undefined,\ but:}}
\DoxyCodeLine{00216\ \textcolor{comment}{\ \ \ \ \ *\ -\/\ shall\ not\ result\ in\ termination\ of\ the\ process}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ \ *\ -\/\ shall\ not\ block\ the\ caller}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ *\ It\ is\ acceptable\ to\ return\ an\ error\ or\ to\ leave\ the\ buffer's\ content}}
\DoxyCodeLine{00219\ \textcolor{comment}{\ \ \ \ \ *\ into\ an\ indeterminate\ state.}}
\DoxyCodeLine{00220\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00221\ \textcolor{comment}{\ \ \ \ \ *\ If\ the\ buffer\ was\ created\ with\ a\ usage\ mask\ incompatible\ with\ the}}
\DoxyCodeLine{00222\ \textcolor{comment}{\ \ \ \ \ *\ requested\ usage\ flags\ here,\ -\/EINVAL\ is\ returned.\ }}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00224\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00225\ \ \ \ \ }
\DoxyCodeLine{00226\ \ \ \ \ int\ (*lock)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle,\ \textcolor{keywordtype}{int}\ usage,}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ t,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keywordtype}{int}\ h,}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}**\ vaddr);}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00233\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*unlock)()\ method\ must\ be\ called\ after\ all\ changes\ to\ the\ buffer}}
\DoxyCodeLine{00234\ \textcolor{comment}{\ \ \ \ \ *\ are\ completed.}}
\DoxyCodeLine{00235\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00236\ \ \ \ \ }
\DoxyCodeLine{00237\ \ \ \ \ int\ (*unlock)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle);}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{comment}{/*\ reserved\ for\ future\ use\ */}}
\DoxyCodeLine{00242\ \ \ \ \ int\ (*perform)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ operation,\ ...\ );}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00246\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*lock\_ycbcr)()\ method\ is\ like\ the\ (*lock)()\ method,\ with\ the}}
\DoxyCodeLine{00247\ \textcolor{comment}{\ \ \ \ \ *\ difference\ that\ it\ fills\ a\ struct\ ycbcr\ with\ a\ description\ of\ the\ buffer}}
\DoxyCodeLine{00248\ \textcolor{comment}{\ \ \ \ \ *\ layout,\ and\ zeroes\ out\ the\ reserved\ fields.}}
\DoxyCodeLine{00249\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00250\ \textcolor{comment}{\ \ \ \ \ *\ If\ the\ buffer\ format\ is\ not\ compatible\ with\ a\ flexible\ YUV\ format\ (e.g.}}
\DoxyCodeLine{00251\ \textcolor{comment}{\ \ \ \ \ *\ the\ buffer\ layout\ cannot\ be\ represented\ with\ the\ ycbcr\ struct),\ it}}
\DoxyCodeLine{00252\ \textcolor{comment}{\ \ \ \ \ *\ will\ return\ -\/EINVAL.}}
\DoxyCodeLine{00253\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00254\ \textcolor{comment}{\ \ \ \ \ *\ This\ method\ must\ work\ on\ buffers\ with\ HAL\_PIXEL\_FORMAT\_YCbCr\_*\_888}}
\DoxyCodeLine{00255\ \textcolor{comment}{\ \ \ \ \ *\ if\ supported\ by\ the\ device,\ as\ well\ as\ with\ any\ other\ format\ that\ is}}
\DoxyCodeLine{00256\ \textcolor{comment}{\ \ \ \ \ *\ requested\ by\ the\ multimedia\ codecs\ when\ they\ are\ configured\ with\ a}}
\DoxyCodeLine{00257\ \textcolor{comment}{\ \ \ \ \ *\ flexible-\/YUV-\/compatible\ color-\/format\ with\ android\ native\ buffers.}}
\DoxyCodeLine{00258\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00259\ \textcolor{comment}{\ \ \ \ \ *\ Note\ that\ this\ method\ may\ also\ be\ called\ on\ buffers\ of\ other\ formats,}}
\DoxyCodeLine{00260\ \textcolor{comment}{\ \ \ \ \ *\ including\ non-\/YUV\ formats.}}
\DoxyCodeLine{00261\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00262\ \textcolor{comment}{\ \ \ \ \ *\ Added\ in\ GRALLOC\_MODULE\_API\_VERSION\_0\_2.}}
\DoxyCodeLine{00263\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ int\ (*lock\_ycbcr)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle,\ \textcolor{keywordtype}{int}\ usage,}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ t,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keywordtype}{int}\ h,}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structandroid__ycbcr}{android\_ycbcr}}\ *ycbcr);}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00271\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*lockAsync)()\ method\ is\ like\ the\ (*lock)()\ method\ except}}
\DoxyCodeLine{00272\ \textcolor{comment}{\ \ \ \ \ *\ that\ the\ buffer's\ sync\ fence\ object\ is\ passed\ into\ the\ lock}}
\DoxyCodeLine{00273\ \textcolor{comment}{\ \ \ \ \ *\ call\ instead\ of\ requiring\ the\ caller\ to\ wait\ for\ completion.}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ *\ The\ gralloc\ implementation\ takes\ ownership\ of\ the\ fenceFd\ and}}
\DoxyCodeLine{00276\ \textcolor{comment}{\ \ \ \ \ *\ is\ responsible\ for\ closing\ it\ when\ no\ longer\ needed.}}
\DoxyCodeLine{00277\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00278\ \textcolor{comment}{\ \ \ \ \ *\ Added\ in\ GRALLOC\_MODULE\_API\_VERSION\_0\_3.}}
\DoxyCodeLine{00279\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00280\ \ \ \ \ int\ (*lockAsync)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle,\ \textcolor{keywordtype}{int}\ usage,}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ t,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keywordtype}{int}\ h,}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}**\ vaddr,\ \textcolor{keywordtype}{int}\ fenceFd);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00286\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*unlockAsync)()\ method\ is\ like\ the\ (*unlock)()\ method}}
\DoxyCodeLine{00287\ \textcolor{comment}{\ \ \ \ \ *\ except\ that\ a\ buffer\ sync\ fence\ object\ is\ returned\ from\ the}}
\DoxyCodeLine{00288\ \textcolor{comment}{\ \ \ \ \ *\ lock\ call,\ representing\ the\ completion\ of\ any\ pending\ work}}
\DoxyCodeLine{00289\ \textcolor{comment}{\ \ \ \ \ *\ performed\ by\ the\ gralloc\ implementation.}}
\DoxyCodeLine{00290\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00291\ \textcolor{comment}{\ \ \ \ \ *\ The\ caller\ takes\ ownership\ of\ the\ fenceFd\ and\ is\ responsible}}
\DoxyCodeLine{00292\ \textcolor{comment}{\ \ \ \ \ *\ for\ closing\ it\ when\ no\ longer\ needed.}}
\DoxyCodeLine{00293\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00294\ \textcolor{comment}{\ \ \ \ \ *\ Added\ in\ GRALLOC\_MODULE\_API\_VERSION\_0\_3.}}
\DoxyCodeLine{00295\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00296\ \ \ \ \ int\ (*unlockAsync)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle,\ \textcolor{keywordtype}{int}*\ fenceFd);}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00300\ \textcolor{comment}{\ \ \ \ \ *\ The\ (*lockAsync\_ycbcr)()\ method\ is\ like\ the\ (*lock\_ycbcr)()}}
\DoxyCodeLine{00301\ \textcolor{comment}{\ \ \ \ \ *\ method\ except\ that\ the\ buffer's\ sync\ fence\ object\ is\ passed}}
\DoxyCodeLine{00302\ \textcolor{comment}{\ \ \ \ \ *\ into\ the\ lock\ call\ instead\ of\ requiring\ the\ caller\ to\ wait\ for}}
\DoxyCodeLine{00303\ \textcolor{comment}{\ \ \ \ \ *\ completion.}}
\DoxyCodeLine{00304\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00305\ \textcolor{comment}{\ \ \ \ \ *\ The\ gralloc\ implementation\ takes\ ownership\ of\ the\ fenceFd\ and}}
\DoxyCodeLine{00306\ \textcolor{comment}{\ \ \ \ \ *\ is\ responsible\ for\ closing\ it\ when\ no\ longer\ needed.}}
\DoxyCodeLine{00307\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ *\ Added\ in\ GRALLOC\_MODULE\_API\_VERSION\_0\_3.}}
\DoxyCodeLine{00309\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00310\ \ \ \ \ int\ (*lockAsync\_ycbcr)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}}\ const*\ module,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle,\ \textcolor{keywordtype}{int}\ usage,}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ t,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keywordtype}{int}\ h,}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structandroid__ycbcr}{android\_ycbcr}}\ *ycbcr,\ \textcolor{keywordtype}{int}\ fenceFd);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{comment}{/*\ reserved\ for\ future\ use\ */}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordtype}{void}*\ reserved\_proc[3];}
\DoxyCodeLine{00317\ \}\ \mbox{\hyperlink{structgralloc__module__t}{gralloc\_module\_t}};}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \textcolor{comment}{/*****************************************************************************/}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00326\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhw__device__t}{hw\_device\_t}}\ common;}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00330\ \textcolor{comment}{\ \ \ \ \ *\ (*alloc)()\ Allocates\ a\ buffer\ in\ graphic\ memory\ with\ the\ requested}}
\DoxyCodeLine{00331\ \textcolor{comment}{\ \ \ \ \ *\ parameters\ and\ returns\ a\ buffer\_handle\_t\ and\ the\ stride\ in\ pixels\ to}}
\DoxyCodeLine{00332\ \textcolor{comment}{\ \ \ \ \ *\ allow\ the\ implementation\ to\ satisfy\ hardware\ constraints\ on\ the\ width}}
\DoxyCodeLine{00333\ \textcolor{comment}{\ \ \ \ \ *\ of\ a\ pixmap\ (eg:\ it\ may\ have\ to\ be\ multiple\ of\ 8\ pixels).\ }}
\DoxyCodeLine{00334\ \textcolor{comment}{\ \ \ \ \ *\ The\ CALLER\ TAKES\ OWNERSHIP\ of\ the\ buffer\_handle\_t.}}
\DoxyCodeLine{00335\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00336\ \textcolor{comment}{\ \ \ \ \ *\ If\ format\ is\ HAL\_PIXEL\_FORMAT\_YCbCr\_420\_888,\ the\ returned\ stride\ must\ be}}
\DoxyCodeLine{00337\ \textcolor{comment}{\ \ \ \ \ *\ 0,\ since\ the\ actual\ strides\ are\ available\ from\ the\ android\_ycbcr}}
\DoxyCodeLine{00338\ \textcolor{comment}{\ \ \ \ \ *\ structure.}}
\DoxyCodeLine{00339\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00340\ \textcolor{comment}{\ \ \ \ \ *\ Returns\ 0\ on\ success\ or\ -\/errno\ on\ error.}}
\DoxyCodeLine{00341\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00342\ \ \ \ \ }
\DoxyCodeLine{00343\ \ \ \ \ int\ (*alloc)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}*\ dev,}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ w,\ \textcolor{keywordtype}{int}\ h,\ \textcolor{keywordtype}{int}\ format,\ \textcolor{keywordtype}{int}\ usage,}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}*\ handle,\ \textcolor{keywordtype}{int}*\ stride);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00348\ \textcolor{comment}{\ \ \ \ \ *\ (*free)()\ Frees\ a\ previously\ allocated\ buffer.\ }}
\DoxyCodeLine{00349\ \textcolor{comment}{\ \ \ \ \ *\ Behavior\ is\ undefined\ if\ the\ buffer\ is\ still\ mapped\ in\ any\ process,}}
\DoxyCodeLine{00350\ \textcolor{comment}{\ \ \ \ \ *\ but\ shall\ not\ result\ in\ termination\ of\ the\ program\ or\ security\ breaches}}
\DoxyCodeLine{00351\ \textcolor{comment}{\ \ \ \ \ *\ (allowing\ a\ process\ to\ get\ access\ to\ another\ process'\ buffers).}}
\DoxyCodeLine{00352\ \textcolor{comment}{\ \ \ \ \ *\ THIS\ FUNCTION\ TAKES\ OWNERSHIP\ of\ the\ buffer\_handle\_t\ which\ becomes}}
\DoxyCodeLine{00353\ \textcolor{comment}{\ \ \ \ \ *\ invalid\ after\ the\ call.\ }}
\DoxyCodeLine{00354\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{00355\ \textcolor{comment}{\ \ \ \ \ *\ Returns\ 0\ on\ success\ or\ -\/errno\ on\ error.}}
\DoxyCodeLine{00356\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00357\ \ \ \ \ int\ (*free)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}*\ dev,}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structnative__handle}{buffer\_handle\_t}}\ handle);}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{comment}{/*\ This\ hook\ is\ OPTIONAL.}}
\DoxyCodeLine{00361\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00362\ \textcolor{comment}{\ \ \ \ \ *\ If\ non\ NULL\ it\ will\ be\ caused\ by\ SurfaceFlinger\ on\ dumpsys}}
\DoxyCodeLine{00363\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00364\ \ \ \ \ void\ (*dump)(\textcolor{keyword}{struct\ }\mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}\ *dev,\ \textcolor{keywordtype}{char}\ *buff,\ \textcolor{keywordtype}{int}\ buff\_len);}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{keywordtype}{void}*\ reserved\_proc[7];}
\DoxyCodeLine{00367\ \}\ \mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}};}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00372\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ gralloc\_open(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structhw__module__t}{hw\_module\_t}}*\ module,\ }
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}**\ device)\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{module}-\/>methods-\/>open(module,\ }
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ GRALLOC\_HARDWARE\_GPU0,\ TO\_HW\_DEVICE\_T\_OPEN(device));}
\DoxyCodeLine{00376\ \}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ gralloc\_close(\textcolor{keyword}{struct}\ \mbox{\hyperlink{structalloc__device__t}{alloc\_device\_t}}*\ device)\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{return}\ device-\/>common.\mbox{\hyperlink{structhw__device__t_a35cfe7e6f77957d14a3d604589c9f78b}{close}}(\&device-\/>common);}
\DoxyCodeLine{00380\ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00394\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ map\_usage\_to\_memtrack(uint32\_t\ usage)\ \{}
\DoxyCodeLine{00395\ \ \ \ \ usage\ \&=\ GRALLOC\_USAGE\_ALLOC\_MASK;}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordflow}{if}\ ((usage\ \&\ GRALLOC\_USAGE\_HW\_CAMERA\_WRITE)\ !=\ 0)\ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}camera"{}};}
\DoxyCodeLine{00399\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((usage\ \&\ GRALLOC\_USAGE\_HW\_VIDEO\_ENCODER)\ !=\ 0\ ||}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ (usage\ \&\ GRALLOC\_USAGE\_EXTERNAL\_DISP)\ !=\ 0)\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}video"{}};}
\DoxyCodeLine{00402\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((usage\ \&\ GRALLOC\_USAGE\_HW\_RENDER)\ !=\ 0\ ||}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ (usage\ \&\ GRALLOC\_USAGE\_HW\_TEXTURE)\ !=\ 0)\ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}gl"{}};}
\DoxyCodeLine{00405\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((usage\ \&\ GRALLOC\_USAGE\_HW\_CAMERA\_READ)\ !=\ 0)\ \{}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}camera"{}};}
\DoxyCodeLine{00407\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((usage\ \&\ GRALLOC\_USAGE\_SW\_READ\_MASK)\ !=\ 0\ ||}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ (usage\ \&\ GRALLOC\_USAGE\_SW\_WRITE\_MASK)\ !=\ 0)\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}cpu"{}};}
\DoxyCodeLine{00410\ \ \ \ \ \}}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}graphics"{}};}
\DoxyCodeLine{00412\ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \_\_END\_DECLS}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ ANDROID\_GRALLOC\_INTERFACE\_H}}

\end{DoxyCode}
