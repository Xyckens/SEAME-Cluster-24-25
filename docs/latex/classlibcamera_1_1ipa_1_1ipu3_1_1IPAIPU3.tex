\doxysection{libcamera\+::ipa\+::ipu3\+::IPAIPU3 Class Reference}
\hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3}{}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3}\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}


The IPU3 IPA implementation.  


Inheritance diagram for libcamera\+::ipa\+::ipu3\+::IPAIPU3\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.282443cm]{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_ad8a1e0258a32c0c98feb4d8e6e9e9b3f}{init}} (const IPASettings \&settings, const IPACamera\+Sensor\+Info \&sensor\+Info, const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \&sensor\+Controls, \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \texorpdfstring{$\ast$}{*}ipa\+Controls) override
\begin{DoxyCompactList}\small\item\em Initialize the IPA module and its controls. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a823bb09efe22da059faba5272bb40265}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a823bb09efe22da059faba5272bb40265} 
int {\bfseries start} () override
\begin{DoxyCompactList}\small\item\em Perform any processing required before the first frame. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aa7356d22982ea9014b227daa6d8b9e09}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aa7356d22982ea9014b227daa6d8b9e09} 
void {\bfseries stop} () override
\begin{DoxyCompactList}\small\item\em Ensure that all processing has completed. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a9206f03f723d4eaedc61de71d44b311b}{configure}} (const IPAConfig\+Info \&config\+Info, \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \texorpdfstring{$\ast$}{*}ipa\+Controls) override
\begin{DoxyCompactList}\small\item\em Configure the IPU3 IPA. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a3b9f197dc13f318948d281cf748516c2}{map\+Buffers}} (const std\+::vector$<$ IPABuffer $>$ \&buffers) override
\begin{DoxyCompactList}\small\item\em Map the parameters and stats buffers allocated in the pipeline handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_abff233cece46b9bc1e29d43b41a95772}{unmap\+Buffers}} (const std\+::vector$<$ unsigned int $>$ \&ids) override
\begin{DoxyCompactList}\small\item\em Unmap the parameters and stats buffers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a1fc0c8bfda49cc125ef94e4476bd77ba}{queue\+Request}} (const uint32\+\_\+t frame, const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \&controls) override
\begin{DoxyCompactList}\small\item\em Queue a request and process the control list from the application. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aba550913c07929582a9b6d367064ac5c}{compute\+Params}} (const uint32\+\_\+t frame, const uint32\+\_\+t buffer\+Id) override
\begin{DoxyCompactList}\small\item\em Fill and return a buffer with ISP processing parameters for a frame. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a501e3d74a9ddfc6fa0fb8a42dd85d5b4}{process\+Stats}} (const uint32\+\_\+t frame, const int64\+\_\+t frame\+Timestamp, const uint32\+\_\+t buffer\+Id, const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \&sensor\+Controls) override
\begin{DoxyCompactList}\small\item\em \doxylink{classlibcamera_1_1Process}{Process} the statistics generated by the ImgU. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module}{libcamera\+::ipa\+::\+Module$<$ \+\_\+\+Context, \+\_\+\+Frame\+Context, \+\_\+\+Config, \+\_\+\+Params, \+\_\+\+Stats $>$}}}
\begin{DoxyCompactItemize}
\item 
const std\+::list$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Algorithm}{Algorithm}}$<$ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module}{Module}} $>$ $>$ $>$ \& \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module_a99862ac2546d99418f1ac826af38c32a}{algorithms}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the list of instantiated algorithms. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module_acbc951fcbe0b8e25594abba03aa0f7d0}{create\+Algorithms}} (\mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module_a2a12d05faa4f517f4dfcfa087063fd27}{Context}} \&context, const \mbox{\hyperlink{classlibcamera_1_1YamlObject}{Yaml\+Object}} \&\mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module_a99862ac2546d99418f1ac826af38c32a}{algorithms}})
\begin{DoxyCompactList}\small\item\em Create algorithms from YAML configuration data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a7a4d547cc8ab9165e8149e62c3654f4f}{log\+Prefix}} () const override
\begin{DoxyCompactList}\small\item\em Retrieve a string to be prefixed to the log message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Loggable}{libcamera\+::\+Loggable}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1LogMessage}{Log\+Message}} \mbox{\hyperlink{classlibcamera_1_1Loggable_a56b00f844b75b5d08cad898ed9c6181e}{\+\_\+log}} (const \mbox{\hyperlink{classlibcamera_1_1LogCategory}{Log\+Category}} \texorpdfstring{$\ast$}{*}category, \mbox{\hyperlink{namespacelibcamera_a68f26f5a54a5bb105f2e7422215a0ca3}{Log\+Severity}} severity, const char \texorpdfstring{$\ast$}{*}file\+Name=\+\_\+\+\_\+builtin\+\_\+\+FILE(), unsigned int line=\+\_\+\+\_\+builtin\+\_\+\+LINE()) const
\begin{DoxyCompactList}\small\item\em Create a temporary \doxylink{classlibcamera_1_1LogMessage}{Log\+Message} object to log a message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module}{libcamera\+::ipa\+::\+Module$<$ \+\_\+\+Context, \+\_\+\+Frame\+Context, \+\_\+\+Config, \+\_\+\+Params, \+\_\+\+Stats $>$}}}
\begin{DoxyCompactItemize}
\item 
using {\bfseries Context} = \+\_\+\+Context
\begin{DoxyCompactList}\small\item\em The type of the shared IPA context. \end{DoxyCompactList}\item 
using {\bfseries Frame\+Context} = \+\_\+\+Frame\+Context
\begin{DoxyCompactList}\small\item\em The type of the frame context. \end{DoxyCompactList}\item 
using {\bfseries Config} = \+\_\+\+Config
\begin{DoxyCompactList}\small\item\em The type of the IPA configuration data. \end{DoxyCompactList}\item 
using {\bfseries Params} = \+\_\+\+Params
\begin{DoxyCompactList}\small\item\em The type of the ISP specific parameters. \end{DoxyCompactList}\item 
using {\bfseries Stats} = \+\_\+\+Stats
\begin{DoxyCompactList}\small\item\em The type of the IPA statistics and ISP results. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module}{libcamera\+::ipa\+::\+Module$<$ \+\_\+\+Context, \+\_\+\+Frame\+Context, \+\_\+\+Config, \+\_\+\+Params, \+\_\+\+Stats $>$}}}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module_a62af12d353cea10272b2feb34671ef18}{register\+Algorithm}} (\mbox{\hyperlink{classlibcamera_1_1ipa_1_1AlgorithmFactoryBase}{Algorithm\+Factory\+Base}}$<$ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1Module}{Module}} $>$ \texorpdfstring{$\ast$}{*}factory)
\begin{DoxyCompactList}\small\item\em Add an algorithm factory class to the list of available algorithms. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The IPU3 IPA implementation. 

The IPU3 Pipeline defines an IPU3-\/specific interface for communication between the \doxylink{classlibcamera_1_1PipelineHandler}{Pipeline\+Handler} and the IPA module.

We extend the IPAIPU3\+Interface to implement our algorithms and handle calls from the IPU3 \doxylink{classlibcamera_1_1PipelineHandler}{Pipeline\+Handler} to satisfy requests from the application.

At initialisation time, a \doxylink{classlibcamera_1_1ipa_1_1CameraSensorHelper}{Camera\+Sensor\+Helper} is instantiated to support camera-\/specific calculations, while the default controls are computed, and the algorithms are instantiated from the tuning data file.

The IPU3 ImgU operates with a grid layout to divide the overall frame into rectangular cells of pixels. When the IPA is configured, we determine the best grid for the statistics based on the pipeline handler Bayer Down Scaler output size.

Two main events are then handled to operate the IPU3 ImgU by populating its parameter buffer, and adapting the settings of the sensor attached to the IPU3 CIO2 through sensor-\/specific V4\+L2 controls.

In \doxylink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aba550913c07929582a9b6d367064ac5c}{compute\+Params()}, we populate the ImgU parameter buffer with settings to configure the device in preparation for handling the frame queued in the \doxylink{classlibcamera_1_1Request}{Request}.

When the frame has completed processing, the ImgU will generate a statistics buffer which is given to the IPA with \doxylink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a501e3d74a9ddfc6fa0fb8a42dd85d5b4}{process\+Stats()}. In this we run the algorithms to parse the statistics and cache any results for the next \doxylink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aba550913c07929582a9b6d367064ac5c}{compute\+Params()} call.

The individual algorithms are split into modular components that are called iteratively to allow them to process statistics from the ImgU in the order defined in the tuning data file.

The current implementation supports five core algorithms\+:


\begin{DoxyItemize}
\item Auto focus (AF)
\item Automatic gain and exposure control (AGC)
\item Automatic white balance (AWB)
\item Black level correction (BLC)
\item Tone mapping (Gamma)
\end{DoxyItemize}

AWB is implemented using a Greyworld algorithm, and calculates the red and blue gains to apply to generate a neutral grey frame overall.

AGC is handled by calculating a histogram of the green channel to estimate an analogue gain and exposure time which will provide a well exposed frame. A low-\/pass IIR filter is used to smooth the changes to the sensor to reduce perceivable steps.

The tone mapping algorithm provides a gamma correction table to improve the contrast of the scene.

The black level compensation algorithm subtracts a hardcoded black level from all pixels.

The IPU3 ImgU has further processing blocks to support image quality improvements through bayer and temporal noise reductions, however those are not supported in the current implementation, and will use default settings as provided by the kernel driver.

Demosaicing is operating with the default parameters and could be further optimised to provide improved sharpening coefficients, checker artifact removal, and false color correction.

Additional image enhancements can be made by providing lens and sensor-\/specific tuning to adapt for Black Level compensation (BLC), Lens shading correction (SHD) and \doxylink{classColor}{Color} correction (CCM). 

\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aba550913c07929582a9b6d367064ac5c}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_aba550913c07929582a9b6d367064ac5c} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!computeParams@{computeParams}}
\index{computeParams@{computeParams}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{computeParams()}{computeParams()}}
{\footnotesize\ttfamily void libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::compute\+Params (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{frame,  }\item[{const uint32\+\_\+t}]{buffer\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Fill and return a buffer with ISP processing parameters for a frame. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em frame} & The frame number \\
\hline
\mbox{\texttt{ in}}  & {\em buffer\+Id} & ID of the parameter buffer to fill\\
\hline
\end{DoxyParams}
Algorithms are expected to fill the IPU3 parameter buffer for the next frame given their most recent processing of the ImgU statistics. \Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a9206f03f723d4eaedc61de71d44b311b}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a9206f03f723d4eaedc61de71d44b311b} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!configure@{configure}}
\index{configure@{configure}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{configure()}{configure()}}
{\footnotesize\ttfamily int libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::configure (\begin{DoxyParamCaption}\item[{const IPAConfig\+Info \&}]{config\+Info,  }\item[{\mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \texorpdfstring{$\ast$}{*}}]{ipa\+Controls }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Configure the IPU3 IPA. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em config\+Info} & The IPA configuration data, received from the pipeline handler \\
\hline
\mbox{\texttt{ in}}  & {\em ipa\+Controls} & The IPA controls to update\\
\hline
\end{DoxyParams}
Calculate the best grid for the statistics based on the pipeline handler BDS output, and parse the minimum and maximum exposure and analogue gain control values.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000005}{Todo}}]Document what the BDS is, ideally in a block diagram of the ImgU.\end{DoxyRefDesc}


All algorithm modules are called to allow them to prepare the {\itshape \doxylink{structlibcamera_1_1ipa_1_1ipu3_1_1IPASessionConfiguration}{IPASession\+Configuration}} structure for the {\itshape \doxylink{structlibcamera_1_1ipa_1_1ipu3_1_1IPAContext}{IPAContext}}. \Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_ad8a1e0258a32c0c98feb4d8e6e9e9b3f}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_ad8a1e0258a32c0c98feb4d8e6e9e9b3f} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!init@{init}}
\index{init@{init}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily int libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::init (\begin{DoxyParamCaption}\item[{const IPASettings \&}]{settings,  }\item[{const IPACamera\+Sensor\+Info \&}]{sensor\+Info,  }\item[{const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \&}]{sensor\+Controls,  }\item[{\mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \texorpdfstring{$\ast$}{*}}]{ipa\+Controls }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Initialize the IPA module and its controls. 

This function receives the camera sensor information from the pipeline handler, computes the limits of the controls it handles and returns them in the {\itshape ipa\+Controls} output parameter. \Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a7a4d547cc8ab9165e8149e62c3654f4f}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a7a4d547cc8ab9165e8149e62c3654f4f} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!logPrefix@{logPrefix}}
\index{logPrefix@{logPrefix}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{logPrefix()}{logPrefix()}}
{\footnotesize\ttfamily std\+::string libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::log\+Prefix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Retrieve a string to be prefixed to the log message. 

This function allows classes inheriting from the \doxylink{classlibcamera_1_1Loggable}{Loggable} class to extend the logger with an object-\/specific prefix output right before the log message contents.

\begin{DoxyReturn}{Returns}
A string to be prefixed to the log message 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlibcamera_1_1Loggable_a4cc48b0ae7215ceb4bfae6f192b2b3ee}{libcamera\+::\+Loggable}}.

\Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a3b9f197dc13f318948d281cf748516c2}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a3b9f197dc13f318948d281cf748516c2} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!mapBuffers@{mapBuffers}}
\index{mapBuffers@{mapBuffers}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{mapBuffers()}{mapBuffers()}}
{\footnotesize\ttfamily void libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::map\+Buffers (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ IPABuffer $>$ \&}]{buffers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Map the parameters and stats buffers allocated in the pipeline handler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buffers} & The buffers to map \\
\hline
\end{DoxyParams}
\Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a501e3d74a9ddfc6fa0fb8a42dd85d5b4}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a501e3d74a9ddfc6fa0fb8a42dd85d5b4} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!processStats@{processStats}}
\index{processStats@{processStats}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{processStats()}{processStats()}}
{\footnotesize\ttfamily void libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::process\+Stats (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{frame,  }\item[{const int64\+\_\+t}]{frame\+Timestamp,  }\item[{const uint32\+\_\+t}]{buffer\+Id,  }\item[{const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \&}]{sensor\+Controls }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



\doxylink{classlibcamera_1_1Process}{Process} the statistics generated by the ImgU. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em frame} & The frame number \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+Timestamp} & Timestamp of the frame \\
\hline
\mbox{\texttt{ in}}  & {\em buffer\+Id} & ID of the statistics buffer \\
\hline
\mbox{\texttt{ in}}  & {\em sensor\+Controls} & Sensor controls\\
\hline
\end{DoxyParams}
Parse the most recently processed image statistics from the ImgU. The statistics are passed to each algorithm module to run their calculations and update their state accordingly. \Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a1fc0c8bfda49cc125ef94e4476bd77ba}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a1fc0c8bfda49cc125ef94e4476bd77ba} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!queueRequest@{queueRequest}}
\index{queueRequest@{queueRequest}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{queueRequest()}{queueRequest()}}
{\footnotesize\ttfamily void libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::queue\+Request (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{frame,  }\item[{const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \&}]{controls }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Queue a request and process the control list from the application. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em frame} & The number of the frame which will be processed next \\
\hline
\mbox{\texttt{ in}}  & {\em controls} & The controls for the {\itshape frame} \\
\hline
\end{DoxyParams}
Parse the request to handle any IPA-\/managed controls that were set from the application such as manual sensor settings. \Hypertarget{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_abff233cece46b9bc1e29d43b41a95772}\label{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_abff233cece46b9bc1e29d43b41a95772} 
\index{libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}!unmapBuffers@{unmapBuffers}}
\index{unmapBuffers@{unmapBuffers}!libcamera::ipa::ipu3::IPAIPU3@{libcamera::ipa::ipu3::IPAIPU3}}
\doxysubsubsection{\texorpdfstring{unmapBuffers()}{unmapBuffers()}}
{\footnotesize\ttfamily void libcamera\+::ipa\+::ipu3\+::\+IPAIPU3\+::unmap\+Buffers (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ unsigned int $>$ \&}]{ids }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Unmap the parameters and stats buffers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ids} & The IDs of the buffers to unmap \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/src/ipa/ipu3/ipu3.\+cpp\end{DoxyCompactItemize}
