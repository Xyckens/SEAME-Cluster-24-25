\doxysection{media\+\_\+device.\+h}
\hypertarget{media__device_8h_source}{}\label{media__device_8h_source}\index{src/peripherals/camera/libcamera/include/libcamera/internal/media\_device.h@{src/peripherals/camera/libcamera/include/libcamera/internal/media\_device.h}}
\mbox{\hyperlink{media__device_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ SPDX-\/License-\/Identifier:\ LGPL-\/2.1-\/or-\/later\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2018,\ Google\ Inc.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ Media\ device\ handler}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <linux/media.h>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{libcamera_2base_2log_8h}{libcamera/base/log.h}}>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{signal_8h}{libcamera/base/signal.h}}>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{unique__fd_8h}{libcamera/base/unique\_fd.h}}>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{media__object_8h}{libcamera/internal/media\_object.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelibcamera}{libcamera}}\ \{}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1MediaDevice}{MediaDevice}}\ :\ \textcolor{keyword}{protected}\ \mbox{\hyperlink{classlibcamera_1_1Loggable}{Loggable}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{MediaDevice}}(\textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classlibcamera_1_1MediaDevice_a91e03b4de6c518698f45dcdd3475413b}{deviceNode}});}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{\string~MediaDevice}}();}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a02fd5f5a3d81330a87f1ee53511866ef}{acquire}}();}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a511ae507d3fffc097e938a7f55eb801c}{release}}();}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_ae3b1d5fc997c44051ebc92cf5b6906ca}{busy}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ acquired\_;\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_aafab9ceead67be818337139645d3d9f9}{lock}}();}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_afa3b83f5f3fe2af9b4a8b5d518518386}{unlock}}();}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a8fe692b0d3675cff3e162305db246c25}{populate}}();}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a73dc250ada9bdcb33e94be03faf96ebc}{isValid}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ valid\_;\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classlibcamera_1_1MediaDevice_a6543509be9b4f6dbfa4dcca402bff115}{driver}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ driver\_;\ \}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classlibcamera_1_1MediaDevice_a91e03b4de6c518698f45dcdd3475413b}{deviceNode}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ deviceNode\_;\ \}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classlibcamera_1_1MediaDevice_a73f32f10c2087b482e44e0acd93b29e8}{model}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ model\_;\ \}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_afd096dd0104ddc8737f56cf23e28d8d6}{version}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ version\_;\ \}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_aef5e696a1e7f318ea20daf557f77e6d7}{hwRevision}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ hwRevision\_;\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<MediaEntity\ *>\ \&\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ac2cbe6c1a8721e7a26ec3cf81d1fca93}{entities}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ entities\_;\ \}}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{MediaEntity}}\ *\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ad5d9279329ef4987ceece2694b33e230}{getEntityByName}}(\textcolor{keyword}{const}\ std::string\ \&name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaLink}{MediaLink}}\ *\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ab8a926b86f0ae67f56544b10e72cb83f}{link}}(\textcolor{keyword}{const}\ std::string\ \&sourceName,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sourceIdx,}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&sinkName,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sinkIdx);}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaLink}{MediaLink}}\ *\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ab8a926b86f0ae67f56544b10e72cb83f}{link}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{MediaEntity}}\ *source,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sourceIdx,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{MediaEntity}}\ *sink,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sinkIdx);}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaLink}{MediaLink}}\ *\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ab8a926b86f0ae67f56544b10e72cb83f}{link}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaPad}{MediaPad}}\ *source,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaPad}{MediaPad}}\ *sink);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a182bb41cfc7fcfa080327f8ff26070f0}{disableLinks}}();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1Signal}{Signal<>}}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a5d1572fad6ad84bc88274d80cc86c80f}{disconnected}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00059\ \ \ \ \ std::string\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice_a15b5bc0dc607109830666d53dfe019e5}{logPrefix}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{int}\ open();}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ close();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1MediaObject}{MediaObject}}\ *object(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{bool}\ addObject(\mbox{\hyperlink{classlibcamera_1_1MediaObject}{MediaObject}}\ *\textcolor{keywordtype}{object});}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmedia__v2__interface}{media\_v2\_interface}}\ *findInterface(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structmedia__v2__topology}{media\_v2\_topology}}\ \&topology,}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ entityId);}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{bool}\ populateEntities(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structmedia__v2__topology}{media\_v2\_topology}}\ \&topology);}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{bool}\ populatePads(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structmedia__v2__topology}{media\_v2\_topology}}\ \&topology);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{bool}\ populateLinks(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structmedia__v2__topology}{media\_v2\_topology}}\ \&topology);}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ fixupEntityFlags(\textcolor{keyword}{struct}\ \mbox{\hyperlink{structmedia__v2__entity}{media\_v2\_entity}}\ *entity);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1MediaLink_a38a5261280fc55d055a9965bca3f7ba6}{MediaLink::setEnabled}}(\textcolor{keywordtype}{bool}\ enable);}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{int}\ setupLink(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaLink}{MediaLink}}\ *\mbox{\hyperlink{classlibcamera_1_1MediaDevice_ab8a926b86f0ae67f56544b10e72cb83f}{link}},\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ flags);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ std::string\ driver\_;}
\DoxyCodeLine{00080\ \ \ \ \ std::string\ deviceNode\_;}
\DoxyCodeLine{00081\ \ \ \ \ std::string\ model\_;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ version\_;}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ hwRevision\_;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1UniqueFD}{UniqueFD}}\ fd\_;}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{bool}\ valid\_;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{bool}\ acquired\_;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ std::map<unsigned\ int,\ MediaObject\ *>\ objects\_;}
\DoxyCodeLine{00090\ \ \ \ \ std::vector<MediaEntity\ *>\ entities\_;}
\DoxyCodeLine{00091\ \};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \}\ \textcolor{comment}{/*\ namespace\ libcamera\ */}}

\end{DoxyCode}
