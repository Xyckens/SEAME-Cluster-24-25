\doxysection{libcamera\+::CIO2\+Device Class Reference}
\hypertarget{classlibcamera_1_1CIO2Device}{}\label{classlibcamera_1_1CIO2Device}\index{libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} $>$ \mbox{\hyperlink{classlibcamera_1_1CIO2Device_a04c0f152a44421bfbee0eb6ec967d7ff}{formats}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the list of supported Pixel\+Formats. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{classlibcamera_1_1SizeRange}{Size\+Range}} $>$ \mbox{\hyperlink{classlibcamera_1_1CIO2Device_a948528d90f462937ed757f9cf5e1b302}{sizes}} (const \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} \&format) const
\begin{DoxyCompactList}\small\item\em Retrieve the list of supported size ranges. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1CIO2Device_ac6c1da4519af651e15e1dbabe47b17ab}{init}} (const \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{Media\+Device}} \texorpdfstring{$\ast$}{*}media, unsigned int index)
\begin{DoxyCompactList}\small\item\em Initialize components of the CIO2 device with {\itshape index}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1CIO2Device_abf7aebaf01b7495765aa13978de9f625}{configure}} (const \mbox{\hyperlink{classlibcamera_1_1Size}{Size}} \&size, const \mbox{\hyperlink{namespacelibcamera_a371b6d17d531b85c035c4e889b116571}{Transform}} \&transform, \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}output\+Format)
\begin{DoxyCompactList}\small\item\em Configure the CIO2 unit. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a6b393a4c073dda449dd1bd709094adfe}\label{classlibcamera_1_1CIO2Device_a6b393a4c073dda449dd1bd709094adfe} 
\mbox{\hyperlink{structlibcamera_1_1StreamConfiguration}{Stream\+Configuration}} {\bfseries generate\+Configuration} (\mbox{\hyperlink{classlibcamera_1_1Size}{Size}} size) const
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a121672c532330c82258365c348945d0d}\label{classlibcamera_1_1CIO2Device_a121672c532330c82258365c348945d0d} 
int {\bfseries export\+Buffers} (unsigned int count, std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} $>$ $>$ \texorpdfstring{$\ast$}{*}buffers)
\item 
\mbox{\hyperlink{structlibcamera_1_1V4L2SubdeviceFormat}{V4\+L2\+Subdevice\+Format}} \mbox{\hyperlink{classlibcamera_1_1CIO2Device_a58eb3d29efff049c97d0efa3156e9efb}{get\+Sensor\+Format}} (const std\+::vector$<$ unsigned int $>$ \&mbus\+Codes, const \mbox{\hyperlink{classlibcamera_1_1Size}{Size}} \&size) const
\begin{DoxyCompactList}\small\item\em Retrieve the best sensor format for a desired output. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a8680eaa88f2a8c0ab79954cd30a3758f}\label{classlibcamera_1_1CIO2Device_a8680eaa88f2a8c0ab79954cd30a3758f} 
int {\bfseries start} ()
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a2eeb9e699b2050b523e43dc711b197c9}\label{classlibcamera_1_1CIO2Device_a2eeb9e699b2050b523e43dc711b197c9} 
int {\bfseries stop} ()
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a9aed0d070103e74f5d4b9293b0ceae07}\label{classlibcamera_1_1CIO2Device_a9aed0d070103e74f5d4b9293b0ceae07} 
\mbox{\hyperlink{classlibcamera_1_1CameraSensor}{Camera\+Sensor}} \texorpdfstring{$\ast$}{*} {\bfseries sensor} ()
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_ac809065455db43b82ed2864af64f37e6}\label{classlibcamera_1_1CIO2Device_ac809065455db43b82ed2864af64f37e6} 
const \mbox{\hyperlink{classlibcamera_1_1CameraSensor}{Camera\+Sensor}} \texorpdfstring{$\ast$}{*} {\bfseries sensor} () const
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_ae62477b92308558668d661d2b60e15ca}\label{classlibcamera_1_1CIO2Device_ae62477b92308558668d661d2b60e15ca} 
\mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*} {\bfseries queue\+Buffer} (\mbox{\hyperlink{classlibcamera_1_1Request}{Request}} \texorpdfstring{$\ast$}{*}request, \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*}raw\+Buffer)
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a4994feadbcc654f4a3e30b74c03525b5}\label{classlibcamera_1_1CIO2Device_a4994feadbcc654f4a3e30b74c03525b5} 
void {\bfseries try\+Return\+Buffer} (\mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*}buffer)
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a2fd1bd7825f0db40be5ae3f9c77a1d75}\label{classlibcamera_1_1CIO2Device_a2fd1bd7825f0db40be5ae3f9c77a1d75} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*} $>$ \& {\bfseries buffer\+Ready} ()
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a5806608e2f659a005b6080df148b79b0}\label{classlibcamera_1_1CIO2Device_a5806608e2f659a005b6080df148b79b0} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ uint32\+\_\+t $>$ \& {\bfseries frame\+Start} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_a4b34f2f0d052a2daff8343085870389c}\label{classlibcamera_1_1CIO2Device_a4b34f2f0d052a2daff8343085870389c} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}} {\bfseries buffer\+Available}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1CIO2Device_acdf875b483fd80ea23cb7e1c7280233d}\label{classlibcamera_1_1CIO2Device_acdf875b483fd80ea23cb7e1c7280233d} 
static constexpr unsigned int {\bfseries k\+Buffer\+Count} = 4
\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1CIO2Device_abf7aebaf01b7495765aa13978de9f625}\label{classlibcamera_1_1CIO2Device_abf7aebaf01b7495765aa13978de9f625} 
\index{libcamera::CIO2Device@{libcamera::CIO2Device}!configure@{configure}}
\index{configure@{configure}!libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection{\texorpdfstring{configure()}{configure()}}
{\footnotesize\ttfamily int libcamera\+::\+CIO2\+Device\+::configure (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1Size}{Size}} \&}]{size,  }\item[{const \mbox{\hyperlink{namespacelibcamera_a371b6d17d531b85c035c4e889b116571}{Transform}} \&}]{transform,  }\item[{\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}}]{output\+Format }\end{DoxyParamCaption})}



Configure the CIO2 unit. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em size} & The requested CIO2 output frame size \\
\hline
\mbox{\texttt{ in}}  & {\em transform} & The transformation to be applied on the image sensor \\
\hline
\mbox{\texttt{ out}}  & {\em output\+Format} & The CIO2 unit output image format \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1CIO2Device_a04c0f152a44421bfbee0eb6ec967d7ff}\label{classlibcamera_1_1CIO2Device_a04c0f152a44421bfbee0eb6ec967d7ff} 
\index{libcamera::CIO2Device@{libcamera::CIO2Device}!formats@{formats}}
\index{formats@{formats}!libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection{\texorpdfstring{formats()}{formats()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} $>$ libcamera\+::\+CIO2\+Device\+::formats (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the list of supported Pixel\+Formats. 

Retrieve the list of supported pixel formats by matching the sensor produced media bus codes with the formats supported by the CIO2 unit.

\begin{DoxyReturn}{Returns}
The list of supported \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format} 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1CIO2Device_a58eb3d29efff049c97d0efa3156e9efb}\label{classlibcamera_1_1CIO2Device_a58eb3d29efff049c97d0efa3156e9efb} 
\index{libcamera::CIO2Device@{libcamera::CIO2Device}!getSensorFormat@{getSensorFormat}}
\index{getSensorFormat@{getSensorFormat}!libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection{\texorpdfstring{getSensorFormat()}{getSensorFormat()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structlibcamera_1_1V4L2SubdeviceFormat}{V4\+L2\+Subdevice\+Format}} libcamera\+::\+CIO2\+Device\+::get\+Sensor\+Format (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ unsigned int $>$ \&}]{mbus\+Codes,  }\item[{const \mbox{\hyperlink{classlibcamera_1_1Size}{Size}} \&}]{size }\end{DoxyParamCaption}) const}



Retrieve the best sensor format for a desired output. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mbus\+Codes} & The list of acceptable media bus codes \\
\hline
\mbox{\texttt{ in}}  & {\em size} & The desired size\\
\hline
\end{DoxyParams}
Media bus codes are selected from {\itshape mbus\+Codes}, which lists all acceptable codes in decreasing order of preference. Media bus codes supported by the sensor but not listed in {\itshape mbus\+Codes} are ignored. If none of the desired codes is supported, it returns an error.

{\itshape size} indicates the desired size at the output of the sensor. This method selects the best media bus code and size supported by the sensor according to the following criteria.


\begin{DoxyItemize}
\item The desired {\itshape size} shall fit in the sensor output size to avoid the need to up-\/scale.
\item The aspect ratio of sensor output size shall be as close as possible to the sensor\textquotesingle{}s native resolution field of view.
\item The sensor output size shall be as small as possible to lower the required bandwidth.
\item The desired {\itshape size} shall be supported by one of the media bus code listed in {\itshape mbus\+Codes}.
\end{DoxyItemize}

When multiple media bus codes can produce the same size, the code at the lowest position in {\itshape mbus\+Codes} is selected.

The returned sensor output format is guaranteed to be acceptable by the set\+Format() method without any modification.

\begin{DoxyReturn}{Returns}
The best sensor output format matching the desired media bus codes and size on success, or an empty format otherwise. 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1CIO2Device_ac6c1da4519af651e15e1dbabe47b17ab}\label{classlibcamera_1_1CIO2Device_ac6c1da4519af651e15e1dbabe47b17ab} 
\index{libcamera::CIO2Device@{libcamera::CIO2Device}!init@{init}}
\index{init@{init}!libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily int libcamera\+::\+CIO2\+Device\+::init (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{Media\+Device}} \texorpdfstring{$\ast$}{*}}]{media,  }\item[{unsigned int}]{index }\end{DoxyParamCaption})}



Initialize components of the CIO2 device with {\itshape index}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em media} & The CIO2 media device \\
\hline
\mbox{\texttt{ in}}  & {\em index} & The CIO2 device index\\
\hline
\end{DoxyParams}
Create and open the video device and subdevices in the CIO2 instance at {\itshape index}, if a supported image sensor is connected to the CSI-\/2 receiver of this CIO2 instance. Enable the media links connecting the CIO2 components to prepare for capture operations and cached the sensor maximum size.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & No supported image sensor is connected to this CIO2 instance \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1CIO2Device_a948528d90f462937ed757f9cf5e1b302}\label{classlibcamera_1_1CIO2Device_a948528d90f462937ed757f9cf5e1b302} 
\index{libcamera::CIO2Device@{libcamera::CIO2Device}!sizes@{sizes}}
\index{sizes@{sizes}!libcamera::CIO2Device@{libcamera::CIO2Device}}
\doxysubsubsection{\texorpdfstring{sizes()}{sizes()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{classlibcamera_1_1SizeRange}{Size\+Range}} $>$ libcamera\+::\+CIO2\+Device\+::sizes (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} \&}]{format }\end{DoxyParamCaption}) const}



Retrieve the list of supported size ranges. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em format} & The pixel format\\
\hline
\end{DoxyParams}
Retrieve the list of supported sizes for a particular {\itshape format} by matching the sensor produced media bus codes formats supported by the CIO2 unit.

\begin{DoxyReturn}{Returns}
A list of supported sizes for the {\itshape format} or an empty list otherwise 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/src/libcamera/pipeline/ipu3/cio2.\+h\item 
src/peripherals/camera/libcamera/src/libcamera/pipeline/ipu3/cio2.\+cpp\end{DoxyCompactItemize}
