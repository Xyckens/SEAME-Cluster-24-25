\doxysection{libcamera\+::V4\+L2\+Video\+Device Class Reference}
\hypertarget{classlibcamera_1_1V4L2VideoDevice}{}\label{classlibcamera_1_1V4L2VideoDevice}\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}


\doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} object and API.  


Inheritance diagram for libcamera\+::V4\+L2\+Video\+Device\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classlibcamera_1_1V4L2VideoDevice}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b}\label{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b} 
using {\bfseries Formats} = std\+::map$<$ \mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format}}, std\+::vector$<$ \mbox{\hyperlink{classlibcamera_1_1SizeRange}{Size\+Range}} $>$ $>$
\begin{DoxyCompactList}\small\item\em A map of supported V4\+L2 pixel formats to frame sizes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a612aca15d344aa5c59f9f90d4cb09e57}{V4\+L2\+Video\+Device}} (const std\+::string \&\mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{device\+Node}})
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a78fd4cc6f5d062c2392715ae72519377}{V4\+L2\+Video\+Device}} (const \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{Media\+Entity}} \texorpdfstring{$\ast$}{*}entity)
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} from a \doxylink{classlibcamera_1_1MediaEntity}{Media\+Entity}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open}} ()
\begin{DoxyCompactList}\small\item\em Open the V4\+L2 video device node and query its capabilities. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a16bd7ee30d2be5f058539a781de4fbc7}{open}} (\mbox{\hyperlink{classlibcamera_1_1SharedFD}{Shared\+FD}} handle, enum v4l2\+\_\+buf\+\_\+type type)
\begin{DoxyCompactList}\small\item\em Open a V4\+L2 video device from an opened file handle and query its capabilities. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a9dc5c057e420ab545411eceb2266e6e9}\label{classlibcamera_1_1V4L2VideoDevice_a9dc5c057e420ab545411eceb2266e6e9} 
void {\bfseries close} ()
\begin{DoxyCompactList}\small\item\em Close the video device, releasing any resources acquired by \doxylink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open()} \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a096f39279b8519b85915bce53e1ec1d6}{driver\+Name}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the name of the V4\+L2 device driver. \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a1fd17456b1e3f24c38ae96879ca6a0a4}{device\+Name}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the name of the V4\+L2 video device. \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa2362f83341996e9601b2e3fadecda3b}{bus\+Name}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the location of the device in the system. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{structlibcamera_1_1V4L2Capability}{V4\+L2\+Capability}} \& \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ab68bbec27733a99c02673caf059a7ab4}{caps}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the device V4\+L2 capabilities. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a91f2c87d4f30ad23259b7c460e144f63}{get\+Format}} (\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}format)
\begin{DoxyCompactList}\small\item\em Retrieve the image format set on the V4\+L2 video device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a1e75c2defe1fc70ec05e2cea8d8db4f0}{try\+Format}} (\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}format)
\begin{DoxyCompactList}\small\item\em Try an image format on the V4\+L2 video device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}{set\+Format}} (\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}format)
\begin{DoxyCompactList}\small\item\em Configure an image format on the V4\+L2 video device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b}{Formats}} \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_adc347c736d39fc4029907b47f0ac8a8b}{formats}} (uint32\+\_\+t code=0)
\begin{DoxyCompactList}\small\item\em Enumerate all pixel formats and frame sizes. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a930659ca05a6475a2b2d1ad2961ee318}{get\+Selection}} (unsigned int target, \mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}} \texorpdfstring{$\ast$}{*}rect)
\begin{DoxyCompactList}\small\item\em Get the selection rectangle for {\itshape target}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa9eba638ac570ac4746017c6f10fafaa}{set\+Selection}} (unsigned int target, \mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}} \texorpdfstring{$\ast$}{*}rect)
\begin{DoxyCompactList}\small\item\em Set a selection rectangle {\itshape rect} for {\itshape target}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers}} (unsigned int count, std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} $>$ $>$ \texorpdfstring{$\ast$}{*}buffers)
\begin{DoxyCompactList}\small\item\em Allocate and export buffers from the video device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers}} (unsigned int count, std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} $>$ $>$ \texorpdfstring{$\ast$}{*}buffers)
\begin{DoxyCompactList}\small\item\em Export buffers from the video device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers}} (unsigned int count)
\begin{DoxyCompactList}\small\item\em Prepare the device to import {\itshape count} buffers. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}{release\+Buffers}} ()
\begin{DoxyCompactList}\small\item\em Release resources allocated by \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()} \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer}} (\mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*}buffer)
\begin{DoxyCompactList}\small\item\em Queue a buffer to the video device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a588a5dc9d6f4c54c61136ac43ff9a8cc}{stream\+On}} ()
\begin{DoxyCompactList}\small\item\em Start the video stream. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a61998710615bdf7aa25a046c8565ed66}{stream\+Off}} ()
\begin{DoxyCompactList}\small\item\em Stop the video stream. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a36e54adf91b6690c75ce65e46758fc54}{set\+Dequeue\+Timeout}} (\mbox{\hyperlink{classlibcamera_1_1utils_1_1Duration}{utils\+::\+Duration}} timeout)
\begin{DoxyCompactList}\small\item\em Set the dequeue timeout value. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format}} \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ac53da48385ab9a3798f7257a94a8ceb0}{to\+V4\+L2\+Pixel\+Format}} (const \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} \&pixel\+Format) const
\begin{DoxyCompactList}\small\item\em Convert {\itshape \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} to a \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} supported by the device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1V4L2Device}{libcamera\+::\+V4\+L2\+Device}}}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a51eaec36a14fcf77950cbeeb6a69593d}{close}} ()
\begin{DoxyCompactList}\small\item\em Close the device node. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a1a1cbbf505ca93672c6f8086c2a9e3a0}{is\+Open}} () const
\begin{DoxyCompactList}\small\item\em Check if the V4\+L2 device node is open. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \& \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a3da981578e5d7f23032bd902597c3a15}{controls}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the supported V4\+L2 controls and their information. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_aaaadfb4e56d3099f9a84fa0a7a3fec50}{get\+Controls}} (const std\+::vector$<$ uint32\+\_\+t $>$ \&ids)
\begin{DoxyCompactList}\small\item\em Read controls from the device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ab0485054b749a15cb5152cc751c81750}{set\+Controls}} (\mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \texorpdfstring{$\ast$}{*}ctrls)
\begin{DoxyCompactList}\small\item\em Write controls to the device. \end{DoxyCompactList}\item 
const struct \mbox{\hyperlink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794}{control\+Info}} (uint32\+\_\+t id) const
\begin{DoxyCompactList}\small\item\em Retrieve the \doxylink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl} information for the given control. \end{DoxyCompactList}\item 
const std\+::string \& \mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{device\+Node}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the device node path. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a8454df564fffa7ad160468709aa172ff}{device\+Path}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the device path in sysfs. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a22b82e6fa7c29f792c6458eba30fd135}{set\+Frame\+Start\+Enabled}} (bool enable)
\begin{DoxyCompactList}\small\item\em Enable or disable frame start event notification. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a52bc2f8287edb89748a1fc88c3b684ee}{update\+Control\+Info}} ()
\begin{DoxyCompactList}\small\item\em Update the information for all device controls. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device}} $>$ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa9c5f20a82893665448ca8c22f184217}{from\+Entity\+Name}} (const \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{Media\+Device}} \texorpdfstring{$\ast$}{*}media, const std\+::string \&entity)
\begin{DoxyCompactList}\small\item\em Create a new video device instance from {\itshape entity} in media device {\itshape media}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_abce3a9e7d618c826945b1a8a5c086ebe}\label{classlibcamera_1_1V4L2VideoDevice_abce3a9e7d618c826945b1a8a5c086ebe} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*} $>$ {\bfseries buffer\+Ready}
\begin{DoxyCompactList}\small\item\em A \doxylink{classlibcamera_1_1Signal}{Signal} emitted when a framebuffer completes. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a04808f0cc1ed33c6796a98fbdc8603f1}\label{classlibcamera_1_1V4L2VideoDevice_a04808f0cc1ed33c6796a98fbdc8603f1} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}} {\bfseries dequeue\+Timeout}
\begin{DoxyCompactList}\small\item\em A \doxylink{classlibcamera_1_1Signal}{Signal} emitted when the dequeue watchdog timer expires. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes inherited from \mbox{\hyperlink{classlibcamera_1_1V4L2Device}{libcamera\+::\+V4\+L2\+Device}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ uint32\+\_\+t $>$ {\bfseries frame\+Start}
\begin{DoxyCompactList}\small\item\em A \doxylink{classlibcamera_1_1Signal}{Signal} emitted when capture of a frame has started. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a26a10690790249684e707cbfd1d83d77}{log\+Prefix}} () const override
\begin{DoxyCompactList}\small\item\em Retrieve a string to be prefixed to the log message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1V4L2Device}{libcamera\+::\+V4\+L2\+Device}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2Device_af2c3423ffe8a3333ea7c82018b49844d}{V4\+L2\+Device}} (const std\+::string \&\mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{device\+Node}})
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device}. \end{DoxyCompactList}\item 
{\bfseries \texorpdfstring{$\sim$}{\string~}\+V4\+L2\+Device} ()
\begin{DoxyCompactList}\small\item\em Destroy a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}{open}} (unsigned int flags)
\begin{DoxyCompactList}\small\item\em Open a V4\+L2 device node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ab5143b4bba37aea67885c61a2b3850d2}{set\+Fd}} (\mbox{\hyperlink{classlibcamera_1_1UniqueFD}{Unique\+FD}} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82}{fd}})
\begin{DoxyCompactList}\small\item\em Set the file descriptor of a V4\+L2 device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a34c8a36a4c3d22beb3bf173f7c498d2d}{ioctl}} (unsigned long request, void \texorpdfstring{$\ast$}{*}argp)
\begin{DoxyCompactList}\small\item\em Perform an IOCTL system call on the device node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82}{fd}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the V4\+L2 device file descriptor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Loggable}{libcamera\+::\+Loggable}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1LogMessage}{Log\+Message}} \mbox{\hyperlink{classlibcamera_1_1Loggable_a56b00f844b75b5d08cad898ed9c6181e}{\+\_\+log}} (const \mbox{\hyperlink{classlibcamera_1_1LogCategory}{Log\+Category}} \texorpdfstring{$\ast$}{*}category, \mbox{\hyperlink{namespacelibcamera_a68f26f5a54a5bb105f2e7422215a0ca3}{Log\+Severity}} severity, const char \texorpdfstring{$\ast$}{*}file\+Name=\+\_\+\+\_\+builtin\+\_\+\+FILE(), unsigned int line=\+\_\+\+\_\+builtin\+\_\+\+LINE()) const
\begin{DoxyCompactList}\small\item\em Create a temporary \doxylink{classlibcamera_1_1LogMessage}{Log\+Message} object to log a message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Static Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1V4L2Device}{libcamera\+::\+V4\+L2\+Device}}}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\static std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ac6fba98c260ee82f4d82c0da6a34166e}{to\+Color\+Space}} (const T \&v4l2\+Format, \mbox{\hyperlink{classlibcamera_1_1PixelFormatInfo_a021bf0e82baec37b1523baa3322dc23c}{Pixel\+Format\+Info\+::\+Colour\+Encoding}} colour\+Encoding)
\begin{DoxyCompactList}\small\item\em Convert the color space fields in a V4\+L2 format to a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\static int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a3b2d0bf205d45b91c6945018e92f3933}{from\+Color\+Space}} (const std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ \&color\+Space, T \&v4l2\+Format)
\begin{DoxyCompactList}\small\item\em Fill in the color space fields of a V4\+L2 format from a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} object and API. 

The \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} class models an instance of a V4\+L2 video device. It is constructed with the path to a V4\+L2 video device node. The device node is only opened upon a call to \doxylink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open()} which must be checked for success.

The video device capabilities are validated when the device is opened and the device is rejected if it is not a suitable V4\+L2 capture or output video device, or if the video device does not support streaming I/O.

No API call other than \doxylink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open()}, \doxylink{classlibcamera_1_1V4L2Device_a1a1cbbf505ca93672c6f8086c2a9e3a0}{is\+Open()} and \doxylink{classlibcamera_1_1V4L2VideoDevice_a9dc5c057e420ab545411eceb2266e6e9}{close()} shall be called on an unopened device instance.

The \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} class supports the V4\+L2 MMAP and DMABUF memory types\+:


\begin{DoxyItemize}
\item The \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} function wraps buffer allocation with the V4\+L2 MMAP memory type. It requests buffers from the driver, allocating the corresponding memory, and exports them as a set of \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} objects. Upon successful return the driver\textquotesingle{}s internal buffer management is initialized in MMAP mode, and the video device is ready to accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls.

This is the most traditional V4\+L2 buffer management, and is mostly useful to support internal buffer pools in pipeline handlers, either for CPU consumption (such as statistics or parameters pools), or for internal image buffers shared between devices.
\item The \doxylink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers()} function operates similarly to \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()}, but leaves the driver\textquotesingle{}s internal buffer management uninitialized. It uses the V4\+L2 buffer orphaning support to allocate buffers with the MMAP method, export them as a set of \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} objects, and reset the driver\textquotesingle{}s internal buffer management. The video device shall be initialized with \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} before it can accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls. The exported buffers are directly usable with any V4\+L2 video device in DMABUF mode, or with other dmabuf importers.

This method is mostly useful to implement buffer allocation helpers or to allocate ancillary buffers, when a V4\+L2 video device is used in DMABUF mode but no other source of buffers is available. An example use case would be allocation of scratch buffers to be used in case of buffer underruns on a video device that is otherwise supplied with external buffers.
\item The \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()} function initializes the driver\textquotesingle{}s buffer management to import buffers in DMABUF mode. It requests buffers from the driver, but doesn\textquotesingle{}t allocate memory. Upon successful return, the video device is ready to accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls. The buffers to be imported are provided to \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()}, and may be supplied externally, or come from a previous \doxylink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers()} call.

This is the usual buffers initialization method for video devices whose buffers are exposed outside of libcamera. It is also typically used on one of the two video device that participate in buffer sharing inside pipelines, the other video device typically using \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()}.
\item The \doxylink{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}{release\+Buffers()} function resets the driver\textquotesingle{}s internal buffer management that was initialized by a previous call to \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()}. Any memory allocated by \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} is freed. Buffer exported by \doxylink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers()} are not affected by this function.
\end{DoxyItemize}

The \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} class tracks queued buffers and handles buffer events. It automatically dequeues completed buffers and emits the \doxylink{classlibcamera_1_1V4L2VideoDevice_abce3a9e7d618c826945b1a8a5c086ebe}{buffer\+Ready} signal.

Upon destruction any device left open will be closed, and any resources released.

\textbackslash{}context This class is \textbackslash{}threadbound. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a612aca15d344aa5c59f9f90d4cb09e57}\label{classlibcamera_1_1V4L2VideoDevice_a612aca15d344aa5c59f9f90d4cb09e57} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!V4L2VideoDevice@{V4L2VideoDevice}}
\index{V4L2VideoDevice@{V4L2VideoDevice}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{V4L2VideoDevice()}{V4L2VideoDevice()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::\+V4\+L2\+Video\+Device (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{device\+Node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Construct a \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em device\+Node} & The file-\/system path to the video device node \\
\hline
\end{DoxyParams}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a78fd4cc6f5d062c2392715ae72519377}\label{classlibcamera_1_1V4L2VideoDevice_a78fd4cc6f5d062c2392715ae72519377} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!V4L2VideoDevice@{V4L2VideoDevice}}
\index{V4L2VideoDevice@{V4L2VideoDevice}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{V4L2VideoDevice()}{V4L2VideoDevice()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::\+V4\+L2\+Video\+Device (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{Media\+Entity}} \texorpdfstring{$\ast$}{*}}]{entity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Construct a \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} from a \doxylink{classlibcamera_1_1MediaEntity}{Media\+Entity}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em entity} & The \doxylink{classlibcamera_1_1MediaEntity}{Media\+Entity} to build the video device from\\
\hline
\end{DoxyParams}
Construct a \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} from a \doxylink{classlibcamera_1_1MediaEntity}{Media\+Entity}\textquotesingle{}s device node path. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}\label{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!allocateBuffers@{allocateBuffers}}
\index{allocateBuffers@{allocateBuffers}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{allocateBuffers()}{allocateBuffers()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::allocate\+Buffers (\begin{DoxyParamCaption}\item[{unsigned int}]{count,  }\item[{std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} $>$ $>$ \texorpdfstring{$\ast$}{*}}]{buffers }\end{DoxyParamCaption})}



Allocate and export buffers from the video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em count} & Number of buffers to allocate \\
\hline
\mbox{\texttt{ out}}  & {\em buffers} & Vector to store allocated buffers\\
\hline
\end{DoxyParams}
This function wraps buffer allocation with the V4\+L2 MMAP memory type. It requests {\itshape count} buffers from the driver, allocating the corresponding memory, and exports them as a set of \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} objects in {\itshape buffers}. Upon successful return the driver\textquotesingle{}s internal buffer management is initialized in MMAP mode, and the video device is ready to accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls.

The number of planes and their offsets and sizes are determined by the currently active format on the device as set by \doxylink{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}{set\+Format()}. They do not map to the V4\+L2 buffer planes, but to colour planes of the pixel format. For instance, if the active format is formats\+::\+NV12, the allocated \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} instances will have two planes, for the luma and chroma components, regardless of whether the device uses V4\+L2\+\_\+\+PIX\+\_\+\+FMT\+\_\+\+NV12 or V4\+L2\+\_\+\+PIX\+\_\+\+FMT\+\_\+\+NV12M.

Buffers allocated with this function shall later be free with \doxylink{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}{release\+Buffers()}. If buffers have already been allocated with \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or imported with \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()}, this function returns -\/EBUSY.

\begin{DoxyReturn}{Returns}
The number of allocated buffers on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EBUSY} & buffers have already been allocated or imported \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_aa2362f83341996e9601b2e3fadecda3b}\label{classlibcamera_1_1V4L2VideoDevice_aa2362f83341996e9601b2e3fadecda3b} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!busName@{busName}}
\index{busName@{busName}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{busName()}{busName()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::bus\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the location of the device in the system. 

\begin{DoxyReturn}{Returns}
The string containing the device location 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_ab68bbec27733a99c02673caf059a7ab4}\label{classlibcamera_1_1V4L2VideoDevice_ab68bbec27733a99c02673caf059a7ab4} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!caps@{caps}}
\index{caps@{caps}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{caps()}{caps()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::caps (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the device V4\+L2 capabilities. 

\begin{DoxyReturn}{Returns}
The device V4\+L2 capabilities 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a1fd17456b1e3f24c38ae96879ca6a0a4}\label{classlibcamera_1_1V4L2VideoDevice_a1fd17456b1e3f24c38ae96879ca6a0a4} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!deviceName@{deviceName}}
\index{deviceName@{deviceName}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{deviceName()}{deviceName()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::device\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the name of the V4\+L2 video device. 

\begin{DoxyReturn}{Returns}
The string containing the device name 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a096f39279b8519b85915bce53e1ec1d6}\label{classlibcamera_1_1V4L2VideoDevice_a096f39279b8519b85915bce53e1ec1d6} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!driverName@{driverName}}
\index{driverName@{driverName}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{driverName()}{driverName()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Video\+Device\+::driver\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the name of the V4\+L2 device driver. 

\begin{DoxyReturn}{Returns}
The string containing the driver name 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}\label{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!exportBuffers@{exportBuffers}}
\index{exportBuffers@{exportBuffers}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{exportBuffers()}{exportBuffers()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::export\+Buffers (\begin{DoxyParamCaption}\item[{unsigned int}]{count,  }\item[{std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} $>$ $>$ \texorpdfstring{$\ast$}{*}}]{buffers }\end{DoxyParamCaption})}



Export buffers from the video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em count} & Number of buffers to allocate \\
\hline
\mbox{\texttt{ out}}  & {\em buffers} & Vector to store allocated buffers\\
\hline
\end{DoxyParams}
This function allocates {\itshape count} buffer from the video device and exports them as dmabuf objects, stored in {\itshape buffers}. Unlike \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()}, this function leaves the driver\textquotesingle{}s internal buffer management uninitialized. The video device shall be initialized with \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} before it can accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls. The exported buffers are directly usable with any V4\+L2 video device in DMABUF mode, or with other dmabuf importers.

The number of planes and their offsets and sizes are determined by the currently active format on the device as set by \doxylink{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}{set\+Format()}. They do not map to the V4\+L2 buffer planes, but to colour planes of the pixel format. For instance, if the active format is formats\+::\+NV12, the allocated \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} instances will have two planes, for the luma and chroma components, regardless of whether the device uses V4\+L2\+\_\+\+PIX\+\_\+\+FMT\+\_\+\+NV12 or V4\+L2\+\_\+\+PIX\+\_\+\+FMT\+\_\+\+NV12M.

Multiple independent sets of buffers can be allocated with multiple calls to this function. Device-\/specific limitations may apply regarding the minimum and maximum number of buffers per set, or to total amount of allocated memory. The exported dmabuf lifetime is tied to the returned {\itshape buffers}. To free a buffer, the caller shall delete the corresponding \doxylink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer} instance. No bookkeeping and automatic free is performed by the \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} class.

If buffers have already been allocated with \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or imported with \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()}, this function returns -\/EBUSY.

\begin{DoxyReturn}{Returns}
The number of allocated buffers on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EBUSY} & buffers have already been allocated or imported \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_adc347c736d39fc4029907b47f0ac8a8b}\label{classlibcamera_1_1V4L2VideoDevice_adc347c736d39fc4029907b47f0ac8a8b} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!formats@{formats}}
\index{formats@{formats}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{formats()}{formats()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b}{V4\+L2\+Video\+Device\+::\+Formats}} libcamera\+::\+V4\+L2\+Video\+Device\+::formats (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{code = {\ttfamily 0} }\end{DoxyParamCaption})}



Enumerate all pixel formats and frame sizes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em code} & Restrict formats to this media bus code.\\
\hline
\end{DoxyParams}
Enumerate all pixel formats and frame sizes supported by the video device. If the {\itshape code} argument is not zero, only formats compatible with that media bus code will be enumerated.

\begin{DoxyReturn}{Returns}
A list of the supported video device formats 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_aa9c5f20a82893665448ca8c22f184217}\label{classlibcamera_1_1V4L2VideoDevice_aa9c5f20a82893665448ca8c22f184217} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!fromEntityName@{fromEntityName}}
\index{fromEntityName@{fromEntityName}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{fromEntityName()}{fromEntityName()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device}} $>$ libcamera\+::\+V4\+L2\+Video\+Device\+::from\+Entity\+Name (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{Media\+Device}} \texorpdfstring{$\ast$}{*}}]{media,  }\item[{const std\+::string \&}]{entity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Create a new video device instance from {\itshape entity} in media device {\itshape media}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em media} & The media device where the entity is registered \\
\hline
\mbox{\texttt{ in}}  & {\em entity} & The media entity name\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A newly created \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} on success, nullptr otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a91f2c87d4f30ad23259b7c460e144f63}\label{classlibcamera_1_1V4L2VideoDevice_a91f2c87d4f30ad23259b7c460e144f63} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!getFormat@{getFormat}}
\index{getFormat@{getFormat}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{getFormat()}{getFormat()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::get\+Format (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}}]{format }\end{DoxyParamCaption})}



Retrieve the image format set on the V4\+L2 video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em format} & The image format applied on the video device \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a930659ca05a6475a2b2d1ad2961ee318}\label{classlibcamera_1_1V4L2VideoDevice_a930659ca05a6475a2b2d1ad2961ee318} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!getSelection@{getSelection}}
\index{getSelection@{getSelection}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{getSelection()}{getSelection()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::get\+Selection (\begin{DoxyParamCaption}\item[{unsigned int}]{target,  }\item[{\mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}} \texorpdfstring{$\ast$}{*}}]{rect }\end{DoxyParamCaption})}



Get the selection rectangle for {\itshape target}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em target} & The selection target defined by the V4\+L2\+\_\+\+SEL\+\_\+\+TGT\+\_\+\texorpdfstring{$\ast$}{*} flags \\
\hline
\mbox{\texttt{ out}}  & {\em rect} & The selection rectangle to retrieve\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000053}{Todo}}]Define a V4\+L2\+Selection\+Target enum for the selection target\end{DoxyRefDesc}


\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}\label{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!importBuffers@{importBuffers}}
\index{importBuffers@{importBuffers}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{importBuffers()}{importBuffers()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::import\+Buffers (\begin{DoxyParamCaption}\item[{unsigned int}]{count }\end{DoxyParamCaption})}



Prepare the device to import {\itshape count} buffers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em count} & Number of buffers to prepare to import\\
\hline
\end{DoxyParams}
This function initializes the driver\textquotesingle{}s buffer management to import buffers in DMABUF mode. It requests buffers from the driver, but doesn\textquotesingle{}t allocate memory.

Upon successful return, the video device is ready to accept \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} calls. The buffers to be imported are provided to \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()}, and may be supplied externally, or come from a previous \doxylink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers()} call.

Device initialization performed by this function shall later be cleaned up with \doxylink{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}{release\+Buffers()}. If buffers have already been allocated with \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or imported with \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()}, this function returns -\/EBUSY.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EBUSY} & buffers have already been allocated or imported \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a26a10690790249684e707cbfd1d83d77}\label{classlibcamera_1_1V4L2VideoDevice_a26a10690790249684e707cbfd1d83d77} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!logPrefix@{logPrefix}}
\index{logPrefix@{logPrefix}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{logPrefix()}{logPrefix()}}
{\footnotesize\ttfamily std\+::string libcamera\+::\+V4\+L2\+Video\+Device\+::log\+Prefix (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Retrieve a string to be prefixed to the log message. 

This function allows classes inheriting from the \doxylink{classlibcamera_1_1Loggable}{Loggable} class to extend the logger with an object-\/specific prefix output right before the log message contents.

\begin{DoxyReturn}{Returns}
A string to be prefixed to the log message 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlibcamera_1_1Loggable_a4cc48b0ae7215ceb4bfae6f192b2b3ee}{libcamera\+::\+Loggable}}.

\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}\label{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!open@{open}}
\index{open@{open}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{open()}{open()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Open the V4\+L2 video device node and query its capabilities. 

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a16bd7ee30d2be5f058539a781de4fbc7}\label{classlibcamera_1_1V4L2VideoDevice_a16bd7ee30d2be5f058539a781de4fbc7} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!open@{open}}
\index{open@{open}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{open()}{open()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::open (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1SharedFD}{Shared\+FD}}}]{handle,  }\item[{enum v4l2\+\_\+buf\+\_\+type}]{type }\end{DoxyParamCaption})}



Open a V4\+L2 video device from an opened file handle and query its capabilities. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em handle} & The file descriptor to set \\
\hline
\mbox{\texttt{ in}}  & {\em type} & The device type to operate on\\
\hline
\end{DoxyParams}
This function opens a video device from the existing file descriptor {\itshape handle}. Like \doxylink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open()}, this function queries the capabilities of the device, but handles it according to the given device {\itshape type} instead of determining its type from the capabilities. This can be used to force a given device type for memory-\/to-\/memory devices.

The file descriptor {\itshape handle} is duplicated, no reference to the original handle is kept.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}\label{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!queueBuffer@{queueBuffer}}
\index{queueBuffer@{queueBuffer}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{queueBuffer()}{queueBuffer()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::queue\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption})}



Queue a buffer to the video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buffer} & The buffer to be queued\\
\hline
\end{DoxyParams}
For capture video devices the {\itshape buffer} will be filled with data by the device. For output video devices the {\itshape buffer} shall contain valid data and will be processed by the device. Once the device has finished processing the buffer, it will be available for dequeue.

The best available V4\+L2 buffer is picked for {\itshape buffer} using the V4\+L2 buffer cache.

Note that \doxylink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queue\+Buffer()} will fail if the device is in the process of being stopped from a streaming state through \doxylink{classlibcamera_1_1V4L2VideoDevice_a61998710615bdf7aa25a046c8565ed66}{stream\+Off()}.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}\label{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!releaseBuffers@{releaseBuffers}}
\index{releaseBuffers@{releaseBuffers}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{releaseBuffers()}{releaseBuffers()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::release\+Buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Release resources allocated by \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()} 

This function resets the driver\textquotesingle{}s internal buffer management that was initialized by a previous call to \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} or \doxylink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{import\+Buffers()}. Any memory allocated by \doxylink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocate\+Buffers()} is freed. Buffer exported by \doxylink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{export\+Buffers()}, if any, are not affected. \Hypertarget{classlibcamera_1_1V4L2VideoDevice_a36e54adf91b6690c75ce65e46758fc54}\label{classlibcamera_1_1V4L2VideoDevice_a36e54adf91b6690c75ce65e46758fc54} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!setDequeueTimeout@{setDequeueTimeout}}
\index{setDequeueTimeout@{setDequeueTimeout}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{setDequeueTimeout()}{setDequeueTimeout()}}
{\footnotesize\ttfamily void libcamera\+::\+V4\+L2\+Video\+Device\+::set\+Dequeue\+Timeout (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1utils_1_1Duration}{utils\+::\+Duration}}}]{timeout }\end{DoxyParamCaption})}



Set the dequeue timeout value. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em timeout} & The timeout value to be used\\
\hline
\end{DoxyParams}
Sets a timeout value, given by {\itshape timeout}, that will be used by a watchdog timer to ensure buffer dequeue events are periodically occurring when the device is streaming. The watchdog timer is only active when the device is streaming, so it is not necessary to disable it when the device stops streaming. The timeout value can be safely updated at any time.

If the timer expires, the \doxylink{classlibcamera_1_1V4L2VideoDevice_a04808f0cc1ed33c6796a98fbdc8603f1}{V4\+L2\+Video\+Device\+::dequeue\+Timeout} signal is emitted. This can typically be used by pipeline handlers to be notified of stalled devices.

Set {\itshape timeout} to 0 to disable the watchdog timer. \Hypertarget{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}\label{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!setFormat@{setFormat}}
\index{setFormat@{setFormat}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{setFormat()}{setFormat()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::set\+Format (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}}]{format }\end{DoxyParamCaption})}



Configure an image format on the V4\+L2 video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em format} & The image format to apply to the video device\\
\hline
\end{DoxyParams}
Apply the supplied {\itshape format} to the video device, and return the actually applied format parameters, as \doxylink{classlibcamera_1_1V4L2VideoDevice_a91f2c87d4f30ad23259b7c460e144f63}{V4\+L2\+Video\+Device\+::get\+Format} would do.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_aa9eba638ac570ac4746017c6f10fafaa}\label{classlibcamera_1_1V4L2VideoDevice_aa9eba638ac570ac4746017c6f10fafaa} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!setSelection@{setSelection}}
\index{setSelection@{setSelection}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{setSelection()}{setSelection()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::set\+Selection (\begin{DoxyParamCaption}\item[{unsigned int}]{target,  }\item[{\mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}} \texorpdfstring{$\ast$}{*}}]{rect }\end{DoxyParamCaption})}



Set a selection rectangle {\itshape rect} for {\itshape target}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em target} & The selection target defined by the V4\+L2\+\_\+\+SEL\+\_\+\+TGT\+\_\+\texorpdfstring{$\ast$}{*} flags \\
\hline
\mbox{\texttt{ in,out}}  & {\em rect} & The selection rectangle to be applied\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000054}{Todo}}]Define a V4\+L2\+Selection\+Target enum for the selection target\end{DoxyRefDesc}


\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a61998710615bdf7aa25a046c8565ed66}\label{classlibcamera_1_1V4L2VideoDevice_a61998710615bdf7aa25a046c8565ed66} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!streamOff@{streamOff}}
\index{streamOff@{streamOff}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{streamOff()}{streamOff()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::stream\+Off (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Stop the video stream. 

Buffers that are still queued when the video stream is stopped are immediately dequeued with their status set to \doxylink{structlibcamera_1_1FrameMetadata_a0ba5ab50b5169a1d94f6963c429c9846a1ca4a9a1fbd6225f498e4ab942da1ce4}{Frame\+Metadata\+::\+Frame\+Cancelled}, and the buffer\+Ready signal is emitted for them. The order in which those buffers are dequeued is not specified.

This will be a no-\/op if the stream is not started in the first place and has no queued buffers.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a588a5dc9d6f4c54c61136ac43ff9a8cc}\label{classlibcamera_1_1V4L2VideoDevice_a588a5dc9d6f4c54c61136ac43ff9a8cc} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!streamOn@{streamOn}}
\index{streamOn@{streamOn}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{streamOn()}{streamOn()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::stream\+On (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Start the video stream. 

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_ac53da48385ab9a3798f7257a94a8ceb0}\label{classlibcamera_1_1V4L2VideoDevice_ac53da48385ab9a3798f7257a94a8ceb0} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!toV4L2PixelFormat@{toV4L2PixelFormat}}
\index{toV4L2PixelFormat@{toV4L2PixelFormat}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{toV4L2PixelFormat()}{toV4L2PixelFormat()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format}} libcamera\+::\+V4\+L2\+Video\+Device\+::to\+V4\+L2\+Pixel\+Format (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} \&}]{pixel\+Format }\end{DoxyParamCaption}) const}



Convert {\itshape \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format}} to a \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} supported by the device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pixel\+Format} & The \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format} to convert\\
\hline
\end{DoxyParams}
Convert {\itshape pixelformat} to a V4\+L2 Four\+CC that is known to be supported by the video device.

A \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} may support different V4\+L2 pixel formats that map the same \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format}. This is the case of the contiguous and non-\/contiguous variants of multiplanar formats, and with the V4\+L2 MJPEG and JPEG pixel formats. Converting a \doxylink{classlibcamera_1_1PixelFormat}{Pixel\+Format} to a \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} may thus have multiple answers.

This function converts the {\itshape pixel\+Format} using the list of V4\+L2 pixel formats that the \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} supports. This guarantees that the returned \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} will be valid for the device. If multiple matches are still possible, contiguous variants are preferred. If the {\itshape pixel\+Format} is not supported by the device, the function returns an invalid \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format}.

\begin{DoxyReturn}{Returns}
The \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} corresponding to {\itshape pixel\+Format} if supported by the device, or an invalid \doxylink{classlibcamera_1_1V4L2PixelFormat}{V4\+L2\+Pixel\+Format} otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2VideoDevice_a1e75c2defe1fc70ec05e2cea8d8db4f0}\label{classlibcamera_1_1V4L2VideoDevice_a1e75c2defe1fc70ec05e2cea8d8db4f0} 
\index{libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}!tryFormat@{tryFormat}}
\index{tryFormat@{tryFormat}!libcamera::V4L2VideoDevice@{libcamera::V4L2VideoDevice}}
\doxysubsubsection{\texorpdfstring{tryFormat()}{tryFormat()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Video\+Device\+::try\+Format (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4\+L2\+Device\+Format}} \texorpdfstring{$\ast$}{*}}]{format }\end{DoxyParamCaption})}



Try an image format on the V4\+L2 video device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em format} & The image format to test applicability to the video device\\
\hline
\end{DoxyParams}
Try the supplied {\itshape format} on the video device without applying it, returning the format that would be applied. This is equivalent to \doxylink{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}{set\+Format()}, except that the device configuration is not changed.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/include/libcamera/internal/\mbox{\hyperlink{v4l2__videodevice_8h}{v4l2\+\_\+videodevice.\+h}}\item 
src/peripherals/camera/libcamera/src/libcamera/v4l2\+\_\+videodevice.\+cpp\end{DoxyCompactItemize}
