\doxysection{libcamera\+::Shared\+Mem\+Object\texorpdfstring{$<$}{<} T, typename \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classlibcamera_1_1SharedMemObject}{}\label{classlibcamera_1_1SharedMemObject}\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}


Helper class to allocate an object in shareable memory.  


Inheritance diagram for libcamera\+::Shared\+Mem\+Object\texorpdfstring{$<$}{<} T, typename \texorpdfstring{$>$}{>}\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classlibcamera_1_1SharedMemObject}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$class... Args$>$ }\\\mbox{\hyperlink{classlibcamera_1_1SharedMemObject_a66f6f4d7b9e1248053b23c18ccdedb13}{Shared\+Mem\+Object}} (const std\+::string \&name, Args \&\&...args)
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject_aab04444c98589899f3409d8bbf527072}{Shared\+Mem\+Object}} (\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}}$<$ T $>$ \&\&rhs)
\begin{DoxyCompactList}\small\item\em Move constructor for \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject_aeef383abf579b2157a80e76a0c195f6f}{\texorpdfstring{$\sim$}{\string~}\+Shared\+Mem\+Object}} ()
\begin{DoxyCompactList}\small\item\em Destroy the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} instance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}}$<$ T $>$ \& \mbox{\hyperlink{classlibcamera_1_1SharedMemObject_ae0eb65e4b7614b128eef7fbcab0c1f15}{operator=}} (\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}}$<$ T $>$ \&\&rhs)
\begin{DoxyCompactList}\small\item\em Move assignment operator for \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. \end{DoxyCompactList}\item 
T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1SharedMemObject_abec24023472021425bf4c3c12c79395a}{operator-\/$>$}} ()
\begin{DoxyCompactList}\small\item\em Dereference the stored object. \end{DoxyCompactList}\item 
const T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1SharedMemObject_a497ce25e5751637c704874a685b1698c}{operator-\/$>$}} () const
\begin{DoxyCompactList}\small\item\em Dereference the stored object.   \end{DoxyCompactList}\item 
T \& \mbox{\hyperlink{classlibcamera_1_1SharedMemObject_a5bc7a7b0c66e3b8c065f2a8eae3933c1}{operator\texorpdfstring{$\ast$}{*}}} ()
\begin{DoxyCompactList}\small\item\em Dereference the stored object. \end{DoxyCompactList}\item 
const T \& \mbox{\hyperlink{classlibcamera_1_1SharedMemObject_a6ef9aa83dd7763579369a719341efce3}{operator\texorpdfstring{$\ast$}{*}}} () const
\begin{DoxyCompactList}\small\item\em Dereference the stored object.   \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1SharedMem}{libcamera\+::\+Shared\+Mem}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMem_a94a2258cce3b73cef779e885c5edbf3f}{Shared\+Mem}} (const std\+::string \&name, std\+::size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} with memory of the given {\itshape size}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMem_a4857f42d97283d4a3c9d515579786be2}{Shared\+Mem}} (\mbox{\hyperlink{classlibcamera_1_1SharedMem}{Shared\+Mem}} \&\&rhs)
\begin{DoxyCompactList}\small\item\em Move constructor for \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem}. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classlibcamera_1_1SharedMem_a8c80aa9a9ca5a38792a098f75aff7ec5}{\texorpdfstring{$\sim$}{\string~}\+Shared\+Mem}} ()
\begin{DoxyCompactList}\small\item\em Destroy the \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} instance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMem}{Shared\+Mem}} \& \mbox{\hyperlink{classlibcamera_1_1SharedMem_ac002a4ebe16024fdb1aa2953e3f35e8d}{operator=}} (\mbox{\hyperlink{classlibcamera_1_1SharedMem}{Shared\+Mem}} \&\&rhs)
\begin{DoxyCompactList}\small\item\em Move assignment operator for \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem}. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classlibcamera_1_1SharedFD}{Shared\+FD}} \& \mbox{\hyperlink{classlibcamera_1_1SharedMem_ae490bbd85e56c07d853b50394ace6f0c}{fd}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the file descriptor for the underlying shared memory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1Span}{Span}}$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{classlibcamera_1_1SharedMem_ab12ce3844ebcb8a502bafb094b375c2e}{mem}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the underlying shared memory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1SharedMem_acffb7213691b9c921ce920cb8679fc40}{operator bool}} () const
\begin{DoxyCompactList}\small\item\em Check if the shared memory allocation succeeded. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1SharedMemObject_a48dff5350fe4f134222b651a4bce6004}\label{classlibcamera_1_1SharedMemObject_a48dff5350fe4f134222b651a4bce6004} 
static constexpr std\+::size\+\_\+t {\bfseries k\+Size} = sizeof(T)
\begin{DoxyCompactList}\small\item\em The size of the object stored in shared memory. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$class T, typename = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$\newline
class libcamera\+::\+Shared\+Mem\+Object$<$ T, typename $>$}
Helper class to allocate an object in shareable memory. 


\begin{DoxyTemplParams}{Template Parameters}
{\em The} & object type\\
\hline
\end{DoxyTemplParams}
The \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} class is a specialization of the \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} class that wraps an object of type {\itshape T} and constructs it in shareable memory. It uses the same underlying memory allocation and sharing mechanism as the \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} class.

The wrapped object is constructed at the same time as the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} instance, by forwarding the arguments passed to the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} constructor. The underlying memory allocation is sized to the object {\itshape T} size. The bool() operator should be used to check the allocation was successful. The object can be accessed using the dereference operators \doxylink{classlibcamera_1_1SharedMemObject_a5bc7a7b0c66e3b8c065f2a8eae3933c1}{operator\texorpdfstring{$\ast$}{*}()} and \doxylink{classlibcamera_1_1SharedMemObject_abec24023472021425bf4c3c12c79395a}{operator-\/$>$()}.

While no restriction on the type {\itshape T} is enforced, not all types are suitable for sharing between multiple processes. Most notably, any object type that contains pointer or reference members will likely cause issues. Even if those members refer to other members of the same object, the shared memory will be mapped at different addresses in different processes, and the pointers will not be valid.

A new anonymous file is created for every \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} instance. If there is a need to share a large number of small objects, these objects should be grouped into a single larger object to limit the number of file descriptors.

To share the object with other processes, see the \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} documentation. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classlibcamera_1_1SharedMemObject_a66f6f4d7b9e1248053b23c18ccdedb13}\label{classlibcamera_1_1SharedMemObject_a66f6f4d7b9e1248053b23c18ccdedb13} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!SharedMemObject@{SharedMemObject}}
\index{SharedMemObject@{SharedMemObject}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{SharedMemObject()}{SharedMemObject()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
template$<$class... Args$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::\+Shared\+Mem\+Object (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{name,  }\item[{Args \&\&...}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construct a \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em name} & Name of the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} \\
\hline
\mbox{\texttt{ in}}  & {\em args} & Arguments to pass to the constructor of the object T\\
\hline
\end{DoxyParams}
The {\itshape name} is used for debugging purpose only. Multiple \doxylink{classlibcamera_1_1SharedMem}{Shared\+Mem} instances can have the same name. \Hypertarget{classlibcamera_1_1SharedMemObject_aab04444c98589899f3409d8bbf527072}\label{classlibcamera_1_1SharedMemObject_aab04444c98589899f3409d8bbf527072} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!SharedMemObject@{SharedMemObject}}
\index{SharedMemObject@{SharedMemObject}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{SharedMemObject()}{SharedMemObject()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::\+Shared\+Mem\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}}$<$ T $>$ \&\&}]{rhs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Move constructor for \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em rhs} & The object to move \\
\hline
\end{DoxyParams}
\Hypertarget{classlibcamera_1_1SharedMemObject_aeef383abf579b2157a80e76a0c195f6f}\label{classlibcamera_1_1SharedMemObject_aeef383abf579b2157a80e76a0c195f6f} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!````~SharedMemObject@{\texorpdfstring{$\sim$}{\string~}SharedMemObject}}
\index{````~SharedMemObject@{\texorpdfstring{$\sim$}{\string~}SharedMemObject}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}SharedMemObject()}{\string~SharedMemObject()}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::\texorpdfstring{$\sim$}{\string~}\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Destroy the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} instance. 

Destroying a \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} calls the wrapped T object\textquotesingle{}s destructor. While the underlying memory may not be freed immediately if other mappings have been created manually (see \doxylink{classlibcamera_1_1SharedMem_a8c80aa9a9ca5a38792a098f75aff7ec5}{Shared\+Mem\+::\texorpdfstring{$\sim$}{\string~}\+Shared\+Mem()} for more information), the stored object may be modified. Depending on the \texorpdfstring{$\sim$}{\string~}\+T() destructor, accessing the object after destruction of the \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} causes undefined behaviour. It is the responsibility of the user of this class to synchronize with other users who have access to the shared object. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1SharedMemObject_a5bc7a7b0c66e3b8c065f2a8eae3933c1}\label{classlibcamera_1_1SharedMemObject_a5bc7a7b0c66e3b8c065f2a8eae3933c1} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!operator\texorpdfstring{$\ast$}{*}@{operator\texorpdfstring{$\ast$}{*}}}
\index{operator\texorpdfstring{$\ast$}{*}@{operator\texorpdfstring{$\ast$}{*}}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{operator\texorpdfstring{$\ast$}{*}()}{operator*()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::operator\texorpdfstring{$\ast$}{*} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Dereference the stored object. 

\begin{DoxyReturn}{Returns}
Reference to the stored object 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1SharedMemObject_a6ef9aa83dd7763579369a719341efce3}\label{classlibcamera_1_1SharedMemObject_a6ef9aa83dd7763579369a719341efce3} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!operator\texorpdfstring{$\ast$}{*}@{operator\texorpdfstring{$\ast$}{*}}}
\index{operator\texorpdfstring{$\ast$}{*}@{operator\texorpdfstring{$\ast$}{*}}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{operator\texorpdfstring{$\ast$}{*}()}{operator*()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
const T \& \mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::operator\texorpdfstring{$\ast$}{*} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Dereference the stored object.   

\begin{DoxyReturn}{Returns}
Reference to the stored object   
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1SharedMemObject_abec24023472021425bf4c3c12c79395a}\label{classlibcamera_1_1SharedMemObject_abec24023472021425bf4c3c12c79395a} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!operator-\/$>$@{operator-\/$>$}}
\index{operator-\/$>$@{operator-\/$>$}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{operator-\/$>$()}{operator->()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::operator-\/$>$ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Dereference the stored object. 

\begin{DoxyReturn}{Returns}
Pointer to the stored object 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1SharedMemObject_a497ce25e5751637c704874a685b1698c}\label{classlibcamera_1_1SharedMemObject_a497ce25e5751637c704874a685b1698c} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!operator-\/$>$@{operator-\/$>$}}
\index{operator-\/$>$@{operator-\/$>$}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{operator-\/$>$()}{operator->()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
const T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::operator-\/$>$ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Dereference the stored object.   

\begin{DoxyReturn}{Returns}
Pointer to the stored object   
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1SharedMemObject_ae0eb65e4b7614b128eef7fbcab0c1f15}\label{classlibcamera_1_1SharedMemObject_ae0eb65e4b7614b128eef7fbcab0c1f15} 
\index{libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}!operator=@{operator=}}
\index{operator=@{operator=}!libcamera::SharedMemObject$<$ T, typename $>$@{libcamera::SharedMemObject$<$ T, typename $>$}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily template$<$class T , typename  = std\+::enable\+\_\+if\+\_\+t$<$std\+::is\+\_\+standard\+\_\+layout$<$\+T$>$\+::value$>$$>$ \\
\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{libcamera\+::\+Shared\+Mem\+Object}}$<$ T, typename $>$\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}}$<$ T $>$ \&\&}]{rhs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Move assignment operator for \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em rhs} & The \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} object to take the data from\\
\hline
\end{DoxyParams}
Moving a \doxylink{classlibcamera_1_1SharedMemObject}{Shared\+Mem\+Object} does not affect the stored object. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/include/libcamera/internal/shared\+\_\+mem\+\_\+object.\+h\item 
src/peripherals/camera/libcamera/src/libcamera/\mbox{\hyperlink{shared__mem__object_8cpp}{shared\+\_\+mem\+\_\+object.\+cpp}}\end{DoxyCompactItemize}
