\doxysection{libcamera\+::Camera Class Reference}
\hypertarget{classlibcamera_1_1Camera}{}\label{classlibcamera_1_1Camera}\index{libcamera::Camera@{libcamera::Camera}}


\doxylink{classlibcamera_1_1Camera}{Camera} device.  


Inheritance diagram for libcamera\+::Camera\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.481482cm]{classlibcamera_1_1Camera}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classlibcamera_1_1Camera_1_1Private}{Private}}
\begin{DoxyCompactList}\small\item\em Base class for camera private data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
const std\+::string \& \mbox{\hyperlink{classlibcamera_1_1Camera_a21870c4c8fab37d772e3340b0f8f4e92}{id}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the ID of the camera. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}{acquire}} ()
\begin{DoxyCompactList}\small\item\em Acquire the camera device for exclusive access. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a5399b0249ee510f15f224e51a2e92c7b}{release}} ()
\begin{DoxyCompactList}\small\item\em Release exclusive access to the camera device. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \& \mbox{\hyperlink{classlibcamera_1_1Camera_a10ef308df9bfb61c9ad825f4580074a7}{controls}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the list of controls supported by the camera. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \& \mbox{\hyperlink{classlibcamera_1_1Camera_a99c4d8a70c8821e7d36bc04c3c34c217}{properties}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the list of properties of the camera. \end{DoxyCompactList}\item 
const std\+::set$<$ \mbox{\hyperlink{classlibcamera_1_1Stream}{Stream}} \texorpdfstring{$\ast$}{*} $>$ \& \mbox{\hyperlink{classlibcamera_1_1Camera_a0f56ce353e6d2e4db9d8ff1ae4db1b95}{streams}} () const
\begin{DoxyCompactList}\small\item\em Retrieve all the camera\textquotesingle{}s stream information. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} $>$ \mbox{\hyperlink{classlibcamera_1_1Camera_a3059dba6e3facae4f58212d3d76b5cac}{generate\+Configuration}} (\mbox{\hyperlink{classlibcamera_1_1Span}{Span}}$<$ const \mbox{\hyperlink{namespacelibcamera_a295d1f5e7828d95c0b0aabc0a8baac03}{Stream\+Role}} $>$ roles=\{\})
\begin{DoxyCompactList}\small\item\em Generate a default camera configuration according to stream roles. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} $>$ \mbox{\hyperlink{classlibcamera_1_1Camera_a6f8697f539d664c71247f9eff6247e16}{generate\+Configuration}} (std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{namespacelibcamera_a295d1f5e7828d95c0b0aabc0a8baac03}{Stream\+Role}} $>$ roles)
\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a4c190f4c369628e5cd96770790559a26}{configure}} (\mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} \texorpdfstring{$\ast$}{*}config)
\begin{DoxyCompactList}\small\item\em Configure the camera prior to capture. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Request}{Request}} $>$ \mbox{\hyperlink{classlibcamera_1_1Camera_a5e5a9cdeef58daec5963b4715ecd4464}{create\+Request}} (uint64\+\_\+t cookie=0)
\begin{DoxyCompactList}\small\item\em Create a request object for the camera. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a7017dfeac48e842d3e33c2c2eb217d62}{queue\+Request}} (\mbox{\hyperlink{classlibcamera_1_1Request}{Request}} \texorpdfstring{$\ast$}{*}request)
\begin{DoxyCompactList}\small\item\em Queue a request to the camera. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf}{start}} (const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classlibcamera_1_1Camera_a10ef308df9bfb61c9ad825f4580074a7}{controls}}=nullptr)
\begin{DoxyCompactList}\small\item\em Start capture from camera. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1Camera_a4dce0183a1031b5a560167266cdfc7ef}{stop}} ()
\begin{DoxyCompactList}\small\item\em Stop capture from camera. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Object}{libcamera\+::\+Object}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1Object_a0425e0a986630b5881558378fad91687}{Object}} (\mbox{\hyperlink{classlibcamera_1_1Object}{Object}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classlibcamera_1_1Object_a469143548519e7ac9525e5b2b45e983f}{parent}}=nullptr)
\begin{DoxyCompactList}\small\item\em Construct an \doxylink{classlibcamera_1_1Object}{Object} instance. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classlibcamera_1_1Object_ad52c17ff4161b166ae71e766d0649b97}{\texorpdfstring{$\sim$}{\string~}\+Object}} ()
\begin{DoxyCompactList}\small\item\em Destroy an \doxylink{classlibcamera_1_1Object}{Object} instance. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1Object_a7432a52a2e69a29cfe8144929686d1e6}{delete\+Later}} ()
\begin{DoxyCompactList}\small\item\em Schedule deletion of the instance in the thread it belongs to. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1Object_af9ae92dfe5f3741c64ebdec61a2f5bef}{post\+Message}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Message}{Message}} $>$ msg)
\begin{DoxyCompactList}\small\item\em Post a message to the object\textquotesingle{}s thread. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T , typename R , typename... Func\+Args, typename... Args, std\+::enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+base\+\_\+of$<$ \mbox{\hyperlink{classlibcamera_1_1Object}{Object}}, T $>$\+::value $>$ \texorpdfstring{$\ast$}{*}  = nullptr$>$ }\\R \mbox{\hyperlink{classlibcamera_1_1Object_a2a4ea2209e289e2aabb75c5718d5b4a7}{invoke\+Method}} (R(T\+::\texorpdfstring{$\ast$}{*}func)(Func\+Args...), \mbox{\hyperlink{namespacelibcamera_ae2c8412791b9597d590a7d0b2c9e2919}{Connection\+Type}} type, Args \&\&... args)
\begin{DoxyCompactList}\small\item\em Invoke a method asynchronously on an \doxylink{classlibcamera_1_1Object}{Object} instance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1Thread}{Thread}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1Object_aca52b8790edc25af65d6fe937355577b}{thread}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the thread the object is bound to \textbackslash{}context This function is \textbackslash{}threadsafe. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1Object_a8045a16ae8a093722466ca7129db6fc2}{move\+To\+Thread}} (\mbox{\hyperlink{classlibcamera_1_1Thread}{Thread}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classlibcamera_1_1Object_aca52b8790edc25af65d6fe937355577b}{thread}})
\begin{DoxyCompactList}\small\item\em Move the object and all its children to a different thread. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1Object}{Object}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1Object_a469143548519e7ac9525e5b2b45e983f}{parent}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the object\textquotesingle{}s parent. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Extensible}{libcamera\+::\+Extensible}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1Extensible_afb1c6e39d8fe4fbeab1cbbbe65517f4c}{Extensible}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Extensible_1_1Private}{Private}} $>$ d)
\begin{DoxyCompactList}\small\item\em Construct an instance of an \doxylink{classlibcamera_1_1Extensible}{Extensible} class. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1Camera_a396d842f11c9c3bd1aaf8bf8ec2450b6}\label{classlibcamera_1_1Camera_a396d842f11c9c3bd1aaf8bf8ec2450b6} 
static std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Camera}{Camera}} $>$ {\bfseries create} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Camera_1_1Private}{Private}} $>$ d, const std\+::string \&\mbox{\hyperlink{classlibcamera_1_1Camera_a21870c4c8fab37d772e3340b0f8f4e92}{id}}, const std\+::set$<$ \mbox{\hyperlink{classlibcamera_1_1Stream}{Stream}} \texorpdfstring{$\ast$}{*} $>$ \&\mbox{\hyperlink{classlibcamera_1_1Camera_a0f56ce353e6d2e4db9d8ff1ae4db1b95}{streams}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1Camera_ae3701920bae66f6baa92271c597e182c}\label{classlibcamera_1_1Camera_ae3701920bae66f6baa92271c597e182c} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ \mbox{\hyperlink{classlibcamera_1_1Request}{Request}} \texorpdfstring{$\ast$}{*}, \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{Frame\+Buffer}} \texorpdfstring{$\ast$}{*} $>$ {\bfseries buffer\+Completed}
\begin{DoxyCompactList}\small\item\em \doxylink{classlibcamera_1_1Signal}{Signal} emitted when a buffer for a request queued to the camera has completed. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1Camera_a6a0110cb1cf52c7f06f62261d0ada86c}\label{classlibcamera_1_1Camera_a6a0110cb1cf52c7f06f62261d0ada86c} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ \mbox{\hyperlink{classlibcamera_1_1Request}{Request}} \texorpdfstring{$\ast$}{*} $>$ {\bfseries request\+Completed}
\begin{DoxyCompactList}\small\item\em \doxylink{classlibcamera_1_1Signal}{Signal} emitted when a request queued to the camera has completed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}} \mbox{\hyperlink{classlibcamera_1_1Camera_ab4c410debecced9a862f856fa3005282}{disconnected}}
\begin{DoxyCompactList}\small\item\em \doxylink{classlibcamera_1_1Signal}{Signal} emitted when the camera is disconnected from the system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1Camera_a369af2e02b866814ed9eb3f5f2092139}\label{classlibcamera_1_1Camera_a369af2e02b866814ed9eb3f5f2092139} 
class {\bfseries Pipeline\+Handler}
\item 
\Hypertarget{classlibcamera_1_1Camera_aa1b7a19f72e45f9e4b0f9ee25349a887}\label{classlibcamera_1_1Camera_aa1b7a19f72e45f9e4b0f9ee25349a887} 
class {\bfseries Frame\+Buffer\+Allocator}
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Object}{libcamera\+::\+Object}}}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classlibcamera_1_1Object_a5328cab1412743716aa2748eeded8e80}{message}} (\mbox{\hyperlink{classlibcamera_1_1Message}{Message}} \texorpdfstring{$\ast$}{*}msg)
\begin{DoxyCompactList}\small\item\em \doxylink{classlibcamera_1_1Message}{Message} handler for the object. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classlibcamera_1_1Object_a6e81f2a2524dbe12daed49597cf66a57}{assert\+Thread\+Bound}} (const char \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classlibcamera_1_1Object_a5328cab1412743716aa2748eeded8e80}{message}})
\begin{DoxyCompactList}\small\item\em Check if the caller complies with thread-\/bound constraints. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Extensible}{libcamera\+::\+Extensible}}}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\const T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1Extensible_a6625afb4df192443c12d118f5f1a17ac}{\+\_\+d}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the private data instance. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\T \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1Extensible_a30a918eee516b7e1d97a7f346ce99fca}{\+\_\+d}} ()
\begin{DoxyCompactList}\small\item\em Retrieve the private data instance.   \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{classlibcamera_1_1Camera}{Camera} device. 

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000019}{Todo}}]Add documentation for camera start timings. What exactly does the camera expect the pipeline handler to do when \doxylink{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf}{start()} is called?\end{DoxyRefDesc}


The \doxylink{classlibcamera_1_1Camera}{Camera} class models a camera capable of producing one or more image streams from a single image source. It provides the main interface to configuring and controlling the device, and capturing image streams. It is the central object exposed by libcamera.

To support the central nature of \doxylink{classlibcamera_1_1Camera}{Camera} objects, libcamera manages the lifetime of camera instances with std\+::shared\+\_\+ptr$<$$>$. Instances shall be created with the create() function which returns a shared pointer. The \doxylink{classlibcamera_1_1Camera}{Camera} constructors and destructor are private, to prevent instances from being constructed and destroyed manually.\hypertarget{classlibcamera_1_1Camera_camera_operation}{}\doxysubsection{\texorpdfstring{Operating the Camera}{Operating the Camera}}\label{classlibcamera_1_1Camera_camera_operation}
An application needs to perform a sequence of operations on a camera before it is ready to process requests. The camera needs to be acquired and configured to prepare the camera for capture. Once started the camera can process requests until it is stopped. When an application is done with a camera, the camera needs to be released.

An application may start and stop a camera multiple times as long as it is not released. The camera may also be reconfigured.

Functions that affect the camera state as defined below are generally not synchronized with each other by the \doxylink{classlibcamera_1_1Camera}{Camera} class. The caller is responsible for ensuring their synchronization if necessary.\hypertarget{classlibcamera_1_1Camera_Camera}{}\doxysubsubsection{\texorpdfstring{States}{States}}\label{classlibcamera_1_1Camera_Camera}
To help manage the sequence of operations needed to control the camera a set of states are defined. Each state describes which operations may be performed on the camera. Performing an operation not allowed in the camera state results in undefined behaviour. Operations not listed at all in the state diagram are allowed in all states.\hypertarget{classlibcamera_1_1Camera_Available}{}\doxysubsubsubsection{\texorpdfstring{Available}{Available}}\label{classlibcamera_1_1Camera_Available}
The base state of a camera, an application can inspect the properties of the camera to determine if it wishes to use it. If an application wishes to use a camera it should \doxylink{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}{acquire()} it to proceed to the Acquired state.\hypertarget{classlibcamera_1_1Camera_Acquired}{}\doxysubsubsubsection{\texorpdfstring{Acquired}{Acquired}}\label{classlibcamera_1_1Camera_Acquired}
In the acquired state an application has exclusive access to the camera and may modify the camera\textquotesingle{}s parameters to configure it and proceed to the Configured state.\hypertarget{classlibcamera_1_1Camera_Configured}{}\doxysubsubsubsection{\texorpdfstring{Configured}{Configured}}\label{classlibcamera_1_1Camera_Configured}
The camera is configured and ready to be started. The application may \doxylink{classlibcamera_1_1Camera_a5399b0249ee510f15f224e51a2e92c7b}{release()} the camera and to get back to the Available state or \doxylink{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf}{start()} it to progress to the Running state.\hypertarget{classlibcamera_1_1Camera_Stopping}{}\doxysubsubsubsection{\texorpdfstring{Stopping}{Stopping}}\label{classlibcamera_1_1Camera_Stopping}
The camera has been asked to stop. Pending requests are being completed or cancelled, and no new requests are permitted to be queued. The camera will transition to the Configured state when all queued requests have been returned to the application.\hypertarget{classlibcamera_1_1Camera_Running}{}\doxysubsubsubsection{\texorpdfstring{Running}{Running}}\label{classlibcamera_1_1Camera_Running}
The camera is running and ready to process requests queued by the application. The camera remains in this state until it is stopped and moved to the Configured state. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}\label{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274} 
\index{libcamera::Camera@{libcamera::Camera}!acquire@{acquire}}
\index{acquire@{acquire}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::acquire (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Acquire the camera device for exclusive access. 

After opening the device with open(), exclusive access must be obtained before performing operations that change the device state. This function is not blocking, if the device has already been acquired (by the same or another process) the -\/EBUSY error code is returned.

Acquiring a camera may limit usage of any other camera(s) provided by the same pipeline handler to the same instance of libcamera. The limit is in effect until all cameras from the pipeline handler are released. Other instances of libcamera can still list and examine the cameras but will fail if they attempt to \doxylink{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}{acquire()} any of them.

Once exclusive access isn\textquotesingle{}t needed anymore, the device should be released with a call to the \doxylink{classlibcamera_1_1Camera_a5399b0249ee510f15f224e51a2e92c7b}{release()} function.

\textbackslash{}context This function is \textbackslash{}threadsafe. It may only be called when the camera is in the Available state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & The camera has been disconnected from the system \\
\hline
{\em -\/\+EBUSY} & The camera is not free and can\textquotesingle{}t be acquired by the caller \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a4c190f4c369628e5cd96770790559a26}\label{classlibcamera_1_1Camera_a4c190f4c369628e5cd96770790559a26} 
\index{libcamera::Camera@{libcamera::Camera}!configure@{configure}}
\index{configure@{configure}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{configure()}{configure()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::configure (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} \texorpdfstring{$\ast$}{*}}]{config }\end{DoxyParamCaption})}



Configure the camera prior to capture. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em config} & The camera configurations to setup\\
\hline
\end{DoxyParams}
Prior to starting capture, the camera must be configured to select a group of streams to be involved in the capture and their configuration. The caller specifies which streams are to be involved and their configuration by populating {\itshape config}.

The configuration is created by \doxylink{classlibcamera_1_1Camera_a3059dba6e3facae4f58212d3d76b5cac}{generate\+Configuration()}, and adjusted by the caller with \doxylink{classlibcamera_1_1CameraConfiguration_a29f8f263384c6149775b6011c7397093}{Camera\+Configuration\+::validate()}. This function only accepts fully valid configurations and returns an error if {\itshape config} is not valid.

Exclusive access to the camera shall be ensured by a call to \doxylink{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}{acquire()} prior to calling this function, otherwise an -\/EACCES error will be returned.

\textbackslash{}context This function may only be called when the camera is in the Acquired or Configured state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}, and shall be synchronized by the caller with other functions that affect the camera state.

Upon return the \doxylink{structlibcamera_1_1StreamConfiguration}{Stream\+Configuration} entries in {\itshape config} are associated with \doxylink{classlibcamera_1_1Stream}{Stream} instances which can be retrieved with \doxylink{structlibcamera_1_1StreamConfiguration_ad0e405752ad033249b515165e4864bbb}{Stream\+Configuration\+::stream()}.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & The camera has been disconnected from the system \\
\hline
{\em -\/\+EACCES} & The camera is not in a state where it can be configured \\
\hline
{\em -\/\+EINVAL} & The configuration is not valid \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a10ef308df9bfb61c9ad825f4580074a7}\label{classlibcamera_1_1Camera_a10ef308df9bfb61c9ad825f4580074a7} 
\index{libcamera::Camera@{libcamera::Camera}!controls@{controls}}
\index{controls@{controls}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{controls()}{controls()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \& libcamera\+::\+Camera\+::controls (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the list of controls supported by the camera. 

The list of controls supported by the camera and their associated constraints remain constant through the lifetime of the \doxylink{classlibcamera_1_1Camera}{Camera} object.

\textbackslash{}context This function is \textbackslash{}threadsafe.

\begin{DoxyReturn}{Returns}
A \doxylink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map} listing the controls supported by the camera 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1Camera_a5e5a9cdeef58daec5963b4715ecd4464}\label{classlibcamera_1_1Camera_a5e5a9cdeef58daec5963b4715ecd4464} 
\index{libcamera::Camera@{libcamera::Camera}!createRequest@{createRequest}}
\index{createRequest@{createRequest}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{createRequest()}{createRequest()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1Request}{Request}} $>$ libcamera\+::\+Camera\+::create\+Request (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{cookie = {\ttfamily 0} }\end{DoxyParamCaption})}



Create a request object for the camera. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cookie} & Opaque cookie for application use\\
\hline
\end{DoxyParams}
This function creates an empty request for the application to fill with buffers and parameters, and queue for capture.

The {\itshape cookie} is stored in the request and is accessible through the \doxylink{classlibcamera_1_1Request_a7b5b73e047df7b87a2c1b841345a77ae}{Request\+::cookie()} function at any time. It is typically used by applications to map the request to an external resource in the request completion handler, and is completely opaque to libcamera.

The ownership of the returned request is passed to the caller, which is responsible for deleting it. The request may be deleted in the completion handler, or reused after resetting its state with \doxylink{classlibcamera_1_1Request_aeb951e740b488f282292519625025491}{Request\+::reuse()}.

\textbackslash{}context This function is \textbackslash{}threadsafe. It may only be called when the camera is in the Configured or Running state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}.

\begin{DoxyReturn}{Returns}
A pointer to the newly created request, or nullptr on error 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1Camera_a3059dba6e3facae4f58212d3d76b5cac}\label{classlibcamera_1_1Camera_a3059dba6e3facae4f58212d3d76b5cac} 
\index{libcamera::Camera@{libcamera::Camera}!generateConfiguration@{generateConfiguration}}
\index{generateConfiguration@{generateConfiguration}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{generateConfiguration()}{generateConfiguration()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} $>$ libcamera\+::\+Camera\+::generate\+Configuration (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1Span}{Span}}$<$ const \mbox{\hyperlink{namespacelibcamera_a295d1f5e7828d95c0b0aabc0a8baac03}{Stream\+Role}} $>$}]{roles = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Generate a default camera configuration according to stream roles. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em roles} & A list of stream roles\\
\hline
\end{DoxyParams}
Generate a camera configuration for a set of desired stream roles. The caller specifies a list of stream roles and the camera returns a configuration containing suitable streams and their suggested default configurations. An empty list of roles is valid, and will generate an empty configuration that can be filled by the caller.

\textbackslash{}context This function is \textbackslash{}threadsafe.

\begin{DoxyReturn}{Returns}
A \doxylink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration} if the requested roles can be satisfied, or a null pointer otherwise. 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1Camera_a6f8697f539d664c71247f9eff6247e16}\label{classlibcamera_1_1Camera_a6f8697f539d664c71247f9eff6247e16} 
\index{libcamera::Camera@{libcamera::Camera}!generateConfiguration@{generateConfiguration}}
\index{generateConfiguration@{generateConfiguration}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{generateConfiguration()}{generateConfiguration()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}} $>$ libcamera\+::\+Camera\+::generate\+Configuration (\begin{DoxyParamCaption}\item[{std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{namespacelibcamera_a295d1f5e7828d95c0b0aabc0a8baac03}{Stream\+Role}} $>$}]{roles }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. \Hypertarget{classlibcamera_1_1Camera_a21870c4c8fab37d772e3340b0f8f4e92}\label{classlibcamera_1_1Camera_a21870c4c8fab37d772e3340b0f8f4e92} 
\index{libcamera::Camera@{libcamera::Camera}!id@{id}}
\index{id@{id}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{id()}{id()}}
{\footnotesize\ttfamily const std\+::string \& libcamera\+::\+Camera\+::id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the ID of the camera. 

The camera ID is a free-\/form string that identifies a camera in the system. IDs are guaranteed to be unique and stable\+: the same camera, when connected to the system in the same way (e.\+g. in the same USB port), will have the same ID across both unplug/replug and system reboots.

Applications may store the camera ID and use it later to acquire the same camera. They shall treat the ID as an opaque identifier, without interpreting its value.

\doxylink{classlibcamera_1_1Camera}{Camera} IDs may change when the system hardware or firmware is modified, for instance when replacing a PCI USB controller or moving it to another PCI slot, or updating the ACPI tables or Device Tree.

\textbackslash{}context This function is \textbackslash{}threadsafe.

\begin{DoxyReturn}{Returns}
ID of the camera device 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1Camera_a99c4d8a70c8821e7d36bc04c3c34c217}\label{classlibcamera_1_1Camera_a99c4d8a70c8821e7d36bc04c3c34c217} 
\index{libcamera::Camera@{libcamera::Camera}!properties@{properties}}
\index{properties@{properties}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{properties()}{properties()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \& libcamera\+::\+Camera\+::properties (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the list of properties of the camera. 

\doxylink{classlibcamera_1_1Camera}{Camera} properties are static information that describe the capabilities of the camera. They remain constant through the lifetime of the \doxylink{classlibcamera_1_1Camera}{Camera} object.

\begin{DoxyReturn}{Returns}
A \doxylink{classlibcamera_1_1ControlList}{Control\+List} of properties supported by the camera 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1Camera_a7017dfeac48e842d3e33c2c2eb217d62}\label{classlibcamera_1_1Camera_a7017dfeac48e842d3e33c2c2eb217d62} 
\index{libcamera::Camera@{libcamera::Camera}!queueRequest@{queueRequest}}
\index{queueRequest@{queueRequest}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{queueRequest()}{queueRequest()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::queue\+Request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1Request}{Request}} \texorpdfstring{$\ast$}{*}}]{request }\end{DoxyParamCaption})}



Queue a request to the camera. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em request} & The request to queue to the camera\\
\hline
\end{DoxyParams}
This function queues a {\itshape request} to the camera for capture.

After allocating the request with \doxylink{classlibcamera_1_1Camera_a5e5a9cdeef58daec5963b4715ecd4464}{create\+Request()}, the application shall fill it with at least one capture buffer before queuing it. Requests that contain no buffers are invalid and are rejected without being queued.

Once the request has been queued, the camera will notify its completion through the \doxylink{classlibcamera_1_1Camera_a6a0110cb1cf52c7f06f62261d0ada86c}{request\+Completed} signal.

\textbackslash{}context This function is \textbackslash{}threadsafe. It may only be called when the camera is in the Running state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & The camera has been disconnected from the system \\
\hline
{\em -\/\+EACCES} & The camera is not running so requests can\textquotesingle{}t be queued \\
\hline
{\em -\/\+EXDEV} & The request does not belong to this camera \\
\hline
{\em -\/\+EINVAL} & The request is invalid \\
\hline
{\em -\/\+ENOMEM} & No buffer memory was available to handle the request \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a5399b0249ee510f15f224e51a2e92c7b}\label{classlibcamera_1_1Camera_a5399b0249ee510f15f224e51a2e92c7b} 
\index{libcamera::Camera@{libcamera::Camera}!release@{release}}
\index{release@{release}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::release (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Release exclusive access to the camera device. 

Releasing the camera device allows other users to acquire exclusive access with the \doxylink{classlibcamera_1_1Camera_a4e60f8015f64e5897394d6677e3fb274}{acquire()} function.

\textbackslash{}context This function may only be called when the camera is in the Available or Configured state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}, and shall be synchronized by the caller with other functions that affect the camera state.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EBUSY} & The camera is running and can\textquotesingle{}t be released \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf}\label{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf} 
\index{libcamera::Camera@{libcamera::Camera}!start@{start}}
\index{start@{start}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::start (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \texorpdfstring{$\ast$}{*}}]{controls = {\ttfamily nullptr} }\end{DoxyParamCaption})}



Start capture from camera. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em controls} & Controls to be applied before starting the \doxylink{classlibcamera_1_1Camera}{Camera}\\
\hline
\end{DoxyParams}
Start the camera capture session, optionally providing a list of controls to apply before starting. Once the camera is started the application can queue requests to the camera to process and return to the application until the capture session is terminated with {\itshape \doxylink{classlibcamera_1_1Camera_a4dce0183a1031b5a560167266cdfc7ef}{stop()}}.

\textbackslash{}context This function may only be called when the camera is in the Configured state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}, and shall be synchronized by the caller with other functions that affect the camera state.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & The camera has been disconnected from the system \\
\hline
{\em -\/\+EACCES} & The camera is not in a state where it can be started \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a4dce0183a1031b5a560167266cdfc7ef}\label{classlibcamera_1_1Camera_a4dce0183a1031b5a560167266cdfc7ef} 
\index{libcamera::Camera@{libcamera::Camera}!stop@{stop}}
\index{stop@{stop}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily int libcamera\+::\+Camera\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Stop capture from camera. 

This function stops capturing and processing requests immediately. All pending requests are cancelled and complete synchronously in an error state.

\textbackslash{}context This function may be called in any camera state as defined in \doxysectlink{classlibcamera_1_1Camera_camera_operation}{Operating the Camera}{1}, and shall be synchronized by the caller with other functions that affect the camera state. If called when the camera isn\textquotesingle{}t running, it is a no-\/op.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+ENODEV} & The camera has been disconnected from the system \\
\hline
{\em -\/\+EACCES} & The camera is not running so can\textquotesingle{}t be stopped \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1Camera_a0f56ce353e6d2e4db9d8ff1ae4db1b95}\label{classlibcamera_1_1Camera_a0f56ce353e6d2e4db9d8ff1ae4db1b95} 
\index{libcamera::Camera@{libcamera::Camera}!streams@{streams}}
\index{streams@{streams}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{streams()}{streams()}}
{\footnotesize\ttfamily const std\+::set$<$ \mbox{\hyperlink{classlibcamera_1_1Stream}{Stream}} \texorpdfstring{$\ast$}{*} $>$ \& libcamera\+::\+Camera\+::streams (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve all the camera\textquotesingle{}s stream information. 

Retrieve all of the camera\textquotesingle{}s static stream information. The static information describes among other things how many streams the camera supports and the capabilities of each stream.

\textbackslash{}context This function is \textbackslash{}threadsafe.

\begin{DoxyReturn}{Returns}
An array of all the camera\textquotesingle{}s streams 
\end{DoxyReturn}


\doxysubsection{Member Data Documentation}
\Hypertarget{classlibcamera_1_1Camera_ab4c410debecced9a862f856fa3005282}\label{classlibcamera_1_1Camera_ab4c410debecced9a862f856fa3005282} 
\index{libcamera::Camera@{libcamera::Camera}!disconnected@{disconnected}}
\index{disconnected@{disconnected}!libcamera::Camera@{libcamera::Camera}}
\doxysubsubsection{\texorpdfstring{disconnected}{disconnected}}
{\footnotesize\ttfamily libcamera\+::\+Camera\+::disconnected}



\doxylink{classlibcamera_1_1Signal}{Signal} emitted when the camera is disconnected from the system. 

This signal is emitted when libcamera detects that the camera has been removed from the system. For hot-\/pluggable devices this is usually caused by physical device disconnection. The media device is passed as a parameter.

As soon as this signal is emitted the camera instance will refuse all new application API calls by returning errors immediately. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/include/libcamera/\mbox{\hyperlink{libcamera_2camera_8h}{camera.\+h}}\item 
src/peripherals/camera/libcamera/src/libcamera/camera.\+cpp\end{DoxyCompactItemize}
