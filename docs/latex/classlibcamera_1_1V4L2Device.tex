\doxysection{libcamera\+::V4\+L2\+Device Class Reference}
\hypertarget{classlibcamera_1_1V4L2Device}{}\label{classlibcamera_1_1V4L2Device}\index{libcamera::V4L2Device@{libcamera::V4L2Device}}


Base class for \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} and \doxylink{classlibcamera_1_1V4L2Subdevice}{V4\+L2\+Subdevice}.  


Inheritance diagram for libcamera\+::V4\+L2\+Device\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classlibcamera_1_1V4L2Device}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a51eaec36a14fcf77950cbeeb6a69593d}{close}} ()
\begin{DoxyCompactList}\small\item\em Close the device node. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a1a1cbbf505ca93672c6f8086c2a9e3a0}{is\+Open}} () const
\begin{DoxyCompactList}\small\item\em Check if the V4\+L2 device node is open. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map}} \& \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a3da981578e5d7f23032bd902597c3a15}{controls}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the supported V4\+L2 controls and their information. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_aaaadfb4e56d3099f9a84fa0a7a3fec50}{get\+Controls}} (const std\+::vector$<$ uint32\+\_\+t $>$ \&ids)
\begin{DoxyCompactList}\small\item\em Read controls from the device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ab0485054b749a15cb5152cc751c81750}{set\+Controls}} (\mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \texorpdfstring{$\ast$}{*}ctrls)
\begin{DoxyCompactList}\small\item\em Write controls to the device. \end{DoxyCompactList}\item 
const struct \mbox{\hyperlink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794}{control\+Info}} (uint32\+\_\+t id) const
\begin{DoxyCompactList}\small\item\em Retrieve the \doxylink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl} information for the given control. \end{DoxyCompactList}\item 
const std\+::string \& \mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{device\+Node}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the device node path. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a8454df564fffa7ad160468709aa172ff}{device\+Path}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the device path in sysfs. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a22b82e6fa7c29f792c6458eba30fd135}{set\+Frame\+Start\+Enabled}} (bool enable)
\begin{DoxyCompactList}\small\item\em Enable or disable frame start event notification. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a52bc2f8287edb89748a1fc88c3b684ee}{update\+Control\+Info}} ()
\begin{DoxyCompactList}\small\item\em Update the information for all device controls. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlibcamera_1_1V4L2Device_a57ed50c44d1cd5c2cedab9b42e087e6c}\label{classlibcamera_1_1V4L2Device_a57ed50c44d1cd5c2cedab9b42e087e6c} 
\mbox{\hyperlink{classlibcamera_1_1Signal}{Signal}}$<$ uint32\+\_\+t $>$ {\bfseries frame\+Start}
\begin{DoxyCompactList}\small\item\em A \doxylink{classlibcamera_1_1Signal}{Signal} emitted when capture of a frame has started. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlibcamera_1_1V4L2Device_af2c3423ffe8a3333ea7c82018b49844d}{V4\+L2\+Device}} (const std\+::string \&\mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{device\+Node}})
\begin{DoxyCompactList}\small\item\em Construct a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device}. \end{DoxyCompactList}\item 
\Hypertarget{classlibcamera_1_1V4L2Device_a01e90d3566abf2e6299a31989d060f08}\label{classlibcamera_1_1V4L2Device_a01e90d3566abf2e6299a31989d060f08} 
{\bfseries \texorpdfstring{$\sim$}{\string~}\+V4\+L2\+Device} ()
\begin{DoxyCompactList}\small\item\em Destroy a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}{open}} (unsigned int flags)
\begin{DoxyCompactList}\small\item\em Open a V4\+L2 device node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ab5143b4bba37aea67885c61a2b3850d2}{set\+Fd}} (\mbox{\hyperlink{classlibcamera_1_1UniqueFD}{Unique\+FD}} \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82}{fd}})
\begin{DoxyCompactList}\small\item\em Set the file descriptor of a V4\+L2 device. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a34c8a36a4c3d22beb3bf173f7c498d2d}{ioctl}} (unsigned long request, void \texorpdfstring{$\ast$}{*}argp)
\begin{DoxyCompactList}\small\item\em Perform an IOCTL system call on the device node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82}{fd}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the V4\+L2 device file descriptor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classlibcamera_1_1Loggable}{libcamera\+::\+Loggable}}}
\begin{DoxyCompactItemize}
\item 
virtual std\+::string \mbox{\hyperlink{classlibcamera_1_1Loggable_a4cc48b0ae7215ceb4bfae6f192b2b3ee}{log\+Prefix}} () const =0
\begin{DoxyCompactList}\small\item\em Retrieve a string to be prefixed to the log message. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlibcamera_1_1LogMessage}{Log\+Message}} \mbox{\hyperlink{classlibcamera_1_1Loggable_a56b00f844b75b5d08cad898ed9c6181e}{\+\_\+log}} (const \mbox{\hyperlink{classlibcamera_1_1LogCategory}{Log\+Category}} \texorpdfstring{$\ast$}{*}category, \mbox{\hyperlink{namespacelibcamera_a68f26f5a54a5bb105f2e7422215a0ca3}{Log\+Severity}} severity, const char \texorpdfstring{$\ast$}{*}file\+Name=\+\_\+\+\_\+builtin\+\_\+\+FILE(), unsigned int line=\+\_\+\+\_\+builtin\+\_\+\+LINE()) const
\begin{DoxyCompactList}\small\item\em Create a temporary \doxylink{classlibcamera_1_1LogMessage}{Log\+Message} object to log a message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\static std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ \mbox{\hyperlink{classlibcamera_1_1V4L2Device_ac6fba98c260ee82f4d82c0da6a34166e}{to\+Color\+Space}} (const T \&v4l2\+Format, \mbox{\hyperlink{classlibcamera_1_1PixelFormatInfo_a021bf0e82baec37b1523baa3322dc23c}{Pixel\+Format\+Info\+::\+Colour\+Encoding}} colour\+Encoding)
\begin{DoxyCompactList}\small\item\em Convert the color space fields in a V4\+L2 format to a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\static int \mbox{\hyperlink{classlibcamera_1_1V4L2Device_a3b2d0bf205d45b91c6945018e92f3933}{from\+Color\+Space}} (const std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ \&color\+Space, T \&v4l2\+Format)
\begin{DoxyCompactList}\small\item\em Fill in the color space fields of a V4\+L2 format from a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Base class for \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} and \doxylink{classlibcamera_1_1V4L2Subdevice}{V4\+L2\+Subdevice}. 

The \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device} class groups together the functions and fields common to both the \doxylink{classlibcamera_1_1V4L2VideoDevice}{V4\+L2\+Video\+Device} and \doxylink{classlibcamera_1_1V4L2Subdevice}{V4\+L2\+Subdevice} classes, and provides a base class with functions to open and close the device node associated with the device and to perform IOCTL system calls on it.

The \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device} class cannot be instantiated directly, as its constructor is protected. Users should instead create instances of one the derived classes to model either a V4\+L2 video device or a V4\+L2 subdevice. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classlibcamera_1_1V4L2Device_af2c3423ffe8a3333ea7c82018b49844d}\label{classlibcamera_1_1V4L2Device_af2c3423ffe8a3333ea7c82018b49844d} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!V4L2Device@{V4L2Device}}
\index{V4L2Device@{V4L2Device}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{V4L2Device()}{V4L2Device()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Device\+::\+V4\+L2\+Device (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{device\+Node }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Construct a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em device\+Node} & The device node filesystem path\\
\hline
\end{DoxyParams}
Initialize the file descriptor to -\/1 and store the {\itshape device\+Node} to be used at \doxylink{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}{open()} time, and the {\itshape log\+Tag} to prefix log messages with. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classlibcamera_1_1V4L2Device_a51eaec36a14fcf77950cbeeb6a69593d}\label{classlibcamera_1_1V4L2Device_a51eaec36a14fcf77950cbeeb6a69593d} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!close@{close}}
\index{close@{close}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily void libcamera\+::\+V4\+L2\+Device\+::close (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Close the device node. 

Reset the file descriptor to -\/1 \Hypertarget{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794}\label{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!controlInfo@{controlInfo}}
\index{controlInfo@{controlInfo}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{controlInfo()}{controlInfo()}}
{\footnotesize\ttfamily const struct \mbox{\hyperlink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl}} \texorpdfstring{$\ast$}{*} libcamera\+::\+V4\+L2\+Device\+::control\+Info (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{id }\end{DoxyParamCaption}) const}



Retrieve the \doxylink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl} information for the given control. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em id} & The V4\+L2 control id \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to the \doxylink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl} structure for the given control, or a null pointer if not found 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a3da981578e5d7f23032bd902597c3a15}\label{classlibcamera_1_1V4L2Device_a3da981578e5d7f23032bd902597c3a15} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!controls@{controls}}
\index{controls@{controls}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{controls()}{controls()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Device\+::controls (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the supported V4\+L2 controls and their information. 

\begin{DoxyReturn}{Returns}
A map of the V4\+L2 controls supported by the device 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}\label{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!deviceNode@{deviceNode}}
\index{deviceNode@{deviceNode}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{deviceNode()}{deviceNode()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Device\+::device\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the device node path. 

\begin{DoxyReturn}{Returns}
The device node path 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a8454df564fffa7ad160468709aa172ff}\label{classlibcamera_1_1V4L2Device_a8454df564fffa7ad160468709aa172ff} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!devicePath@{devicePath}}
\index{devicePath@{devicePath}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{devicePath()}{devicePath()}}
{\footnotesize\ttfamily std\+::string libcamera\+::\+V4\+L2\+Device\+::device\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the device path in sysfs. 

This function returns the sysfs path to the physical device backing the V4\+L2 device. The path is guaranteed to be an absolute path, without any symbolic link.

It includes the sysfs mount point prefix

\begin{DoxyReturn}{Returns}
The device path in sysfs 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82}\label{classlibcamera_1_1V4L2Device_a6b77845cf4b1eddcfc8fdeabf1795f82} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!fd@{fd}}
\index{fd@{fd}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{fd()}{fd()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Device\+::fd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Retrieve the V4\+L2 device file descriptor. 

\begin{DoxyReturn}{Returns}
The V4\+L2 device file descriptor, -\/1 if the device node is not open 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a3b2d0bf205d45b91c6945018e92f3933}\label{classlibcamera_1_1V4L2Device_a3b2d0bf205d45b91c6945018e92f3933} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!fromColorSpace@{fromColorSpace}}
\index{fromColorSpace@{fromColorSpace}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{fromColorSpace()}{fromColorSpace()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
template int libcamera\+::\+V4\+L2\+Device\+::from\+Color\+Space (\begin{DoxyParamCaption}\item[{const std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ \&}]{color\+Space,  }\item[{T \&}]{v4l2\+Format }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}



Fill in the color space fields of a V4\+L2 format from a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em color\+Space} & The \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space} to be converted \\
\hline
\mbox{\texttt{ out}}  & {\em v4l2\+Format} & A V4\+L2 format containing color space information\\
\hline
\end{DoxyParams}
The colorspace, ycbcr\+\_\+enc, xfer\+\_\+func and quantization fields within a V4\+L2 format structure are filled in from a corresponding \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}.

An error is returned if any of the V4\+L2 fields do not support the value given in the \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. Such fields are set to the V4\+L2 "{}default"{} values, but all other fields are still filled in where possible.

If the color space is completely unset, "{}default"{} V4\+L2 values are used everywhere, so a driver would then choose its preferred color space.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EINVAL} & The \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space} does not have a representation using V4\+L2 enums \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2Device_aaaadfb4e56d3099f9a84fa0a7a3fec50}\label{classlibcamera_1_1V4L2Device_aaaadfb4e56d3099f9a84fa0a7a3fec50} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!getControls@{getControls}}
\index{getControls@{getControls}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{getControls()}{getControls()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} libcamera\+::\+V4\+L2\+Device\+::get\+Controls (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ uint32\+\_\+t $>$ \&}]{ids }\end{DoxyParamCaption})}



Read controls from the device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ids} & The list of controls to read, specified by their ID\\
\hline
\end{DoxyParams}
This function reads the value of all controls contained in {\itshape ids}, and returns their values as a \doxylink{classlibcamera_1_1ControlList}{Control\+List}.

If any control in {\itshape ids} is not supported by the device, is disabled (i.\+e. has the V4\+L2\+\_\+\+CTRL\+\_\+\+FLAG\+\_\+\+DISABLED flag set), or if any other error occurs during validation of the requested controls, no control is read and this function returns an empty control list.

\begin{DoxyReturn}{Returns}
The control values in a \doxylink{classlibcamera_1_1ControlList}{Control\+List} on success, or an empty list on error 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a34c8a36a4c3d22beb3bf173f7c498d2d}\label{classlibcamera_1_1V4L2Device_a34c8a36a4c3d22beb3bf173f7c498d2d} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!ioctl@{ioctl}}
\index{ioctl@{ioctl}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{ioctl()}{ioctl()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Device\+::ioctl (\begin{DoxyParamCaption}\item[{unsigned long}]{request,  }\item[{void \texorpdfstring{$\ast$}{*}}]{argp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Perform an IOCTL system call on the device node. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em request} & The IOCTL request code \\
\hline
\mbox{\texttt{ in}}  & {\em argp} & A pointer to the IOCTL argument \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a1a1cbbf505ca93672c6f8086c2a9e3a0}\label{classlibcamera_1_1V4L2Device_a1a1cbbf505ca93672c6f8086c2a9e3a0} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!isOpen@{isOpen}}
\index{isOpen@{isOpen}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{isOpen()}{isOpen()}}
{\footnotesize\ttfamily libcamera\+::\+V4\+L2\+Device\+::is\+Open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Check if the V4\+L2 device node is open. 

\begin{DoxyReturn}{Returns}
True if the V4\+L2 device node is open, false otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}\label{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!open@{open}}
\index{open@{open}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{open()}{open()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Device\+::open (\begin{DoxyParamCaption}\item[{unsigned int}]{flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Open a V4\+L2 device node. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em flags} & Access mode flags\\
\hline
\end{DoxyParams}
Open the device node path with the provided access mode {\itshape flags} and initialize the file descriptor, which was initially set to -\/1.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_ab0485054b749a15cb5152cc751c81750}\label{classlibcamera_1_1V4L2Device_ab0485054b749a15cb5152cc751c81750} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!setControls@{setControls}}
\index{setControls@{setControls}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{setControls()}{setControls()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Device\+::set\+Controls (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1ControlList}{Control\+List}} \texorpdfstring{$\ast$}{*}}]{ctrls }\end{DoxyParamCaption})}



Write controls to the device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ctrls} & The list of controls to write\\
\hline
\end{DoxyParams}
This function writes the value of all controls contained in {\itshape ctrls}, and stores the values actually applied to the device in the corresponding {\itshape ctrls} entry.

If any control in {\itshape ctrls} is not supported by the device, is disabled (i.\+e. has the V4\+L2\+\_\+\+CTRL\+\_\+\+FLAG\+\_\+\+DISABLED flag set), is read-\/only, if any other error occurs during validation of the requested controls, no control is written and this function returns -\/EINVAL.

If an error occurs while writing the controls, the index of the first control that couldn\textquotesingle{}t be written is returned. All controls below that index are written and their values are updated in {\itshape ctrls}, while all other controls are not written and their values are not changed.

\begin{DoxyReturn}{Returns}
0 on success or an error code otherwise 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em -\/\+EINVAL} & One of the control is not supported or not accessible \\
\hline
{\em i} & The index of the control that failed \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2Device_ab5143b4bba37aea67885c61a2b3850d2}\label{classlibcamera_1_1V4L2Device_ab5143b4bba37aea67885c61a2b3850d2} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!setFd@{setFd}}
\index{setFd@{setFd}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{setFd()}{setFd()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Device\+::set\+Fd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlibcamera_1_1UniqueFD}{Unique\+FD}}}]{fd }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Set the file descriptor of a V4\+L2 device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fd} & The file descriptor handle\\
\hline
\end{DoxyParams}
This function allows a device to provide an already opened file descriptor referring to the V4\+L2 device node, instead of opening it with \doxylink{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}{open()}. This can be used for V4\+L2 M2M devices where a single video device node is used for both the output and capture devices, or when receiving an open file descriptor in a context that doesn\textquotesingle{}t have permission to open the device node itself.

This function and the \doxylink{classlibcamera_1_1V4L2Device_a5cdee8ca74669a21480dbce6568551ec}{open()} function are mutually exclusive, only one of the two shall be used for a \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device} instance.

\begin{DoxyReturn}{Returns}
0 on success or a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_a22b82e6fa7c29f792c6458eba30fd135}\label{classlibcamera_1_1V4L2Device_a22b82e6fa7c29f792c6458eba30fd135} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!setFrameStartEnabled@{setFrameStartEnabled}}
\index{setFrameStartEnabled@{setFrameStartEnabled}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{setFrameStartEnabled()}{setFrameStartEnabled()}}
{\footnotesize\ttfamily int libcamera\+::\+V4\+L2\+Device\+::set\+Frame\+Start\+Enabled (\begin{DoxyParamCaption}\item[{bool}]{enable }\end{DoxyParamCaption})}



Enable or disable frame start event notification. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em enable} & True to enable frame start events, false to disable them\\
\hline
\end{DoxyParams}
This function enables or disables generation of frame start events. Once enabled, the events are signalled through the frame\+Start signal.

\begin{DoxyReturn}{Returns}
0 on success, a negative error code otherwise 
\end{DoxyReturn}
\Hypertarget{classlibcamera_1_1V4L2Device_ac6fba98c260ee82f4d82c0da6a34166e}\label{classlibcamera_1_1V4L2Device_ac6fba98c260ee82f4d82c0da6a34166e} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!toColorSpace@{toColorSpace}}
\index{toColorSpace@{toColorSpace}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{toColorSpace()}{toColorSpace()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
template std\+::optional$<$ \mbox{\hyperlink{classlibcamera_1_1ColorSpace}{Color\+Space}} $>$ libcamera\+::\+V4\+L2\+Device\+::to\+Color\+Space (\begin{DoxyParamCaption}\item[{const T \&}]{v4l2\+Format,  }\item[{\mbox{\hyperlink{classlibcamera_1_1PixelFormatInfo_a021bf0e82baec37b1523baa3322dc23c}{Pixel\+Format\+Info\+::\+Colour\+Encoding}}}]{colour\+Encoding }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}



Convert the color space fields in a V4\+L2 format to a \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em v4l2\+Format} & A V4\+L2 format containing color space information \\
\hline
\mbox{\texttt{ in}}  & {\em colour\+Encoding} & Type of colour encoding\\
\hline
\end{DoxyParams}
The colorspace, ycbcr\+\_\+enc, xfer\+\_\+func and quantization fields within a V4\+L2 format structure are converted to a corresponding \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space}.

If any V4\+L2 fields are not recognised then we return an "{}unset"{} color space.

\begin{DoxyReturn}{Returns}
The \doxylink{classlibcamera_1_1ColorSpace}{Color\+Space} corresponding to the input V4\+L2 format 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em std\+::nullopt} & One or more V4\+L2 color space fields were not recognised \\
\hline
\end{DoxyRetVals}
\Hypertarget{classlibcamera_1_1V4L2Device_a52bc2f8287edb89748a1fc88c3b684ee}\label{classlibcamera_1_1V4L2Device_a52bc2f8287edb89748a1fc88c3b684ee} 
\index{libcamera::V4L2Device@{libcamera::V4L2Device}!updateControlInfo@{updateControlInfo}}
\index{updateControlInfo@{updateControlInfo}!libcamera::V4L2Device@{libcamera::V4L2Device}}
\doxysubsubsection{\texorpdfstring{updateControlInfo()}{updateControlInfo()}}
{\footnotesize\ttfamily void libcamera\+::\+V4\+L2\+Device\+::update\+Control\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Update the information for all device controls. 

The \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device} class caches information about all controls supported by the device and exposes it through the controls() and \doxylink{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794}{control\+Info()} functions. \doxylink{classlibcamera_1_1Control}{Control} information may change at runtime, for instance when formats on a subdev are modified. When this occurs, this function can be used to refresh control information. The information is refreshed in-\/place, all pointers to \doxylink{structv4l2__query__ext__ctrl}{v4l2\+\_\+query\+\_\+ext\+\_\+ctrl} instances previously returned by \doxylink{classlibcamera_1_1V4L2Device_acf0ec992186e2a248c810e9c42bd5794}{control\+Info()} and iterators to the \doxylink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map} returned by controls() remain valid.

Note that control information isn\textquotesingle{}t refreshed automatically is it may be an expensive operation. The \doxylink{classlibcamera_1_1V4L2Device}{V4\+L2\+Device} users are responsible for calling this function when required, based on their usage pattern of the class. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/include/libcamera/internal/\mbox{\hyperlink{v4l2__device_8h}{v4l2\+\_\+device.\+h}}\item 
src/peripherals/camera/libcamera/src/libcamera/v4l2\+\_\+device.\+cpp\end{DoxyCompactItemize}
