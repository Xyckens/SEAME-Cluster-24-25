\doxysection{device\+\_\+enumerator\+\_\+udev.\+h}
\hypertarget{device__enumerator__udev_8h_source}{}\label{device__enumerator__udev_8h_source}\index{src/peripherals/camera/libcamera/include/libcamera/internal/device\_enumerator\_udev.h@{src/peripherals/camera/libcamera/include/libcamera/internal/device\_enumerator\_udev.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ SPDX-\/License-\/Identifier:\ LGPL-\/2.1-\/or-\/later\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2018-\/2019,\ Google\ Inc.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ udev-\/based\ device\ enumerator}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <list>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <set>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <sys/types.h>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{device__enumerator_8h}{libcamera/internal/device\_enumerator.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{struct\ }udev;}
\DoxyCodeLine{00020\ \textcolor{keyword}{struct\ }udev\_device;}
\DoxyCodeLine{00021\ \textcolor{keyword}{struct\ }udev\_monitor;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelibcamera}{libcamera}}\ \{}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }EventNotifier;}
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }MediaDevice;}
\DoxyCodeLine{00027\ \textcolor{keyword}{class\ }MediaEntity;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1DeviceEnumeratorUdev}{DeviceEnumeratorUdev}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classlibcamera_1_1DeviceEnumerator}{DeviceEnumerator}}}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1DeviceEnumeratorUdev}{DeviceEnumeratorUdev}}();}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1DeviceEnumeratorUdev}{\string~DeviceEnumeratorUdev}}();}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1DeviceEnumeratorUdev_aae2f67061798eb1414432beff8061c47}{init}}();}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1DeviceEnumeratorUdev_a62be68b010f4e2051d8f30e99006e4e2}{enumerate}}();}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{using\ }DependencyMap\ =\ std::map<dev\_t,\ std::list<MediaEntity\ *>>;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{struct\ }MediaDeviceDeps\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ MediaDeviceDeps(std::unique\_ptr<MediaDevice>\ media,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DependencyMap\ deps)}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ :\ media\_(std::move(media)),\ deps\_(std::move(deps))}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacelibcamera_a9a4ec66aa71938514d43ab027fe308db}{operator==}}(\textcolor{keyword}{const}\ MediaDeviceDeps\ \&other)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00049\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ media\_\ ==\ other.media\_;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ std::unique\_ptr<MediaDevice>\ media\_;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ DependencyMap\ deps\_;}
\DoxyCodeLine{00055\ \ \ \ \ \};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{int}\ addUdevDevice(\textcolor{keyword}{struct}\ udev\_device\ *dev);}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{int}\ populateMediaDevice(\mbox{\hyperlink{classlibcamera_1_1MediaDevice}{MediaDevice}}\ *media,\ DependencyMap\ *deps);}
\DoxyCodeLine{00059\ \ \ \ \ std::string\ lookupDeviceNode(dev\_t\ devnum);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{int}\ addV4L2Device(dev\_t\ devnum);}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ udevNotify();}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{struct\ }udev\ *udev\_;}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{struct\ }udev\_monitor\ *monitor\_;}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1EventNotifier}{EventNotifier}}\ *notifier\_;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ std::set<dev\_t>\ orphans\_;}
\DoxyCodeLine{00069\ \ \ \ \ std::list<MediaDeviceDeps>\ pending\_;}
\DoxyCodeLine{00070\ \ \ \ \ std::map<dev\_t,\ MediaDeviceDeps\ *>\ devMap\_;}
\DoxyCodeLine{00071\ \};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \}\ \textcolor{comment}{/*\ namespace\ libcamera\ */}}

\end{DoxyCode}
