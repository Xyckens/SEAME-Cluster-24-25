\doxysection{Options\+Parser Class Reference}
\hypertarget{classOptionsParser}{}\label{classOptionsParser}\index{OptionsParser@{OptionsParser}}


A command line options parser.  


\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classOptionsParser_1_1Options}{Options}}
\begin{DoxyCompactList}\small\item\em An option list generated by the options parser. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classOptionsParser_ad2a4f00cc2c8f9d3f05c9db1b66f4f06}{add\+Option}} (int opt, Option\+Type type, const char \texorpdfstring{$\ast$}{*}help, const char \texorpdfstring{$\ast$}{*}name=nullptr, Option\+Argument argument=Argument\+None, const char \texorpdfstring{$\ast$}{*}argument\+Name=nullptr, bool array=false, int parent=0)
\begin{DoxyCompactList}\small\item\em Add an option to the parser. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classOptionsParser_a9325a56c7fa64c135fc4638642926db5}{add\+Option}} (int opt, \mbox{\hyperlink{classKeyValueParser}{Key\+Value\+Parser}} \texorpdfstring{$\ast$}{*}parser, const char \texorpdfstring{$\ast$}{*}help, const char \texorpdfstring{$\ast$}{*}name=nullptr, bool array=false, int parent=0)
\begin{DoxyCompactList}\small\item\em Add a key-\/value pair option to the parser. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classOptionsParser_1_1Options}{Options}} \mbox{\hyperlink{classOptionsParser_a7beaaf4a0aee77ffe169e4f7651b9493}{parse}} (int argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Parse command line arguments. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classOptionsParser_a98f087d3db320363318c858bd6ec92ce}{usage}} ()
\begin{DoxyCompactList}\small\item\em Print usage text to std\+::cerr. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A command line options parser. 

The \doxylink{classOptionsParser}{Options\+Parser} class is an easy to use options parser for POSIX-\/style command line options. Supports short (e.\+g. {\ttfamily -\/f}) and long (e.\+g. {\ttfamily -\/-\/foo}) options, optional and mandatory arguments, automatic parsing arguments for integer types and comma-\/separated list of key=value pairs, and multi-\/value arguments. It handles help text generation automatically.

An \doxylink{classOptionsParser}{Options\+Parser} instance is initialized by adding supported options with \doxylink{classOptionsParser_ad2a4f00cc2c8f9d3f05c9db1b66f4f06}{add\+Option()}. \doxylink{classOptionsParser_1_1Options}{Options} are specified by an identifier and a name. If the identifier is an alphanumeric character, it will be used by the parser as a short option identifier (e.\+g. {\ttfamily -\/f}). The name, if specified, will be used as a long option identifier (e.\+g. {\ttfamily -\/-\/foo}). It should not include the double dashes. The name is optional if the option identifier is an alphanumeric character and mandatory otherwise.

An option has a mandatory help text, which is used to print the full options list with the \doxylink{classOptionsParser_a98f087d3db320363318c858bd6ec92ce}{usage()} function. The help text may be a multi-\/line string. Correct indentation of the help text is handled automatically.

\doxylink{classOptionsParser_1_1Options}{Options} accept arguments when created with Option\+Argument\+::\+Argument\+Required or Option\+Argument\+::\+Argument\+Optional. If the argument is required, it can be specified as a positional argument after the option (e.\+g. {\ttfamily -\/f bar}, {\ttfamily -\/-\/foo bar}), collated with the short option (e.\+g. {\ttfamily -\/fbar}) or separated from the long option by an equal sign (e.\+g. {\ttfamily -\/-\/foo=bar}\textquotesingle{}). When the argument is optional, it must be collated with the short option or separated from the long option by an equal sign.

If an option has a required or optional argument, an argument name must be set when adding the option. The argument name is used in the help text as a place holder for an argument value. For instance, a {\ttfamily -\/-\/write} option that takes a file name as an argument could set the argument name to {\ttfamily filename}, and the help text would display {\ttfamily -\/-\/write filename}. This is only used to clarify the help text and has no effect on option parsing.

The option type tells the parser how to process the argument. Arguments for string options (Option\+Type\+::\+Option\+String) are stored as-\/is without any processing. Arguments for integer options (Option\+Type\+::\+Option\+Integer) are converted to an integer value, using an optional base prefix ({\ttfamily 0} for base 8, {\ttfamily 0x} for base 16, none for base 10). Arguments for key-\/value options are parsed by a \doxylink{classKeyValueParser}{Key\+Value\+Parser} given to \doxylink{classOptionsParser_ad2a4f00cc2c8f9d3f05c9db1b66f4f06}{add\+Option()}.

By default, a given option can appear once only in the parsed command line. If the option is created as an array option, the parser will accept multiple instances of the option. The order in which identical options are specified is preserved in the values of an array option.

After preparing the parser, it can be used any number of times to parse command line options with the \doxylink{classOptionsParser_a7beaaf4a0aee77ffe169e4f7651b9493}{parse()} function. The function returns an \doxylink{classOptionsParser_1_1Options}{Options} instance that stores the values for the parsed options. The \doxylink{classOptionsBase_a5cd5215b620f790a7f75e9a00b3caf9d}{Options\+::is\+Set()} function can be used to test if an option has been found, and is the only way to access options that take no argument (specified by Option\+Type\+::\+Option\+None and Option\+Argument\+::\+Argument\+None). For options that accept an argument, the option value can be access by \doxylink{classOptionsBase_a1a40faceadc5b6b416c05ebbc249cd16}{Options\+::operator\mbox{[}$\,$\mbox{]}()} using the option identifier as the key. The order in which different options are specified on the command line isn\textquotesingle{}t preserved.

\doxylink{classOptionsParser_1_1Options}{Options} can be created with parent-\/child relationships to organize them as a tree instead of a flat list. When parsing a command line, the child options are considered related to the parent option that precedes them. This is useful when the parent is an array option. The \doxylink{classOptionsParser_1_1Options}{Options} values list generated by the parser then turns into a tree, which each parent value storing the values of child options that follow that instance of the parent option. For instance, with a {\ttfamily capture} option specified as a child of a {\ttfamily camera} array option, parsing the command line

{\ttfamily -\/-\/camera 1 -\/-\/capture=10 -\/-\/camera 2 -\/-\/capture=20}

will return an \doxylink{classOptionsParser_1_1Options}{Options} instance containing a single \doxylink{classOptionValue}{Option\+Value} instance of array type, for the {\ttfamily camera} option. The \doxylink{classOptionValue}{Option\+Value} will contain two entries, with the first entry containing the integer value 1 and the second entry the integer value 2. Each of those entries will in turn store an \doxylink{classOptionsParser_1_1Options}{Options} instance that contains the respective children. The first entry will store in its children a {\ttfamily capture} option of value 10, and the second entry a {\ttfamily capture} option of value 20.

The command line

{\ttfamily -\/-\/capture=10 -\/-\/camera 1}

would result in a parsing error, as the {\ttfamily capture} option has no preceding {\ttfamily camera} option on the command line. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classOptionsParser_a9325a56c7fa64c135fc4638642926db5}\label{classOptionsParser_a9325a56c7fa64c135fc4638642926db5} 
\index{OptionsParser@{OptionsParser}!addOption@{addOption}}
\index{addOption@{addOption}!OptionsParser@{OptionsParser}}
\doxysubsubsection{\texorpdfstring{addOption()}{addOption()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool Options\+Parser\+::add\+Option (\begin{DoxyParamCaption}\item[{int}]{opt,  }\item[{\mbox{\hyperlink{classKeyValueParser}{Key\+Value\+Parser}} \texorpdfstring{$\ast$}{*}}]{parser,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{help,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{name = {\ttfamily nullptr},  }\item[{bool}]{array = {\ttfamily false},  }\item[{int}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}



Add a key-\/value pair option to the parser. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em opt} & The option identifier \\
\hline
\mbox{\texttt{ in}}  & {\em parser} & The \doxylink{classKeyValueParser}{Key\+Value\+Parser} for the option value \\
\hline
\mbox{\texttt{ in}}  & {\em help} & The help text (may be a multi-\/line string) \\
\hline
\mbox{\texttt{ in}}  & {\em name} & The option name \\
\hline
\mbox{\texttt{ in}}  & {\em array} & Whether the option can appear once or multiple times\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxylink{structOption}{Option}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
True if the option was added successfully, false if an error occurred. 
\end{DoxyReturn}
\Hypertarget{classOptionsParser_ad2a4f00cc2c8f9d3f05c9db1b66f4f06}\label{classOptionsParser_ad2a4f00cc2c8f9d3f05c9db1b66f4f06} 
\index{OptionsParser@{OptionsParser}!addOption@{addOption}}
\index{addOption@{addOption}!OptionsParser@{OptionsParser}}
\doxysubsubsection{\texorpdfstring{addOption()}{addOption()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Options\+Parser\+::add\+Option (\begin{DoxyParamCaption}\item[{int}]{opt,  }\item[{Option\+Type}]{type,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{help,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{name = {\ttfamily nullptr},  }\item[{Option\+Argument}]{argument = {\ttfamily ArgumentNone},  }\item[{const char \texorpdfstring{$\ast$}{*}}]{argument\+Name = {\ttfamily nullptr},  }\item[{bool}]{array = {\ttfamily false},  }\item[{int}]{parent = {\ttfamily 0} }\end{DoxyParamCaption})}



Add an option to the parser. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em opt} & The option identifier \\
\hline
\mbox{\texttt{ in}}  & {\em type} & The type of the option argument \\
\hline
\mbox{\texttt{ in}}  & {\em help} & The help text (may be a multi-\/line string) \\
\hline
\mbox{\texttt{ in}}  & {\em name} & The option name \\
\hline
\mbox{\texttt{ in}}  & {\em argument} & Whether the option accepts an optional argument, a mandatory argument, or no argument at all \\
\hline
\mbox{\texttt{ in}}  & {\em argument\+Name} & The argument name used in the help text \\
\hline
\mbox{\texttt{ in}}  & {\em array} & Whether the option can appear once or multiple times \\
\hline
\mbox{\texttt{ in}}  & {\em parent} & The identifier of the parent option (optional)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the option was added successfully, false if an error occurred. 
\end{DoxyReturn}
\Hypertarget{classOptionsParser_a7beaaf4a0aee77ffe169e4f7651b9493}\label{classOptionsParser_a7beaaf4a0aee77ffe169e4f7651b9493} 
\index{OptionsParser@{OptionsParser}!parse@{parse}}
\index{parse@{parse}!OptionsParser@{OptionsParser}}
\doxysubsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classOptionsParser_1_1Options}{Options\+Parser\+::\+Options}} Options\+Parser\+::parse (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char \texorpdfstring{$\ast$}{*}}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Parse command line arguments. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em argc} & The number of arguments in the {\itshape argv} array \\
\hline
\mbox{\texttt{ in}}  & {\em argv} & The array of arguments\\
\hline
\end{DoxyParams}
If a parsing error occurs, the parsing stops, the function prints an error message that identifies the invalid argument, prints usage information with \doxylink{classOptionsParser_a98f087d3db320363318c858bd6ec92ce}{usage()}, and returns an invalid container. The container is populated with the options successfully parsed so far.

\begin{DoxyReturn}{Returns}
A valid container with the list of parsed options on success, or an invalid container otherwise 
\end{DoxyReturn}
\Hypertarget{classOptionsParser_a98f087d3db320363318c858bd6ec92ce}\label{classOptionsParser_a98f087d3db320363318c858bd6ec92ce} 
\index{OptionsParser@{OptionsParser}!usage@{usage}}
\index{usage@{usage}!OptionsParser@{OptionsParser}}
\doxysubsubsection{\texorpdfstring{usage()}{usage()}}
{\footnotesize\ttfamily void Options\+Parser\+::usage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Print usage text to std\+::cerr. 

The usage text list all the supported option with their arguments. It is generated automatically from the options added to the parser. Caller of this function may print additional usage information for the application before the list of options. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/src/apps/common/options.\+h\item 
src/peripherals/camera/libcamera/src/apps/common/options.\+cpp\end{DoxyCompactItemize}
