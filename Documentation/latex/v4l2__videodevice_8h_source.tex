\doxysection{v4l2\+\_\+videodevice.\+h}
\hypertarget{v4l2__videodevice_8h_source}{}\label{v4l2__videodevice_8h_source}\index{src/peripherals/camera/libcamera/include/libcamera/internal/v4l2\_videodevice.h@{src/peripherals/camera/libcamera/include/libcamera/internal/v4l2\_videodevice.h}}
\mbox{\hyperlink{v4l2__videodevice_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ SPDX-\/License-\/Identifier:\ LGPL-\/2.1-\/or-\/later\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2019,\ Google\ Inc.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ V4L2\ Video\ Device}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <array>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <ostream>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <unordered\_set>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <linux/videodev2.h>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{class_8h}{libcamera/base/class.h}}>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{libcamera_2base_2log_8h}{libcamera/base/log.h}}>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{signal_8h}{libcamera/base/signal.h}}>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{timer_8h}{libcamera/base/timer.h}}>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{unique__fd_8h}{libcamera/base/unique\_fd.h}}>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{include_2libcamera_2base_2utils_8h}{libcamera/base/utils.h}}>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{color__space_8h}{libcamera/color\_space.h}}>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{framebuffer_8h}{libcamera/framebuffer.h}}>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{geometry_8h}{libcamera/geometry.h}}>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pixel__format_8h}{libcamera/pixel\_format.h}}>}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{formats_8h}{libcamera/internal/formats.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{v4l2__device_8h}{libcamera/internal/v4l2\_device.h}}"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{v4l2__pixelformat_8h}{libcamera/internal/v4l2\_pixelformat.h}}"{}}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelibcamera}{libcamera}}\ \{}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }EventNotifier;}
\DoxyCodeLine{00041\ \textcolor{keyword}{class\ }MediaDevice;}
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }MediaEntity;}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlibcamera_1_1V4L2Capability}{V4L2Capability}}\ final\ :\ \mbox{\hyperlink{structv4l2__capability}{v4l2\_capability}}\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_af5bfc87374dd6370f477630018c4f17d}{driver}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00046\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(v4l2\_capability::driver);}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_ade60e3829a1ce481e855fda371cb9378}{card}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00050\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(v4l2\_capability::card);}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_ac8675a267d9d033472949919ebaa03b4}{bus\_info}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00054\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(v4l2\_capability::bus\_info);}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00058\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ capabilities\ \&\ V4L2\_CAP\_DEVICE\_CAPS}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ v4l2\_capability::device\_caps}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ v4l2\_capability::capabilities;}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a829228f245f2dbf5cf459ac835ae4a57}{isMultiplanar}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00064\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_VIDEO\_CAPTURE\_MPLANE\ |}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_OUTPUT\_MPLANE\ |}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_M2M\_MPLANE);}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a9d326af2e555d0163a075f1cb7ad370f}{isCapture}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00070\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_VIDEO\_CAPTURE\ |}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_CAPTURE\_MPLANE\ |}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_META\_CAPTURE);}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a5c15e6d25fde9647800f127479ac2a0a}{isOutput}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00076\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_VIDEO\_OUTPUT\ |}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_OUTPUT\_MPLANE\ |}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_META\_OUTPUT);}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_aedf0a22d9a7264024d2014a3f882654d}{isVideo}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00082\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_VIDEO\_CAPTURE\ |}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_CAPTURE\_MPLANE\ |}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_OUTPUT\ |}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_OUTPUT\_MPLANE);}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a21a56a14f0ebb93c3533723a17669343}{isM2M}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00089\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_VIDEO\_M2M\ |}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_VIDEO\_M2M\_MPLANE);}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a83c1c4b0afe3830be2802bca48c80373}{isMeta}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00094\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ (V4L2\_CAP\_META\_CAPTURE\ |}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ V4L2\_CAP\_META\_OUTPUT);}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a7d07653677f3b7a388adc67b7a2df97c}{isVideoCapture}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00099\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_aedf0a22d9a7264024d2014a3f882654d}{isVideo}}()\ \&\&\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a9d326af2e555d0163a075f1cb7ad370f}{isCapture}}();}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a2148af792741c0a2905e1c97e47f39ff}{isVideoOutput}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00103\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_aedf0a22d9a7264024d2014a3f882654d}{isVideo}}()\ \&\&\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a5c15e6d25fde9647800f127479ac2a0a}{isOutput}}();}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a3c25bd36a4a2620d75facc7fb9525940}{isMetaCapture}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00107\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a83c1c4b0afe3830be2802bca48c80373}{isMeta}}()\ \&\&\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a9d326af2e555d0163a075f1cb7ad370f}{isCapture}}();}
\DoxyCodeLine{00109\ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_aaf966bff66d2a689b03590a625804779}{isMetaOutput}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00111\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a83c1c4b0afe3830be2802bca48c80373}{isMeta}}()\ \&\&\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a5c15e6d25fde9647800f127479ac2a0a}{isOutput}}();}
\DoxyCodeLine{00113\ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1345dace1f7c5fc6729564ddbb1a8b7a}{hasStreaming}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00115\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ V4L2\_CAP\_STREAMING;}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a4d17a343fcc05c9480ab2b886de0506f}{hasMediaController}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00119\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability_a1cf2d35fb81f2a3d1c03eac880d98416}{device\_caps}}()\ \&\ V4L2\_CAP\_IO\_MC;}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ \};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache}{V4L2BufferCache}}}
\DoxyCodeLine{00125\ \{}
\DoxyCodeLine{00126\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache}{V4L2BufferCache}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ numEntries);}
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache}{V4L2BufferCache}}(\textcolor{keyword}{const}\ std::vector<std::unique\_ptr<FrameBuffer>>\ \&buffers);}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache}{\string~V4L2BufferCache}}();}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache_a4e21a0ffb5ddcceef741f8469e49bb25}{isEmpty}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache_a3d9dba272a22e92dca0dcbf55097ded3}{get}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{FrameBuffer}}\ \&buffer);}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache_a561f0eee632e4a465f1813abe29abdea}{put}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{class\ }Entry}
\DoxyCodeLine{00137\ \ \ \ \ \{}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ Entry();}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ Entry(\textcolor{keywordtype}{bool}\ free,\ uint64\_t\ lastUsed,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{FrameBuffer}}\ \&buffer);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacelibcamera_a9a4ec66aa71938514d43ab027fe308db}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{FrameBuffer}}\ \&buffer)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ free\_;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ uint64\_t\ lastUsed\_;}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }Plane\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ Plane(\textcolor{keyword}{const}\ \mbox{\hyperlink{structlibcamera_1_1FrameBuffer_1_1Plane}{FrameBuffer::Plane}}\ \&plane)}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ fd(plane.\mbox{\hyperlink{structlibcamera_1_1FrameBuffer_1_1Plane_ac938f50358c7eb5ee656ec5bced0f537}{fd}}.\mbox{\hyperlink{classlibcamera_1_1SharedFD_a3b6f9504b5407aa9b19a7a20f2f9497b}{get}}()),\ length(plane.\mbox{\hyperlink{structlibcamera_1_1FrameBuffer_1_1Plane_a0a28cdf7cac9b4a7a4f44b20aa9d3111}{length}})}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ fd;}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ length;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ std::vector<Plane>\ planes\_;}
\DoxyCodeLine{00159\ \ \ \ \ \};}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ std::atomic<uint64\_t>\ lastUsedCounter\_;}
\DoxyCodeLine{00162\ \ \ \ \ std::vector<Entry>\ cache\_;}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{/*\ \(\backslash\)todo\ Expose\ the\ miss\ counter\ through\ an\ instrumentation\ API.\ */}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ missCounter\_;}
\DoxyCodeLine{00165\ \};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}}
\DoxyCodeLine{00168\ \{}
\DoxyCodeLine{00169\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlibcamera_1_1V4L2DeviceFormat_1_1Plane}{Plane}}\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structlibcamera_1_1V4L2DeviceFormat_1_1Plane_a0de8db4ecd8e30429421ca6c2f88d9a8}{size}}\ =\ 0;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structlibcamera_1_1V4L2DeviceFormat_1_1Plane_a8cf8e13358d627d4a1a7c8fd15895766}{bpl}}\ =\ 0;}
\DoxyCodeLine{00173\ \ \ \ \ \};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4L2PixelFormat}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_a1d9f472f571be3791f70e4cf44daae82}{fourcc}};}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1Size}{Size}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_aa092819d6b6ca9e8caa0e4a83390b72e}{size}};}
\DoxyCodeLine{00177\ \ \ \ \ std::optional<ColorSpace>\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_ad587e1cdee8d6075e7c57294125c0219}{colorSpace}};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ std::array<Plane,\ 3>\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_a8fbfab032fb2fdcc2112d3cbea4ef284}{planes}};}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_ae6973964a92da4100ebe978de03a05c9}{planesCount}}\ =\ 0;}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat_a2b6c40ca15c05fdbcf2f9555027e7b16}{toString}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00183\ \};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ std::ostream\ \&operator<<(std::ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ \&f);}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classlibcamera_1_1V4L2Device}{V4L2Device}}}
\DoxyCodeLine{00188\ \{}
\DoxyCodeLine{00189\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b}{Formats}}\ =\ std::map<V4L2PixelFormat,\ std::vector<SizeRange>>;}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}(\textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classlibcamera_1_1V4L2Device_afa2ad0ec434245d9c5cd910d784764f2}{deviceNode}});}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaEntity}{MediaEntity}}\ *entity);}
\DoxyCodeLine{00194\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{\string~V4L2VideoDevice}}();}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open}}();}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a407058d16f2508b20b88408be08e8581}{open}}(\mbox{\hyperlink{classlibcamera_1_1SharedFD}{SharedFD}}\ handle,\ \textcolor{keyword}{enum}\ v4l2\_buf\_type\ type);}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a9dc5c057e420ab545411eceb2266e6e9}{close}}();}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a096f39279b8519b85915bce53e1ec1d6}{driverName}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ caps\_.\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_af5bfc87374dd6370f477630018c4f17d}{driver}}();\ \}}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a1fd17456b1e3f24c38ae96879ca6a0a4}{deviceName}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ caps\_.\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_ade60e3829a1ce481e855fda371cb9378}{card}}();\ \}}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa2362f83341996e9601b2e3fadecda3b}{busName}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ caps\_.\mbox{\hyperlink{structlibcamera_1_1V4L2Capability_ac8675a267d9d033472949919ebaa03b4}{bus\_info}}();\ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability}{V4L2Capability}}\ \&\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ab68bbec27733a99c02673caf059a7ab4}{caps}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ caps\_;\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a91f2c87d4f30ad23259b7c460e144f63}{getFormat}}(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a1e75c2defe1fc70ec05e2cea8d8db4f0}{tryFormat}}(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ad67b47dd9327ce5df43350b80c083cca}{setFormat}}(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00209\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a028e21c214bae36abe9af7a1a95c991b}{Formats}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_adc347c736d39fc4029907b47f0ac8a8b}{formats}}(uint32\_t\ code\ =\ 0);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a930659ca05a6475a2b2d1ad2961ee318}{getSelection}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ target,\ \mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}}\ *rect);}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa9eba638ac570ac4746017c6f10fafaa}{setSelection}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ target,\ \mbox{\hyperlink{classlibcamera_1_1Rectangle}{Rectangle}}\ *rect);}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a25c378ab5d8ab5cb14b06d1981e032ed}{allocateBuffers}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count,}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::unique\_ptr<FrameBuffer>>\ *buffers);}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a93137d4c12706f69f458e08022706820}{exportBuffers}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count,}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::unique\_ptr<FrameBuffer>>\ *buffers);}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a154f5283d16ebd5e15d63e212745cb64}{importBuffers}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count);}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a191619c152f764e03bc461611f3fcd35}{releaseBuffers}}();}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a594cd594686a8c1cf9ae8dba0b2a8a75}{queueBuffer}}(\mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{FrameBuffer}}\ *buffer);}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1Signal}{Signal<FrameBuffer\ *>}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_abce3a9e7d618c826945b1a8a5c086ebe}{bufferReady}};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a588a5dc9d6f4c54c61136ac43ff9a8cc}{streamOn}}();}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a61998710615bdf7aa25a046c8565ed66}{streamOff}}();}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a36e54adf91b6690c75ce65e46758fc54}{setDequeueTimeout}}(\mbox{\hyperlink{classlibcamera_1_1utils_1_1Duration}{utils::Duration}}\ timeout);}
\DoxyCodeLine{00228\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1Signal}{Signal<>}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a04808f0cc1ed33c6796a98fbdc8603f1}{dequeueTimeout}};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keyword}{static}\ std::unique\_ptr<V4L2VideoDevice>}
\DoxyCodeLine{00231\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_aa9c5f20a82893665448ca8c22f184217}{fromEntityName}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1MediaDevice}{MediaDevice}}\ *media,\ \textcolor{keyword}{const}\ std::string\ \&entity);}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4L2PixelFormat}}\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_ac53da48385ab9a3798f7257a94a8ceb0}{toV4L2PixelFormat}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1PixelFormat}{PixelFormat}}\ \&pixelFormat)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00236\ \ \ \ \ std::string\ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice_a26a10690790249684e707cbfd1d83d77}{logPrefix}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{class_8h_ace000c18250df4aeac259f1ab739c655}{LIBCAMERA\_DISABLE\_COPY}}(\mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}})}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keyword}{enum\ class}\ State\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ Streaming,}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ Stopping,}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ Stopped,}
\DoxyCodeLine{00245\ \ \ \ \ \};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordtype}{int}\ initFormats();}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordtype}{int}\ getFormatMeta(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordtype}{int}\ trySetFormatMeta(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format,\ \textcolor{keywordtype}{bool}\ set);}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{int}\ getFormatMultiplane(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordtype}{int}\ trySetFormatMultiplane(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format,\ \textcolor{keywordtype}{bool}\ set);}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordtype}{int}\ getFormatSingleplane(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format);}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordtype}{int}\ trySetFormatSingleplane(\mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ *format,\ \textcolor{keywordtype}{bool}\ set);}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ std::vector<V4L2PixelFormat>\ enumPixelformats(uint32\_t\ code);}
\DoxyCodeLine{00259\ \ \ \ \ std::vector<SizeRange>\ enumSizes(\mbox{\hyperlink{classlibcamera_1_1V4L2PixelFormat}{V4L2PixelFormat}}\ pixelFormat);}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordtype}{int}\ requestBuffers(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count,\ \textcolor{keyword}{enum}\ v4l2\_memory\ memoryType);}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordtype}{int}\ createBuffers(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count,}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::unique\_ptr<FrameBuffer>>\ *buffers);}
\DoxyCodeLine{00264\ \ \ \ \ std::unique\_ptr<FrameBuffer>\ createBuffer(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00265\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1UniqueFD}{UniqueFD}}\ exportDmabufFd(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ plane);}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordtype}{void}\ bufferAvailable();}
\DoxyCodeLine{00268\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1FrameBuffer}{FrameBuffer}}\ *dequeueBuffer();}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordtype}{void}\ watchdogExpired();}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{static}\ std::optional<ColorSpace>\ toColorSpace(\textcolor{keyword}{const}\ T\ \&v4l2Format);}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \mbox{\hyperlink{structlibcamera_1_1V4L2Capability}{V4L2Capability}}\ caps\_;}
\DoxyCodeLine{00276\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2DeviceFormat}{V4L2DeviceFormat}}\ format\_;}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classlibcamera_1_1PixelFormatInfo}{PixelFormatInfo}}\ *formatInfo\_;}
\DoxyCodeLine{00278\ \ \ \ \ std::unordered\_set<V4L2PixelFormat>\ pixelFormats\_;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{enum}\ v4l2\_buf\_type\ bufferType\_;}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{enum}\ v4l2\_memory\ memoryType\_;}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2BufferCache}{V4L2BufferCache}}\ *cache\_;}
\DoxyCodeLine{00284\ \ \ \ \ std::map<unsigned\ int,\ FrameBuffer\ *>\ queuedBuffers\_;}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1EventNotifier}{EventNotifier}}\ *fdBufferNotifier\_;}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ State\ state\_;}
\DoxyCodeLine{00289\ \ \ \ \ std::optional<unsigned\ int>\ firstFrame\_;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1Timer}{Timer}}\ watchdog\_;}
\DoxyCodeLine{00292\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1utils_1_1Duration}{utils::Duration}}\ watchdogDuration\_;}
\DoxyCodeLine{00293\ \};}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice}{V4L2M2MDevice}}}
\DoxyCodeLine{00296\ \{}
\DoxyCodeLine{00297\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice}{V4L2M2MDevice}}(\textcolor{keyword}{const}\ std::string\ \&deviceNode);}
\DoxyCodeLine{00299\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice}{\string~V4L2M2MDevice}}();}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice_a97c64c9999c261ffc6dc01ab00d67c63}{open}}();}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice_a41134edcef513073ec56d6211f11da85}{close}}();}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}\ *\mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice_aa045547129bf823b697d9552409414ee}{output}}()\ \{\ \textcolor{keywordflow}{return}\ output\_;\ \}}
\DoxyCodeLine{00305\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}\ *\mbox{\hyperlink{classlibcamera_1_1V4L2M2MDevice_a34a6a4bf4b8ab9d8d7b9541034119312}{capture}}()\ \{\ \textcolor{keywordflow}{return}\ capture\_;\ \}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00308\ \ \ \ \ std::string\ deviceNode\_;}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}\ *output\_;}
\DoxyCodeLine{00311\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1V4L2VideoDevice}{V4L2VideoDevice}}\ *capture\_;}
\DoxyCodeLine{00312\ \};}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \}\ \textcolor{comment}{/*\ namespace\ libcamera\ */}}

\end{DoxyCode}
