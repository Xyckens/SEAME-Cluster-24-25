\chapter{Todo List}
\hypertarget{todo}{}\label{todo}\index{Todo List@{Todo List}}

\begin{DoxyRefList}
\item[File \doxylink{ipa__interface_8h}{ipa\+\_\+interface.h} ]\label{todo__todo000032}%
\Hypertarget{todo__todo000032}%
Add reference to how pipelines shall document their protocol. 
\item[Class \doxylink{classlibcamera_1_1Camera}{libcamera\+::Camera} ]\label{todo__todo000019}%
\Hypertarget{todo__todo000019}%
Add documentation for camera start timings. What exactly does the camera expect the pipeline handler to do when \doxylink{classlibcamera_1_1Camera_a5c033a72ac66fbdd2c2bb9f934389dcf}{start()} is called? 
\item[Member \doxylink{classlibcamera_1_1Camera_1_1Private_ab4e183eb4dabe929d1b2bbbb519b969f}{libcamera\+::Camera\+::Private\+::control\+Info\+\_\+} ]\label{todo__todo000018}%
\Hypertarget{todo__todo000018}%
This member was initially meant to stay constant after the camera is created. Several pipeline handlers are already updating it when the camera is configured. Update the documentation accordingly, and possibly the API as well, when implementing official support for control info updates.  
\item[Member \doxylink{classlibcamera_1_1CameraConfiguration_a29f8f263384c6149775b6011c7397093}{libcamera\+::Camera\+Configuration\+::validate} ()=0]\label{todo__todo000016}%
\Hypertarget{todo__todo000016}%
Define exactly when to return each status code. Should stream parameters set to 0 by the caller be adjusted without returning Adjusted ? This would potentially be useful for applications but would get in the way in \doxylink{classlibcamera_1_1Camera_a4c190f4c369628e5cd96770790559a26}{Camera\+::configure()}. Do we need an extra status code to signal this ?

\label{todo__todo000017}%
\Hypertarget{todo__todo000017}%
Handle validation of buffers count when refactoring the buffers API. 
\item[Member \doxylink{classlibcamera_1_1CameraSensor_a36b9ce9307b2b6eb1c741d59b6473368}{libcamera\+::Camera\+Sensor\+::apply\+Configuration} (const \doxylink{classlibcamera_1_1SensorConfiguration}{Sensor\+Configuration} \&config, Transform transform=\doxylink{namespacelibcamera_a371b6d17d531b85c035c4e889b116571ac9c5c65fb4af9cf90eb99b3b84424189}{Transform\+::\+Identity}, \doxylink{structlibcamera_1_1V4L2SubdeviceFormat}{V4\+L2\+Subdevice\+Format} \texorpdfstring{$\ast$}{*}sensor\+Format=nullptr)=0]\label{todo__todo000046}%
\Hypertarget{todo__todo000046}%
The configuration shall be fully populated and if any of the fields specified cannot be applied exactly, an error code is returned. 
\item[Member \doxylink{classlibcamera_1_1CameraSensor_ab14ea54646bd5c542a5950de5c7671f0}{libcamera\+::Camera\+Sensor\+::device} ()=0]\label{todo__todo000043}%
\Hypertarget{todo__todo000043}%
Remove this function by integrating Delayed\+Control with \doxylink{classlibcamera_1_1CameraSensor}{Camera\+Sensor}  
\item[Member \doxylink{classlibcamera_1_1CameraSensor_abcd1c5043bbf5c848a4187a3e36fad13}{libcamera\+::Camera\+Sensor\+::resolution} () const =0]\label{todo__todo000044}%
\Hypertarget{todo__todo000044}%
Consider if it desirable to distinguish between the maximum resolution the sensor can produce (also including upscaled ones) and the actual pixel array size by splitting this function in two. 
\item[Member \doxylink{classlibcamera_1_1CameraSensor_a1d3d7d3ef571499184fbe7425f8da927}{libcamera\+::Camera\+Sensor\+::try\+Format} (\doxylink{structlibcamera_1_1V4L2SubdeviceFormat}{V4\+L2\+Subdevice\+Format} \texorpdfstring{$\ast$}{*}format) const =0]\label{todo__todo000045}%
\Hypertarget{todo__todo000045}%
Add support for Transform by changing the format\textquotesingle{}s Bayer ordering before calling subdev\+\_\+-\/\texorpdfstring{$>$}{>}\doxylink{classlibcamera_1_1CameraSensor_ad871514dff7a30406df5f8cd557672d7}{set\+Format()}. 
\item[Class \doxylink{classlibcamera_1_1ColorSpace}{libcamera\+::Color\+Space} ]\label{todo__todo000021}%
\Hypertarget{todo__todo000021}%
Define the color space fully in the libcamera API to avoid referencing V4\+L2  
\item[Member \doxylink{classlibcamera_1_1ControlList_a0d02e5d02a5b278bb4eebb9c2dfeac2a}{libcamera\+::Control\+List\+::merge} (const \doxylink{classlibcamera_1_1ControlList}{Control\+List} \&source, Merge\+Policy policy=\doxylink{classlibcamera_1_1ControlList_a61c8b9a57df34e40716d3664d24df80da52a9854287113e3ba9a005ff73c54c7b}{Merge\+Policy\+::\+Keep\+Existing})]\label{todo__todo000024}%
\Hypertarget{todo__todo000024}%
Reimplement or implement an overloaded version which internally uses std\+::unordered\+\_\+map\+::merge() and accepts a non-\/const argument. 

\label{todo__todo000025}%
\Hypertarget{todo__todo000025}%
ASSERT that the current and source \doxylink{classlibcamera_1_1ControlList}{Control\+List} are derived from a compatible Control\+Id\+Map, to prevent undefined behaviour due to id collisions. 
\item[Member \doxylink{classlibcamera_1_1ControlSerializer_aad8c06e31fce42fbd9b0dd7464ad9078}{libcamera\+::Control\+Serializer\+::deserialize} (\doxylink{classlibcamera_1_1ByteStreamBuffer}{Byte\+Stream\+Buffer} \&buffer)]\label{todo__todo000022}%
\Hypertarget{todo__todo000022}%
Find a way to preserve the control name for debugging purpose.  
\item[Member \doxylink{classlibcamera_1_1ControlValue_a8121fc11c868a2c6d153982a776914b0}{libcamera\+::Control\+Value\+::Control\+Value} ()]\label{todo__todo000023}%
\Hypertarget{todo__todo000023}%
Revisit the \doxylink{classlibcamera_1_1ControlValue}{Control\+Value} layout when stabilizing the ABI  
\item[Member \doxylink{classlibcamera_1_1DmaBufAllocator_a5e1a0a9ab8d3494e4a73fbabe5cbb07e}{libcamera\+::Dma\+Buf\+Allocator\+::export\+Buffers} (unsigned int count, const std\+::vector$<$ unsigned int $>$ \&plane\+Sizes, std\+::vector\texorpdfstring{$<$}{<} std\+::unique\+\_\+ptr$<$ Frame\+Buffer $>$ \texorpdfstring{$>$}{>} \texorpdfstring{$\ast$}{*}buffers)]\label{todo__todo000026}%
\Hypertarget{todo__todo000026}%
Add the option to allocate each plane with a dma buf respectively. 
\item[Struct \doxylink{structlibcamera_1_1FrameBuffer_1_1Plane}{libcamera\+::Frame\+Buffer\+::Plane} ]\label{todo__todo000028}%
\Hypertarget{todo__todo000028}%
Specify how an application shall decide whether to use a single or multiple dmabufs, based on the camera requirements.  
\item[Member \doxylink{structlibcamera_1_1FrameMetadata_a08999a7c7b62eeba0a36d352c314bc65}{libcamera\+::Frame\+Metadata\+::timestamp} ]\label{todo__todo000027}%
\Hypertarget{todo__todo000027}%
Be more precise on what timestamps refer to.  
\item[Member \doxylink{classlibcamera_1_1ImgUDevice_abab917b2cd40b6c04d008706b41d60c8}{libcamera\+::Img\+UDevice\+::enable\+Links} (bool enable)]\label{todo__todo000038}%
\Hypertarget{todo__todo000038}%
This function will probably be removed or changed once links will be enabled or disabled selectively. 
\item[Member \doxylink{classlibcamera_1_1ipa_1_1CameraSensorHelper_ad6d462fc5828e841563289eef22d3174}{libcamera\+::ipa\+::Camera\+Sensor\+Helper\+::black\+Level} () const]\label{todo__todo000007}%
\Hypertarget{todo__todo000007}%
Fill the blanks and add pedestal values for all supported sensors. Once done, drop the std\+::optional$<$$>$. 
\item[Class \doxylink{classlibcamera_1_1ipa_1_1FCQueue}{libcamera\+::ipa\+::FCQueue\texorpdfstring{$<$}{<} Frame\+Context \texorpdfstring{$>$}{>}} ]\label{todo__todo000008}%
\Hypertarget{todo__todo000008}%
Mark the frame context with a per-\/frame control error flag in case of underrun, and research how algorithms should handle this. 
\item[Member \doxylink{classlibcamera_1_1ipa_1_1FCQueue_a7a76eebb86d4d5b41fff9d4e950fb385}{libcamera\+::ipa\+::FCQueue\texorpdfstring{$<$}{<} Frame\+Context \texorpdfstring{$>$}{>}\+::clear} ()]\label{todo__todo000009}%
\Hypertarget{todo__todo000009}%
Fix any issue this may cause with requests queued before the camera is started.  
\item[Struct \doxylink{structlibcamera_1_1ipa_1_1ipu3_1_1algorithms_1_1Accumulator}{libcamera\+::ipa\+::ipu3\+::algorithms\+::Accumulator} ]\label{todo__todo000003}%
\Hypertarget{todo__todo000003}%
move this description and structure into a common header 
\item[Member \doxylink{classlibcamera_1_1ipa_1_1ipu3_1_1IPAIPU3_a9206f03f723d4eaedc61de71d44b311b}{libcamera\+::ipa\+::ipu3\+::IPAIPU3\+::configure} (const IPAConfig\+Info \&config\+Info, \doxylink{classlibcamera_1_1ControlInfoMap}{Control\+Info\+Map} \texorpdfstring{$\ast$}{*}ipa\+Controls) override]\label{todo__todo000005}%
\Hypertarget{todo__todo000005}%
Document what the BDS is, ideally in a block diagram of the ImgU. 
\item[Class \doxylink{classlibcamera_1_1ipa_1_1rkisp1_1_1algorithms_1_1Filter}{libcamera\+::ipa\+::rkisp1\+::algorithms\+::Filter} ]\label{todo__todo000010}%
\Hypertarget{todo__todo000010}%
In current version the denoise and sharpness control is based on user controls. In a future version it should be controlled automatically by the algorithm.  
\item[Class \doxylink{classlibcamera_1_1IPADataSerializer}{libcamera\+::IPAData\+Serializer\texorpdfstring{$<$}{<} T \texorpdfstring{$>$}{>}} ]\label{todo__todo000030}%
\Hypertarget{todo__todo000030}%
Harden the vector and map deserializer

\label{todo__todo000031}%
\Hypertarget{todo__todo000031}%
For Shared\+FDs, instead of storing a validity flag, store an index into the fd array. This will allow us to use views instead of copying. 

\label{todo__todo000029}%
\Hypertarget{todo__todo000029}%
Switch to \doxylink{classlibcamera_1_1Span}{Span} instead of byte and fd vector 
\item[Class \doxylink{classlibcamera_1_1IPAInterface}{libcamera\+::IPAInterface} ]\label{todo__todo000033}%
\Hypertarget{todo__todo000033}%
Figure out how to generate \doxylink{classlibcamera_1_1IPAInterface}{IPAInterface} documentation.  
\item[Member \doxylink{structlibcamera_1_1IPAModuleInfo_ac8fb4c26b65a2fbad350fc185445164d}{libcamera\+::IPAModule\+Info\+::name} \mbox{[}256\mbox{]}]\label{todo__todo000034}%
\Hypertarget{todo__todo000034}%
Allow user to choose to isolate open source IPAs  
\item[Member \doxylink{classlibcamera_1_1IPCMessage_a18d9502a924db483ee1deffe37de8117}{libcamera\+::IPCMessage\+::payload} () const]\label{todo__todo000035}%
\Hypertarget{todo__todo000035}%
Resolve the layering violation (add other converters later?)  
\item[Member \doxylink{classlibcamera_1_1IPCPipe_a4071e1ef36dfb902b766b5f28330457b}{libcamera\+::IPCPipe\+::send\+Sync} (const \doxylink{classlibcamera_1_1IPCMessage}{IPCMessage} \&in, \doxylink{classlibcamera_1_1IPCMessage}{IPCMessage} \texorpdfstring{$\ast$}{*}out)=0]\label{todo__todo000036}%
\Hypertarget{todo__todo000036}%
Determine if the event loop should limit the types of messages it processes, to avoid reintrancy in the caller, and carefully document what the caller needs to implement to make this safe.  
\item[Member \doxylink{classlibcamera_1_1IPCUnixSocket_a11995aca6423a568e6d1303dc80cd239}{libcamera\+::IPCUnix\+Socket\+::receive} (\doxylink{structlibcamera_1_1IPCUnixSocket_1_1Payload}{Payload} \texorpdfstring{$\ast$}{*}payload)]\label{todo__todo000037}%
\Hypertarget{todo__todo000037}%
Add state machine to make sure we don\textquotesingle{}t block forever and that a header is always followed by a payload. 
\item[Member \doxylink{classlibcamera_1_1Object_a6e81f2a2524dbe12daed49597cf66a57}{libcamera\+::Object\+::assert\+Thread\+Bound} (const char \texorpdfstring{$\ast$}{*}message)]\label{todo__todo000012}%
\Hypertarget{todo__todo000012}%
Verify the thread-\/bound requirements for functions marked as thread-\/bound at the class level. 
\item[Member \doxylink{classlibcamera_1_1Request_ac620539cc50a28bd9ff9f8f697eb86c3}{libcamera\+::Request\+::metadata} ()]\label{todo__todo000042}%
\Hypertarget{todo__todo000042}%
Offer a read-\/only API towards applications while keeping a read/write API internally.  
\item[Member \doxylink{classlibcamera_1_1Request_adce12d1213e5d894a5697ddd4b94b672}{libcamera\+::Request\+::Request} (\doxylink{classlibcamera_1_1Camera}{Camera} \texorpdfstring{$\ast$}{*}camera, uint64\+\_\+t cookie=0)]\label{todo__todo000041}%
\Hypertarget{todo__todo000041}%
Add a validator for metadata controls.  
\item[Class \doxylink{classlibcamera_1_1SensorConfiguration}{libcamera\+::Sensor\+Configuration} ]\label{todo__todo000014}%
\Hypertarget{todo__todo000014}%
Applications shall fully populate all fields of the \doxylink{classlibcamera_1_1CameraConfiguration_a2976d0bb17d7bb416e2bfc984d096c7d}{Camera\+Configuration\+::sensor\+Config} class members before validating the \doxylink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration}. If the \doxylink{classlibcamera_1_1SensorConfiguration}{Sensor\+Configuration} is not fully populated, or if any of its parameters cannot be applied to the sensor in use, the \doxylink{classlibcamera_1_1CameraConfiguration}{Camera\+Configuration} validation process will fail and return \doxylink{classlibcamera_1_1CameraConfiguration_a64163f21db2fe1ce0a6af5a6f6847744abb3f4b9430dffdc7a148758fe6d70d57}{Camera\+Configuration\+::\+Status\+::\+Invalid}. 
\item[Member \doxylink{classlibcamera_1_1SensorConfiguration_a6f276fafe03f0564f61da6ed4f174124}{libcamera\+::Sensor\+Configuration\+::is\+Valid} () const]\label{todo__todo000015}%
\Hypertarget{todo__todo000015}%
For now allow applications to populate the bit\+Depth and the output\+Size only as skipping and binnings factors are initialized to 1 and the analog crop is ignored. 
\item[Class \doxylink{classlibcamera_1_1Stream}{libcamera\+::Stream} ]\label{todo__todo000049}%
\Hypertarget{todo__todo000049}%
Add capabilities to the stream API. Without this the \doxylink{classlibcamera_1_1Stream}{Stream} class only serves to reveal how many streams of unknown capabilities a camera supports. This in itself is productive as it allows applications to configure and capture from one or more streams even if they won\textquotesingle{}t be able to select the optimal stream for the task.  
\item[Member \doxylink{structlibcamera_1_1StreamConfiguration_a396e09188db732ef3f8a149808d876f7}{libcamera\+::Stream\+Configuration\+::Stream\+Configuration} ()]\label{todo__todo000048}%
\Hypertarget{todo__todo000048}%
This function is deprecated and should be removed once all pipeline handlers provide \doxylink{classlibcamera_1_1StreamFormats}{Stream\+Formats}.  
\item[Class \doxylink{classlibcamera_1_1StreamFormats}{libcamera\+::Stream\+Formats} ]\label{todo__todo000047}%
\Hypertarget{todo__todo000047}%
Review the usage patterns of this class, and cache the computed \doxylink{classlibcamera_1_1StreamFormats_ab956a73dcc86314d903227ad736a29a4}{pixelformats()}, \doxylink{classlibcamera_1_1StreamFormats_a4321746fcfffed9750f6f9dbffcf102b}{sizes()} and \doxylink{classlibcamera_1_1StreamFormats_a8f966e5f785f2c30669889c5b5307801}{range()} if this would improve performances.  
\item[Member \doxylink{include_2libcamera_2base_2utils_8h_a24701cae6640674865484b40b2325a7d}{libcamera\+::utils\+::split} (const std\+::string \&str, const std\+::string \&delim)]\label{todo__todo000013}%
\Hypertarget{todo__todo000013}%
Try to avoid copies of str and delim  
\item[Member \doxylink{classlibcamera_1_1V4L2Subdevice_a73ac07ba76587bb56181aa699cd15554}{libcamera\+::V4\+L2\+Subdevice\+::get\+Selection} (const \doxylink{structlibcamera_1_1V4L2Subdevice_1_1Stream}{Stream} \&stream, unsigned int target, \doxylink{classlibcamera_1_1Rectangle}{Rectangle} \texorpdfstring{$\ast$}{*}rect)]\label{todo__todo000050}%
\Hypertarget{todo__todo000050}%
Define a V4\+L2\+Selection\+Target enum for the selection target 
\item[Member \doxylink{classlibcamera_1_1V4L2Subdevice_a62c91acb30f22a4b526b157c03d2cc60}{libcamera\+::V4\+L2\+Subdevice\+::set\+Selection} (const \doxylink{structlibcamera_1_1V4L2Subdevice_1_1Stream}{Stream} \&stream, unsigned int target, \doxylink{classlibcamera_1_1Rectangle}{Rectangle} \texorpdfstring{$\ast$}{*}rect)]\label{todo__todo000051}%
\Hypertarget{todo__todo000051}%
Define a V4\+L2\+Selection\+Target enum for the selection target 
\item[Member \doxylink{classlibcamera_1_1V4L2Subdevice_a8e021fbbd868e89103c0619afce3470b}{libcamera\+::V4\+L2\+Subdevice\+::set\+Selection} (unsigned int pad, unsigned int target, \doxylink{classlibcamera_1_1Rectangle}{Rectangle} \texorpdfstring{$\ast$}{*}rect)]\label{todo__todo000052}%
\Hypertarget{todo__todo000052}%
Define a V4\+L2\+Selection\+Target enum for the selection target 
\item[Member \doxylink{classlibcamera_1_1V4L2VideoDevice_a930659ca05a6475a2b2d1ad2961ee318}{libcamera\+::V4\+L2\+Video\+Device\+::get\+Selection} (unsigned int target, \doxylink{classlibcamera_1_1Rectangle}{Rectangle} \texorpdfstring{$\ast$}{*}rect)]\label{todo__todo000053}%
\Hypertarget{todo__todo000053}%
Define a V4\+L2\+Selection\+Target enum for the selection target 
\item[Member \doxylink{classlibcamera_1_1V4L2VideoDevice_aa9eba638ac570ac4746017c6f10fafaa}{libcamera\+::V4\+L2\+Video\+Device\+::set\+Selection} (unsigned int target, \doxylink{classlibcamera_1_1Rectangle}{Rectangle} \texorpdfstring{$\ast$}{*}rect)]\label{todo__todo000054}%
\Hypertarget{todo__todo000054}%
Define a V4\+L2\+Selection\+Target enum for the selection target 
\item[Member \doxylink{libcamera_2base_2log_8h_a3577749fb48d57a158b8ac1a0b3ab57e}{LOG} (...)]\label{todo__todo000011}%
\Hypertarget{todo__todo000011}%
Allow logging from destructors of global objects to the largest possible extent 
\end{DoxyRefList}