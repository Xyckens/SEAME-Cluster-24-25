\doxysection{camera\+\_\+module Struct Reference}
\hypertarget{structcamera__module}{}\label{structcamera__module}\index{camera\_module@{camera\_module}}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structhw__module__t}{hw\+\_\+module\+\_\+t}} \mbox{\hyperlink{structcamera__module_a5789737ab263c1ac0fb5a8712fd83f2a}{common}}
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_a770f777ffc747afad812397de8059c24}{get\+\_\+number\+\_\+of\+\_\+cameras}} )(void)
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_ac1f871c1d6f1d2511fb6f41afbb1e3fc}{get\+\_\+camera\+\_\+info}} )(int camera\+\_\+id, struct \mbox{\hyperlink{structcamera__info}{camera\+\_\+info}} \texorpdfstring{$\ast$}{*}info)
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_ae3ac0767908f328a82a0862e0d0db054}{set\+\_\+callbacks}} )(const \mbox{\hyperlink{structcamera__module__callbacks}{camera\+\_\+module\+\_\+callbacks\+\_\+t}} \texorpdfstring{$\ast$}{*}callbacks)
\item 
void(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_a1087624d6b94ef35c23d503295380e59}{get\+\_\+vendor\+\_\+tag\+\_\+ops}} )(\mbox{\hyperlink{structvendor__tag__ops}{vendor\+\_\+tag\+\_\+ops\+\_\+t}} \texorpdfstring{$\ast$}{*}ops)
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_a196533c34903463c239d34aa25968442}{open\+\_\+legacy}} )(const struct \mbox{\hyperlink{structhw__module__t}{hw\+\_\+module\+\_\+t}} \texorpdfstring{$\ast$}{*}module, const char \texorpdfstring{$\ast$}{*}id, uint32\+\_\+t hal\+Version, struct \mbox{\hyperlink{structhw__device__t}{hw\+\_\+device\+\_\+t}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}device)
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_ab6173389f5878ddc7215c47d9c65e641}{set\+\_\+torch\+\_\+mode}} )(const char \texorpdfstring{$\ast$}{*}camera\+\_\+id, bool enabled)
\item 
int(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structcamera__module_a6adaeb55b92ef207d7a2c09c7605b630}{init}} )()
\item 
\Hypertarget{structcamera__module_aed4aa0555aa48bca561cf5e5ce614875}\label{structcamera__module_aed4aa0555aa48bca561cf5e5ce614875} 
void \texorpdfstring{$\ast$}{*} {\bfseries reserved} \mbox{[}5\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Member Data Documentation}
\Hypertarget{structcamera__module_a5789737ab263c1ac0fb5a8712fd83f2a}\label{structcamera__module_a5789737ab263c1ac0fb5a8712fd83f2a} 
\index{camera\_module@{camera\_module}!common@{common}}
\index{common@{common}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{common}{common}}
{\footnotesize\ttfamily \mbox{\hyperlink{structhw__module__t}{hw\+\_\+module\+\_\+t}} camera\+\_\+module\+::common}

Common methods of the camera module. This {\itshape must} be the first member of \doxylink{structcamera__module}{camera\+\_\+module} as users of this structure will cast a \doxylink{structhw__module__t}{hw\+\_\+module\+\_\+t} to \doxylink{structcamera__module}{camera\+\_\+module} pointer in contexts where it\textquotesingle{}s known the \doxylink{structhw__module__t}{hw\+\_\+module\+\_\+t} references a \doxylink{structcamera__module}{camera\+\_\+module}.

The return values for common.\+methods-\/\texorpdfstring{$>$}{>}open for \doxylink{structcamera__module}{camera\+\_\+module} are\+:

0\+: On a successful open of the camera device.

-\/ENODEV\+: The camera device cannot be opened due to an internal error.

-\/EINVAL\+: The input arguments are invalid, i.\+e. the id is invalid, and/or the module is invalid.

-\/EBUSY\+: The camera device was already opened for this camera id (by using this method or open\+\_\+legacy), regardless of the device HAL version it was opened as.

-\/EUSERS\+: The maximal number of camera devices that can be opened concurrently were opened already, either by this method or the open\+\_\+legacy method.

All other return values from common.\+methods-\/\texorpdfstring{$>$}{>}open will be treated as -\/ENODEV. \Hypertarget{structcamera__module_ac1f871c1d6f1d2511fb6f41afbb1e3fc}\label{structcamera__module_ac1f871c1d6f1d2511fb6f41afbb1e3fc} 
\index{camera\_module@{camera\_module}!get\_camera\_info@{get\_camera\_info}}
\index{get\_camera\_info@{get\_camera\_info}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{get\_camera\_info}{get\_camera\_info}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::get\+\_\+camera\+\_\+info) (int camera\+\_\+id, struct \mbox{\hyperlink{structcamera__info}{camera\+\_\+info}} \texorpdfstring{$\ast$}{*}info)}

get\+\_\+camera\+\_\+info\+:

Return the static camera information for a given camera device. This information may not change for a camera device.

Return values\+:

0\+: On a successful operation

-\/ENODEV\+: The information cannot be provided due to an internal error.

-\/EINVAL\+: The input arguments are invalid, i.\+e. the id is invalid, and/or the module is invalid.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+4 or higher\+:

When a camera is disconnected, its camera id becomes invalid. Calling this this method with this invalid camera id will get -\/EINVAL and NULL camera static metadata (\doxylink{structcamera__info_a6654fcef9e3bea64475098f9888e62ea}{camera\+\_\+info.\+static\+\_\+camera\+\_\+characteristics}). \Hypertarget{structcamera__module_a770f777ffc747afad812397de8059c24}\label{structcamera__module_a770f777ffc747afad812397de8059c24} 
\index{camera\_module@{camera\_module}!get\_number\_of\_cameras@{get\_number\_of\_cameras}}
\index{get\_number\_of\_cameras@{get\_number\_of\_cameras}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{get\_number\_of\_cameras}{get\_number\_of\_cameras}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::get\+\_\+number\+\_\+of\+\_\+cameras) (void)}

get\+\_\+number\+\_\+of\+\_\+cameras\+:

Returns the number of camera devices accessible through the camera module. The camera devices are numbered 0 through N-\/1, where N is the value returned by this call. The name of the camera device for open() is simply the number converted to a string. That is, "{}0"{} for camera ID 0, "{}1"{} for camera ID 1.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+3 or lower\+:

The value here must be static, and cannot change after the first call to this method.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+4 or higher\+:

The value here must be static, and must count only built-\/in cameras, which have CAMERA\+\_\+\+FACING\+\_\+\+BACK or CAMERA\+\_\+\+FACING\+\_\+\+FRONT camera facing values (\doxylink{structcamera__info_a42d1e0dbf5fb3ad733f10cce64259eed}{camera\+\_\+info.\+facing}). The HAL must not include the external cameras (\doxylink{structcamera__info_a42d1e0dbf5fb3ad733f10cce64259eed}{camera\+\_\+info.\+facing} == CAMERA\+\_\+\+FACING\+\_\+\+EXTERNAL) into the return value of this call. Frameworks will use camera\+\_\+device\+\_\+status\+\_\+change callback to manage number of external cameras. \Hypertarget{structcamera__module_a1087624d6b94ef35c23d503295380e59}\label{structcamera__module_a1087624d6b94ef35c23d503295380e59} 
\index{camera\_module@{camera\_module}!get\_vendor\_tag\_ops@{get\_vendor\_tag\_ops}}
\index{get\_vendor\_tag\_ops@{get\_vendor\_tag\_ops}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{get\_vendor\_tag\_ops}{get\_vendor\_tag\_ops}}
{\footnotesize\ttfamily void(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::get\+\_\+vendor\+\_\+tag\+\_\+ops) (\mbox{\hyperlink{structvendor__tag__ops}{vendor\+\_\+tag\+\_\+ops\+\_\+t}} \texorpdfstring{$\ast$}{*}ops)}

get\+\_\+vendor\+\_\+tag\+\_\+ops\+:

Get methods to query for vendor extension metadata tag information. The HAL should fill in all the vendor tag operation methods, or leave ops unchanged if no vendor tags are defined.

The \doxylink{structvendor__tag__ops}{vendor\+\_\+tag\+\_\+ops} structure used here is defined in\+: system/media/camera/include/system/vendor\+\_\+tags.\+h

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+x/2\+\_\+0/2\+\_\+1\+: Not provided by HAL module. Framework may not call this function.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+2\+: Valid to be called by the framework. \Hypertarget{structcamera__module_a6adaeb55b92ef207d7a2c09c7605b630}\label{structcamera__module_a6adaeb55b92ef207d7a2c09c7605b630} 
\index{camera\_module@{camera\_module}!init@{init}}
\index{init@{init}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{init}{init}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::init) ()}

init\+:

This method is called by the camera service before any other methods are invoked, right after the camera HAL library has been successfully loaded. It may be left as NULL by the HAL module, if no initialization in needed.

It can be used by HAL implementations to perform initialization and other one-\/time operations.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+x/2\+\_\+0/2\+\_\+1/2\+\_\+2/2\+\_\+3\+: Not provided by HAL module. Framework will not call this function.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+4\+: If not NULL, will always be called by the framework once after the HAL module is loaded, before any other HAL module method is called.

Return values\+:

0\+: On a successful operation.

-\/ENODEV\+: Initialization cannot be completed due to an internal error. The HAL must be assumed to be in a nonfunctional state. \Hypertarget{structcamera__module_a196533c34903463c239d34aa25968442}\label{structcamera__module_a196533c34903463c239d34aa25968442} 
\index{camera\_module@{camera\_module}!open\_legacy@{open\_legacy}}
\index{open\_legacy@{open\_legacy}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{open\_legacy}{open\_legacy}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::open\+\_\+legacy) (const struct \mbox{\hyperlink{structhw__module__t}{hw\+\_\+module\+\_\+t}} \texorpdfstring{$\ast$}{*}module, const char \texorpdfstring{$\ast$}{*}id, uint32\+\_\+t hal\+Version, struct \mbox{\hyperlink{structhw__device__t}{hw\+\_\+device\+\_\+t}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}device)}

open\+\_\+legacy\+:

Open a specific legacy camera HAL device if multiple device HAL API versions are supported by this camera HAL module. For example, if the camera module supports both CAMERA\+\_\+\+DEVICE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+0 and CAMERA\+\_\+\+DEVICE\+\_\+\+API\+\_\+\+VERSION\+\_\+3\+\_\+2 device API for the same camera id, framework can call this function to open the camera device as CAMERA\+\_\+\+DEVICE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+0 device.

This is an optional method. A Camera HAL module does not need to support more than one device HAL version per device, and such modules may return -\/ENOSYS for all calls to this method. For all older HAL device API versions that are not supported, it may return -\/EOPNOTSUPP. When above cases occur, The normal open() method (common.\+methods-\/\texorpdfstring{$>$}{>}open) will be used by the framework instead.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+x/2\+\_\+0/2\+\_\+1/2\+\_\+2\+: Not provided by HAL module. Framework will not call this function.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+3\+: Valid to be called by the framework.

Return values\+:

0\+: On a successful open of the camera device.

-\/ENOSYS This method is not supported.

-\/EOPNOTSUPP\+: The requested HAL version is not supported by this method.

-\/EINVAL\+: The input arguments are invalid, i.\+e. the id is invalid, and/or the module is invalid.

-\/EBUSY\+: The camera device was already opened for this camera id (by using this method or common.\+methods-\/\texorpdfstring{$>$}{>}open method), regardless of the device HAL version it was opened as.

-\/EUSERS\+: The maximal number of camera devices that can be opened concurrently were opened already, either by this method or common.\+methods-\/\texorpdfstring{$>$}{>}open method. \Hypertarget{structcamera__module_ae3ac0767908f328a82a0862e0d0db054}\label{structcamera__module_ae3ac0767908f328a82a0862e0d0db054} 
\index{camera\_module@{camera\_module}!set\_callbacks@{set\_callbacks}}
\index{set\_callbacks@{set\_callbacks}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{set\_callbacks}{set\_callbacks}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::set\+\_\+callbacks) (const \mbox{\hyperlink{structcamera__module__callbacks}{camera\+\_\+module\+\_\+callbacks\+\_\+t}} \texorpdfstring{$\ast$}{*}callbacks)}

set\+\_\+callbacks\+:

Provide callback function pointers to the HAL module to inform framework of asynchronous camera module events. The framework will call this function once after initial camera HAL module load, after the \doxylink{structcamera__module_a770f777ffc747afad812397de8059c24}{get\+\_\+number\+\_\+of\+\_\+cameras()} method is called for the first time, and before any other calls to the module.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+0, CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+0\+:

Not provided by HAL module. Framework may not call this function.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+1\+:

Valid to be called by the framework.

Return values\+:

0\+: On a successful operation

-\/ENODEV\+: The operation cannot be completed due to an internal error.

-\/EINVAL\+: The input arguments are invalid, i.\+e. the callbacks are null \Hypertarget{structcamera__module_ab6173389f5878ddc7215c47d9c65e641}\label{structcamera__module_ab6173389f5878ddc7215c47d9c65e641} 
\index{camera\_module@{camera\_module}!set\_torch\_mode@{set\_torch\_mode}}
\index{set\_torch\_mode@{set\_torch\_mode}!camera\_module@{camera\_module}}
\doxysubsubsection{\texorpdfstring{set\_torch\_mode}{set\_torch\_mode}}
{\footnotesize\ttfamily int(\texorpdfstring{$\ast$}{*} camera\+\_\+module\+::set\+\_\+torch\+\_\+mode) (const char \texorpdfstring{$\ast$}{*}camera\+\_\+id, bool enabled)}

set\+\_\+torch\+\_\+mode\+:

Turn on or off the torch mode of the flash unit associated with a given camera ID. If the operation is successful, HAL must notify the framework torch state by invoking \doxylink{structcamera__module__callbacks_a6f7f22a0938262c22811ccab2e5bff58}{camera\+\_\+module\+\_\+callbacks.\+torch\+\_\+mode\+\_\+status\+\_\+change()} with the new state.

The camera device has a higher priority accessing the flash unit. When there are any resource conflicts, such as open() is called to open a camera device, HAL module must notify the framework through \doxylink{structcamera__module__callbacks_a6f7f22a0938262c22811ccab2e5bff58}{camera\+\_\+module\+\_\+callbacks.\+torch\+\_\+mode\+\_\+status\+\_\+change()} that the torch mode has been turned off and the torch mode state has become TORCH\+\_\+\+MODE\+\_\+\+STATUS\+\_\+\+NOT\+\_\+\+AVAILABLE. When resources to turn on torch mode become available again, HAL module must notify the framework through \doxylink{structcamera__module__callbacks_a6f7f22a0938262c22811ccab2e5bff58}{camera\+\_\+module\+\_\+callbacks.\+torch\+\_\+mode\+\_\+status\+\_\+change()} that the torch mode state has become TORCH\+\_\+\+MODE\+\_\+\+STATUS\+\_\+\+AVAILABLE\+\_\+\+OFF for \doxylink{structcamera__module_ab6173389f5878ddc7215c47d9c65e641}{set\+\_\+torch\+\_\+mode()} to be called.

When the framework calls \doxylink{structcamera__module_ab6173389f5878ddc7215c47d9c65e641}{set\+\_\+torch\+\_\+mode()} to turn on the torch mode of a flash unit, if HAL cannot keep multiple torch modes on simultaneously, HAL should turn off the torch mode that was turned on by a previous \doxylink{structcamera__module_ab6173389f5878ddc7215c47d9c65e641}{set\+\_\+torch\+\_\+mode()} call and notify the framework that the torch mode state of that flash unit has become TORCH\+\_\+\+MODE\+\_\+\+STATUS\+\_\+\+AVAILABLE\+\_\+\+OFF.

Version information (based on camera\+\_\+module\+\_\+t.\+common.\+module\+\_\+api\+\_\+version)\+:

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+1\+\_\+x/2\+\_\+0/2\+\_\+1/2\+\_\+2/2\+\_\+3\+: Not provided by HAL module. Framework will not call this function.

CAMERA\+\_\+\+MODULE\+\_\+\+API\+\_\+\+VERSION\+\_\+2\+\_\+4\+: Valid to be called by the framework.

Return values\+:

0\+: On a successful operation.

-\/ENOSYS\+: The camera device does not support this operation. It is returned if and only if android.\+flash.\+info.\+available is false.

-\/EBUSY\+: The camera device is already in use.

-\/EUSERS\+: The resources needed to turn on the torch mode are not available, typically because other camera devices are holding the resources to make using the flash unit not possible.

-\/EINVAL\+: camera\+\_\+id is invalid. 

The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/peripherals/camera/libcamera/include/android/hardware/libhardware/include/hardware/camera\+\_\+common.\+h\end{DoxyCompactItemize}
