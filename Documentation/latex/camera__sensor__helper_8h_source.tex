\doxysection{camera\+\_\+sensor\+\_\+helper.\+h}
\hypertarget{camera__sensor__helper_8h_source}{}\label{camera__sensor__helper_8h_source}\index{src/peripherals/camera/libcamera/src/ipa/libipa/camera\_sensor\_helper.h@{src/peripherals/camera/libcamera/src/ipa/libipa/camera\_sensor\_helper.h}}
\mbox{\hyperlink{camera__sensor__helper_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ SPDX-\/License-\/Identifier:\ LGPL-\/2.1-\/or-\/later\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (C)\ 2021,\ Google\ Inc.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ Helper\ class\ that\ performs\ sensor-\/specific\ parameter\ computations}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <variant>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{class_8h}{libcamera/base/class.h}}>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacelibcamera}{libcamera}}\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{namespace\ }ipa\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper}{CameraSensorHelper}}}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_ae5e05b95f37bb7bec22bc805bda51589}{CameraSensorHelper}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper}{\string~CameraSensorHelper}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ std::optional<int16\_t>\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_ad6d462fc5828e841563289eef22d3174}{blackLevel}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_a44159cca9daade1411af09dcf01c511f}{blackLevel\_}};\ \}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{virtual}\ uint32\_t\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_a5c3fd0e1267fb455ba23ec3f1a96c41b}{gainCode}}(\textcolor{keywordtype}{double}\ gain)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{double}\ gain(uint32\_t\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_a5c3fd0e1267fb455ba23ec3f1a96c41b}{gainCode}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainLinear}{AnalogueGainLinear}}\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ int16\_t\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainLinear_ae2b16a1cb827ab956a5be598a61a5209}{m0}};}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ int16\_t\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainLinear_a9c5902c3034d644f209f27ed475cce78}{c0}};}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ int16\_t\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainLinear_a4e042b959f002bfaabbe0cc3ab18bc29}{m1}};}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ int16\_t\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainLinear_aa8fc89756ff769a617d0b3f78304bf12}{c1}};}
\DoxyCodeLine{00039\ \ \ \ \ \};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainExp}{AnalogueGainExp}}\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainExp_ab64e0713b27bed04a7f59226e0f0f303}{a}};}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{structlibcamera_1_1ipa_1_1CameraSensorHelper_1_1AnalogueGainExp_a1ff67c3ba4098c3d746ae8ef15fd2079}{m}};}
\DoxyCodeLine{00044\ \ \ \ \ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ std::optional<int16\_t>\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_a44159cca9daade1411af09dcf01c511f}{blackLevel\_}};}
\DoxyCodeLine{00047\ \ \ \ \ std::variant<std::monostate,\ AnalogueGainLinear,\ AnalogueGainExp>\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper_a2db54f4af15e9442b16294b7f6d10a7b}{gain\_}};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{class_8h_a3dfeb3af0e6990136655ba6125587d2f}{LIBCAMERA\_DISABLE\_COPY\_AND\_MOVE}}(\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelper}{CameraSensorHelper}})}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}}}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}}(\textcolor{keyword}{const}\ std::string\ name);}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{\string~CameraSensorHelperFactoryBase}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{static}\ std::unique\_ptr<CameraSensorHelper>\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase_a5ba8184bb2edf7858c72ed265f10145f}{create}}(\textcolor{keyword}{const}\ std::string\ \&name);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{static}\ std::vector<CameraSensorHelperFactoryBase\ *>\ \&\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase_a4cdf6349106ecb49a3b3ed9cdcd9f6c0}{factories}}();}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{class_8h_a3dfeb3af0e6990136655ba6125587d2f}{LIBCAMERA\_DISABLE\_COPY\_AND\_MOVE}}(\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}})}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ registerType(\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}}\ *factory);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<CameraSensorHelper>\ createInstance()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ std::string\ name\_;}
\DoxyCodeLine{00071\ \};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ \_Helper>}
\DoxyCodeLine{00074\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactory}{CameraSensorHelperFactory}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}}}
\DoxyCodeLine{00075\ \{}
\DoxyCodeLine{00076\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactory_a8caceebb2f83c1d02027ff5236843ba4}{CameraSensorHelperFactory}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name)}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classlibcamera_1_1ipa_1_1CameraSensorHelperFactoryBase}{CameraSensorHelperFactoryBase}}(name)}
\DoxyCodeLine{00079\ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00083\ \ \ \ \ std::unique\_ptr<CameraSensorHelper>\ createInstance()\textcolor{keyword}{\ const\ override}}
\DoxyCodeLine{00084\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<\_Helper>();}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ \};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#define\ REGISTER\_CAMERA\_SENSOR\_HELPER(name,\ helper)\ \(\backslash\)}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{static\ CameraSensorHelperFactory<helper>\ global\_\#\#helper\#\#Factory(name);}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \}\ \textcolor{comment}{/*\ namespace\ ipa\ */}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \}\ \textcolor{comment}{/*\ namespace\ libcamera\ */}}

\end{DoxyCode}
