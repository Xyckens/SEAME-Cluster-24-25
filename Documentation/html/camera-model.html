<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JetPackJoyRide: Camera Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JetPackJoyRide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Camera Model</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>libcamera acts as a middleware between applications and camera hardware. It provides a solution to an unsolvable problem: reconciling applications, which need to run on different systems without dealing with device-specific details, and camera hardware, which exhibits a wide variety of features, limitations and architecture variations. In order to do so, it creates an abstract camera model that hides the camera hardware from applications. The model is designed to strike the right balance between genericity, to please generic applications, and flexibility, to expose even the most specific hardware features to the most demanding applications.</p>
<p>In libcamera, a Camera is defined as a device that can capture frames continuously from a camera sensor and store them in memory. If supported by the device and desired by the application, the camera may store each captured frame in multiple copies, possibly in different formats and sizes. Each of these memory outputs of the camera is called a Stream.</p>
<p>A camera contains a single image source, and separate camera instances relate to different image sources. For instance, a phone containing front and back image sensors will be modelled with two cameras, one for each sensor. When multiple streams can be produced from the same image source, all those streams are guaranteed to be part of the same camera.</p>
<p>While not sharing image sources, separate cameras can share other system resources, such as ISPs. For this reason camera instances may not be fully independent, in which case usage restrictions may apply. For instance, a phone with a front and a back camera may not allow usage of the two cameras simultaneously.</p>
<p>The camera model defines an implicit pipeline, whose input is the camera sensor, and whose outputs are the streams. Along the pipeline, the frames produced by the camera sensor are transformed by the camera into a format suitable for applications, with image processing that improves the quality of the captured frames. The camera exposes a set of controls that applications may use to manually control the processing steps. This high-level camera model is the minimum baseline that all cameras must conform to.</p>
<h1><a class="anchor" id="camera-pipeline-model"></a>
Pipeline Model</h1>
<p>Camera hardware differs in the supported image processing operations and the order in which they are applied. The libcamera pipelines abstract the hardware differences and expose a logical view of the processing operations with a fixed order. This offers low-level control of those operations to applications, while keeping application code generic.</p>
<p>Starting from the camera sensor, a pipeline applies the following operations, in that order.</p>
<ul>
<li>Pixel exposure</li>
<li>Analog to digital conversion and readout</li>
<li>Black level subtraction</li>
<li>Defective pixel correction</li>
<li>Lens shading correction</li>
<li>Spatial noise filtering</li>
<li>Per-channel gains (white balance)</li>
<li>Demosaicing (color filter array interpolation)</li>
<li><a class="el" href="classColor.html">Color</a> correction matrix (typically RGB to RGB)</li>
<li>Gamma correction</li>
<li><a class="el" href="classColor.html">Color</a> space transformation (typically RGB to YUV)</li>
<li>Cropping</li>
<li>Scaling</li>
</ul>
<p>Not all cameras implement all operations, and they are not necessarily implemented in the above order at the hardware level. The libcamera pipeline handlers translate the pipeline model to the real hardware configuration.</p>
<h2><a class="anchor" id="camera-sensor-model"></a>
Camera Sensor Model</h2>
<p>By default, libcamera configures the camera sensor automatically based on the configuration of the streams. Applications may instead specify a manual configuration for the camera sensor. This allows precise control of the frame geometry and frame rate delivered by the sensor.</p>
<p>More details about the camera sensor model implemented by libcamera are available in the libcamera camera-sensor-model documentation page.</p>
<h2><a class="anchor" id="digital-zoom"></a>
Digital Zoom</h2>
<p>Digital zoom is implemented as a combination of the cropping and scaling stages of the pipeline. Cropping is controlled explicitly through the controls::ScalerCrop control, while scaling is controlled implicitly based on the crop rectangle and the output stream size. The crop rectangle is expressed relatively to the full pixel array size and indicates how the field of view is affected by the pipeline. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
