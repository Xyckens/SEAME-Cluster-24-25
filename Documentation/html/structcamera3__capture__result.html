<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JetPackJoyRide: camera3_capture_result Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JetPackJoyRide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structcamera3__capture__result-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">camera3_capture_result Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="camera3_8h_source.html">camera3.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3450729a7f6e5765b47d3e16e21b784d" id="r_a3450729a7f6e5765b47d3e16e21b784d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a3450729a7f6e5765b47d3e16e21b784d">frame_number</a></td></tr>
<tr class="separator:a3450729a7f6e5765b47d3e16e21b784d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c085e2e0fce9e67bf54f01e181ed7c8" id="r_a5c085e2e0fce9e67bf54f01e181ed7c8"><td class="memItemLeft" align="right" valign="top">const camera_metadata_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a5c085e2e0fce9e67bf54f01e181ed7c8">result</a></td></tr>
<tr class="separator:a5c085e2e0fce9e67bf54f01e181ed7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f817ec4169e595bbe326b09f5e95872" id="r_a2f817ec4169e595bbe326b09f5e95872"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a2f817ec4169e595bbe326b09f5e95872">num_output_buffers</a></td></tr>
<tr class="separator:a2f817ec4169e595bbe326b09f5e95872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd61f06acc6d54bc7bb735b0d148b8f5" id="r_afd61f06acc6d54bc7bb735b0d148b8f5"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structcamera3__stream__buffer.html">camera3_stream_buffer_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#afd61f06acc6d54bc7bb735b0d148b8f5">output_buffers</a></td></tr>
<tr class="separator:afd61f06acc6d54bc7bb735b0d148b8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7db6c9a6af8b46eaa0f9a8f0bb9279" id="r_afc7db6c9a6af8b46eaa0f9a8f0bb9279"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structcamera3__stream__buffer.html">camera3_stream_buffer_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#afc7db6c9a6af8b46eaa0f9a8f0bb9279">input_buffer</a></td></tr>
<tr class="separator:afc7db6c9a6af8b46eaa0f9a8f0bb9279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d69f9c3d47fd03c946a6051bd408fbd" id="r_a5d69f9c3d47fd03c946a6051bd408fbd"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a5d69f9c3d47fd03c946a6051bd408fbd">partial_result</a></td></tr>
<tr class="separator:a5d69f9c3d47fd03c946a6051bd408fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f6f301acdb3a0a805263ced4aa38c16" id="r_a2f6f301acdb3a0a805263ced4aa38c16"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a2f6f301acdb3a0a805263ced4aa38c16">num_physcam_metadata</a></td></tr>
<tr class="separator:a2f6f301acdb3a0a805263ced4aa38c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a8530382dd6168216f9b8b1a5c9f7b" id="r_a22a8530382dd6168216f9b8b1a5c9f7b"><td class="memItemLeft" align="right" valign="top">const char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a22a8530382dd6168216f9b8b1a5c9f7b">physcam_ids</a></td></tr>
<tr class="separator:a22a8530382dd6168216f9b8b1a5c9f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa3df5a49a2bb16a08292694b26c524" id="r_a3fa3df5a49a2bb16a08292694b26c524"><td class="memItemLeft" align="right" valign="top">const camera_metadata_t **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__capture__result.html#a3fa3df5a49a2bb16a08292694b26c524">physcam_metadata</a></td></tr>
<tr class="separator:a3fa3df5a49a2bb16a08292694b26c524"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>camera3_capture_result_t:</p>
<p>The result of a single capture/reprocess by the camera HAL device. This is sent to the framework asynchronously with process_capture_result(), in response to a single capture request sent to the HAL with process_capture_request(). Multiple process_capture_result() calls may be performed by the HAL for each request.</p>
<p>Each call, all with the same frame number, may contain some subset of the output buffers, and/or the result metadata. The metadata may only be provided once for a given frame number; all other calls must set the result metadata to NULL.</p>
<p>The result structure contains the output metadata from this capture, and the set of output buffers that have been/will be filled for this capture. Each output buffer may come with a release sync fence that the framework will wait on before reading, in case the buffer has not yet been filled by the HAL.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>The metadata may be provided multiple times for a single frame number. The framework will accumulate together the final result set by combining each partial result together into the total result set.</p>
<p>If an input buffer is given in a request, the HAL must return it in one of the process_capture_result calls, and the call may be to just return the input buffer, without metadata and output buffers; the sync fences must be handled the same way they are done for output buffers.</p>
<p>Performance considerations:</p>
<p>Applications will also receive these partial results immediately, so sending partial results is a highly recommended performance optimization to avoid the total pipeline latency before sending the results for what is known very early on in the pipeline.</p>
<p>A typical use case might be calculating the AF state halfway through the pipeline; by sending the state back to the framework immediately, we get a 50% performance increase and perceived responsiveness of the auto-focus. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a3450729a7f6e5765b47d3e16e21b784d" name="a3450729a7f6e5765b47d3e16e21b784d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3450729a7f6e5765b47d3e16e21b784d">&#9670;&#160;</a></span>frame_number</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_capture_result::frame_number</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The frame number is an incrementing integer set by the framework in the submitted request to uniquely identify this capture. It is also used to identify the request in asynchronous notifications sent to <a class="el" href="structcamera3__callback__ops.html#a6b866f7b468e677ce586580fab546768">camera3_callback_ops_t.notify()</a>. </p>

</div>
</div>
<a id="afc7db6c9a6af8b46eaa0f9a8f0bb9279" name="afc7db6c9a6af8b46eaa0f9a8f0bb9279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc7db6c9a6af8b46eaa0f9a8f0bb9279">&#9670;&#160;</a></span>input_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcamera3__stream__buffer.html">camera3_stream_buffer_t</a>* camera3_capture_result::input_buffer</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>The handle for the input stream buffer for this capture. It may not yet be consumed at the time the HAL calls process_capture_result(); the framework will wait on the release sync fences provided by the HAL before reusing the buffer.</p>
<p>The HAL should handle the sync fences the same way they are done for output_buffers.</p>
<p>Only one input buffer is allowed to be sent per request. Similarly to output buffers, the ordering of returned input buffers must be maintained by the HAL.</p>
<p>Performance considerations:</p>
<p>The input buffer should be returned as early as possible. If the HAL supports sync fences, it can call process_capture_result to hand it back with sync fences being set appropriately. If the sync fences are not supported, the buffer can only be returned when it is consumed, which may take long time; the HAL may choose to copy this input buffer to make the buffer return sooner. </p>

</div>
</div>
<a id="a2f817ec4169e595bbe326b09f5e95872" name="a2f817ec4169e595bbe326b09f5e95872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f817ec4169e595bbe326b09f5e95872">&#9670;&#160;</a></span>num_output_buffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_capture_result::num_output_buffers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of output buffers returned in this result structure. Must be less than or equal to the matching capture request's count. If this is less than the buffer count in the capture request, at least one more call to process_capture_result with the same frame_number must be made, to return the remaining output buffers to the framework. This may only be zero if the structure includes valid result metadata or an input buffer is returned in this result. </p>

</div>
</div>
<a id="a2f6f301acdb3a0a805263ced4aa38c16" name="a2f6f301acdb3a0a805263ced4aa38c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f6f301acdb3a0a805263ced4aa38c16">&#9670;&#160;</a></span>num_physcam_metadata</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_capture_result::num_physcam_metadata</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_5:</p>
<p>Specifies the number of physical camera metadata this capture result contains. It must be equal to the number of physical cameras being requested from.</p>
<p>If the current camera device is not a logical multi-camera, or the corresponding capture_request doesn't request on any physical camera, this field must be 0. </p>

</div>
</div>
<a id="afd61f06acc6d54bc7bb735b0d148b8f5" name="afd61f06acc6d54bc7bb735b0d148b8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd61f06acc6d54bc7bb735b0d148b8f5">&#9670;&#160;</a></span>output_buffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcamera3__stream__buffer.html">camera3_stream_buffer_t</a>* camera3_capture_result::output_buffers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The handles for the output stream buffers for this capture. They may not yet be filled at the time the HAL calls process_capture_result(); the framework will wait on the release sync fences provided by the HAL before reading the buffers.</p>
<p>The HAL must set the stream buffer's release sync fence to a valid sync fd, or to -1 if the buffer has already been filled.</p>
<p>If the HAL encounters an error while processing the buffer, and the buffer is not filled, the buffer's status field must be set to CAMERA3_BUFFER_STATUS_ERROR. If the HAL did not wait on the acquire fence before encountering the error, the acquire fence should be copied into the release fence, to allow the framework to wait on the fence before reusing the buffer.</p>
<p>The acquire fence must be set to -1 for all output buffers. If num_output_buffers is zero, this may be NULL. In that case, at least one more process_capture_result call must be made by the HAL to provide the output buffers.</p>
<p>When process_capture_result is called with a new buffer for a frame, all previous frames' buffers for that corresponding stream must have been already delivered (the fences need not have yet been signaled).</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>Gralloc buffers for a frame may be sent to framework before the corresponding SHUTTER-notify.</p>
<p>Performance considerations:</p>
<p>Buffers delivered to the framework will not be dispatched to the application layer until a start of exposure timestamp has been received via a SHUTTER notify() call. It is highly recommended to dispatch that call as early as possible. </p>

</div>
</div>
<a id="a5d69f9c3d47fd03c946a6051bd408fbd" name="a5d69f9c3d47fd03c946a6051bd408fbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d69f9c3d47fd03c946a6051bd408fbd">&#9670;&#160;</a></span>partial_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t camera3_capture_result::partial_result</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>In order to take advantage of partial results, the HAL must set the static metadata android.request.partialResultCount to the number of partial results it will send for each frame.</p>
<p>Each new capture result with a partial result must set this field (partial_result) to a distinct inclusive value between 1 and android.request.partialResultCount.</p>
<p>HALs not wishing to take advantage of this feature must not set an android.request.partialResultCount or partial_result to a value other than 1.</p>
<p>This value must be set to 0 when a capture result contains buffers only and no metadata. </p>

</div>
</div>
<a id="a22a8530382dd6168216f9b8b1a5c9f7b" name="a22a8530382dd6168216f9b8b1a5c9f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a8530382dd6168216f9b8b1a5c9f7b">&#9670;&#160;</a></span>physcam_ids</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char** camera3_capture_result::physcam_ids</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_5:</p>
<p>An array of strings containing the physical camera ids for the returned physical camera metadata. The length of the array is num_physcam_metadata. </p>

</div>
</div>
<a id="a3fa3df5a49a2bb16a08292694b26c524" name="a3fa3df5a49a2bb16a08292694b26c524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fa3df5a49a2bb16a08292694b26c524">&#9670;&#160;</a></span>physcam_metadata</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const camera_metadata_t** camera3_capture_result::physcam_metadata</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_5:</p>
<p>The array of physical camera metadata for the physical cameras being requested upon. This array should have a 1-to-1 mapping with the physcam_ids. The length of the array is num_physcam_metadata. </p>

</div>
</div>
<a id="a5c085e2e0fce9e67bf54f01e181ed7c8" name="a5c085e2e0fce9e67bf54f01e181ed7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c085e2e0fce9e67bf54f01e181ed7c8">&#9670;&#160;</a></span>result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const camera_metadata_t* camera3_capture_result::result</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The result metadata for this capture. This contains information about the final capture parameters, the state of the capture and post-processing hardware, the state of the 3A algorithms, if enabled, and the output of any enabled statistics units.</p>
<p>Only one call to process_capture_result() with a given frame_number may include the result metadata. All other calls for the same frame_number must set this to NULL.</p>
<p>If there was an error producing the result metadata, result must be an empty metadata buffer, and notify() must be called with ERROR_RESULT.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>Multiple calls to process_capture_result() with a given frame_number may include the result metadata.</p>
<p>Partial metadata submitted should not include any metadata key returned in a previous partial result for a given frame. Each new partial result for that frame must also set a distinct partial_result value.</p>
<p>If notify has been called with ERROR_RESULT, all further partial results for that frame are ignored by the framework. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/peripherals/camera/libcamera/include/android/hardware/libhardware/include/hardware/<a class="el" href="camera3_8h_source.html">camera3.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
