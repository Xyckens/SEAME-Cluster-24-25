<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JetPackJoyRide: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JetPackJoyRide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> The JetRacer project is organized into a modular structure, where each package represents a ROS2 node encapsulating a specific aspect of the system. The architecture is divided into three main layers, each with its own responsibility:</p>
<ul>
<li><b>Bus Interfaces</b>: Directly interact with hardware via different protocols (CAN, I2C).</li>
<li><b>Drivers</b>: Defines device specific operations.</li>
<li><b>Peripherals</b>: Communicate with the drivers and manage higher-level device functionality.</li>
<li><b>Head Unit</b>: Coordinates the peripherals and handles higher-level logic.</li>
</ul>
<div class="fragment"><div class="line">.</div>
<div class="line">├── bus_interfaces</div>
<div class="line">│   ├── can_interface</div>
<div class="line">│   └── i2c_interface</div>
<div class="line">├── drivers</div>
<div class="line">│   ├── abstract_driver</div>
<div class="line">│   ├── custom_msgs</div>
<div class="line">│   ├── ina219_driver</div>
<div class="line">│   ├── pca9685_driver</div>
<div class="line">│   └── ssd1306_driver</div>
<div class="line">├── head_unit</div>
<div class="line">│   ├── display_routine</div>
<div class="line">│   └── teleop</div>
<div class="line">├── peripherals</div>
<div class="line">│   ├── battery</div>
<div class="line">│   ├── camera</div>
<div class="line">│   ├── dc_motors</div>
<div class="line">│   ├── oled_display</div>
<div class="line">│   ├── servo_motor</div>
<div class="line">│   └── speed_sensor</div>
<div class="line">└── tests</div>
<div class="line">    └── i2c_peripheral_stress_test</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md1"></a>
Layered Architecture</h1>
<p>The project structure follows a clear layered architecture that helps isolate responsibilities and ensures modularity. The three main layers are:</p>
<h2><a class="anchor" id="autotoc_md2"></a>
1. &lt;strong&gt;Bus Interfaces (can_interface, i2c_interface)&lt;/strong&gt;</h2>
<p>These packages manage the direct interaction with hardware data buses. They are the closest to the hardware and abstract the communication with physical devices such as CAN and I2C interfaces.</p><ul>
<li><b>Responsibility</b>: Communicate with hardware via data buses (CAN, I2C).</li>
<li><b>ROS2 Mechanism</b>: Provide services or topics for peripheral nodes to interact with hardware.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
2. &lt;strong&gt;Drivers (abstract_driver, pca9685_driver, etc.)&lt;/strong&gt;</h2>
<p>Drivers encapsulate device-specific logic into reusable objects. Each driver handles the low-level details of interacting with its associated hardware. These drivers are now decoupled from the peripheral nodes to promote code reuse and maintainability.</p><ul>
<li><b>Responsibility</b>: Provide device-specific functionality, abstracting away low-level hardware interactions.</li>
<li><b>Design Improvement</b>: Peripheral nodes now hold an instance of their corresponding driver. If the driver fails to initialize (e.g., due to hardware issues), the peripheral node will not start, preventing undefined behavior or unnecessary crashes.</li>
<li><b>ROS2 Mechanism</b>: Exposed as libraries to be used by peripherals or other nodes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
3. &lt;strong&gt;Peripherals (oled_display, servo_motor, dc_motors, etc.)&lt;/strong&gt;</h2>
<p>Peripherals interact with drivers to manage the higher-level functionality of each device. For example, the <code>servo_motor</code> package uses the <code>pca9685_driver</code> to control servos. Each peripheral node initializes its driver and interact with the bus interfaces via his driver instance.</p><ul>
<li><b>Responsibility</b>: Manage higher-level device functionality and interact with drivers.</li>
<li><b>Design Improvement</b>: Peripheral nodes depend on the proper initialization of their corresponding driver. If the driver cannot initialize successfully (e.g., due to a missing or malfunctioning device), the peripheral node will fail gracefully.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
4. &lt;strong&gt;Head Unit (coordinator, infotainment)&lt;/strong&gt;</h2>
<p>The head unit represents the higher-level logic of the system, coordinating the operation of peripherals and providing user interaction functionality (e.g., infotainment system, control coordination).</p><ul>
<li><b>Responsibility</b>: Coordinate and manage the operation of peripherals.</li>
<li><b>ROS2 Mechanism</b>: Provide high-level functionalities and user interactions through nodes that communicate with peripheral nodes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Build Instructions</h1>
<p>To build the JetRacer project, follow these steps:</p>
<ol type="1">
<li>Open a terminal and navigate to the root directory of the project: <div class="fragment"><div class="line">cd JetRacer</div>
</div><!-- fragment --></li>
<li><p class="startli">Build the project using <code>colcon</code>: </p><div class="fragment"><div class="line">colcon build --symlink-install</div>
</div><!-- fragment --><p class="startli">This will compile the source code and set up the appropriate environment for running the nodes.</p>
</li>
<li>Execute the launch script: <div class="fragment"><div class="line">ros2 launch launch/JetRacer_launch.py</div>
</div><!-- fragment --></li>
<li><p class="startli">Open a terminal to launch the <code>rqt</code> console and start interacting with topics, or directly publish into topics:</p>
<p class="startli">To launch the <code>rqt</code> console: </p><div class="fragment"><div class="line">rqt</div>
</div><!-- fragment --><p class="startli">Or directly publish a topic: </p><div class="fragment"><div class="line">ros2 topic list</div>
<div class="line">ros2 topic pub cmd_display custom_msgs/Display &#39;{line1: &quot;Hello world&quot;}&#39; --once</div>
</div><!-- fragment --> </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
